!=======================================================================
! Generated by: PSCAD v5.0.1.0
! Warning:  The content of this file is automatically generated.
!           Do not modify, as any changes made here will be lost!
!-----------------------------------------------------------------------
! Component     : Aggr_Fb_Scaled
! Description   : 
!-----------------------------------------------------------------------


!=======================================================================

      SUBROUTINE Aggr_Fb_ScaledDyn(FbOut, NoInv, FbIn)

!---------------------------------------
! Standard includes 
!---------------------------------------

      INCLUDE 'nd.h'
      INCLUDE 'emtconst.h'
      INCLUDE 'emtstor.h'
      INCLUDE 's0.h'
      INCLUDE 's1.h'
      INCLUDE 's2.h'
      INCLUDE 's4.h'
      INCLUDE 'branches.h'
      INCLUDE 'pscadv3.h'
      INCLUDE 'fnames.h'
      INCLUDE 'radiolinks.h'
      INCLUDE 'matlab.h'
      INCLUDE 'rtconfig.h'

!---------------------------------------
! Variable Declarations 
!---------------------------------------


! Subroutine Arguments
      INTEGER, INTENT(IN)  :: NoInv
      REAL,    INTENT(IN)  :: FbIn(10)
      REAL,    INTENT(OUT) :: FbOut(10)

! Electrical Node Indices

! Control Signals
      REAL     RT_1, RT_2, RT_3, RT_4, RT_5, RT_6
      REAL     RT_7, RT_8, RT_9, RT_10, RT_11
      REAL     RT_12, RT_13, RT_14, RT_15, RT_16
      REAL     RT_17, RT_18, RT_19, RT_20, RT_21
      REAL     RT_22, RT_23, RT_24, RT_25

! Internal Variables

! Indexing variables
      INTEGER ICALL_NO                            ! Module call num
      INTEGER ISTOI, ISTOF, IT_0                  ! Storage Indices
      INTEGER ISUBS                               ! SS/Node/Branch/Xfmr


!---------------------------------------
! Local Indices 
!---------------------------------------

! Dsdyn <-> Dsout transfer index storage

      NTXFR = NTXFR + 1

      TXFR(NTXFR,1) = NSTOL
      TXFR(NTXFR,2) = NSTOI
      TXFR(NTXFR,3) = NSTOF
      TXFR(NTXFR,4) = NSTOC

! Increment and assign runtime configuration call indices

      ICALL_NO  = NCALL_NO
      NCALL_NO  = NCALL_NO + 1

! Increment global storage indices

      ISTOI     = NSTOI
      NSTOI     = NSTOI + 1
      ISTOF     = NSTOF
      NSTOF     = NSTOF + 45
      NNODE     = NNODE + 2
      NCSCS     = NCSCS + 0
      NCSCR     = NCSCR + 0

!---------------------------------------
! Transfers from storage arrays 
!---------------------------------------

      RT_1     = STOF(ISTOF + 21)
      RT_2     = STOF(ISTOF + 22)
      RT_3     = STOF(ISTOF + 23)
      RT_4     = STOF(ISTOF + 24)
      RT_5     = STOF(ISTOF + 25)
      RT_6     = STOF(ISTOF + 26)
      RT_7     = STOF(ISTOF + 27)
      RT_8     = STOF(ISTOF + 28)
      RT_9     = STOF(ISTOF + 29)
      RT_10    = STOF(ISTOF + 30)
      RT_11    = STOF(ISTOF + 31)
      RT_12    = STOF(ISTOF + 32)
      RT_13    = STOF(ISTOF + 33)
      RT_14    = STOF(ISTOF + 34)
      RT_15    = STOF(ISTOF + 35)
      RT_16    = STOF(ISTOF + 36)
      RT_17    = STOF(ISTOF + 37)
      RT_18    = STOF(ISTOF + 38)
      RT_19    = STOF(ISTOF + 39)
      RT_20    = STOF(ISTOF + 40)
      RT_21    = STOF(ISTOF + 41)
      RT_22    = STOF(ISTOF + 42)
      RT_23    = STOF(ISTOF + 43)
      RT_24    = STOF(ISTOF + 44)
      RT_25    = STOF(ISTOF + 45)

! Array (1:10) quantities...
      DO IT_0 = 1,10
         FbOut(IT_0) = STOF(ISTOF + 0 + IT_0)
      END DO


!---------------------------------------
! Electrical Node Lookup 
!---------------------------------------


!---------------------------------------
! Configuration of Models 
!---------------------------------------

      IF ( TIMEZERO ) THEN
         FILENAME = 'Aggr_Fb_Scaled.dta'
         CALL EMTDC_OPENFILE
         SECTION = 'DATADSD:'
         CALL EMTDC_GOTOSECTION
      ENDIF
!---------------------------------------
! Generated code from module definition 
!---------------------------------------


! 30:[datatap] Scalar/Array Tap 
      RT_5 = FbIn(1)

! 40:[unity] Type/Shape conversion block 
! integer -> real
      RT_6 = REAL(NoInv)

! 50:[const] Real Constant 
      RT_17 = 0.0

! 60:[datatap] Scalar/Array Tap 
      RT_3 = FbIn(2)

! 70:[unity] Type/Shape conversion block 
! integer -> real
      RT_1 = REAL(NoInv)

! 80:[datatap] Scalar/Array Tap 
      RT_12 = FbIn(3)

! 90:[unity] Type/Shape conversion block 
! integer -> real
      RT_7 = REAL(NoInv)

! 100:[datatap] Scalar/Array Tap 
      RT_9 = FbIn(4)

! 110:[unity] Type/Shape conversion block 
! integer -> real
      RT_10 = REAL(NoInv)

! 120:[datatap] Scalar/Array Tap 
      RT_19 = FbIn(5)

! 130:[unity] Type/Shape conversion block 
! integer -> real
      RT_20 = REAL(NoInv)

! 140:[datatap] Scalar/Array Tap 
      RT_21 = FbIn(6)

! 150:[unity] Type/Shape conversion block 
! integer -> real
      RT_18 = REAL(NoInv)

! 160:[datatap] Scalar/Array Tap 
      RT_22 = FbIn(7)

! 170:[unity] Type/Shape conversion block 
! integer -> real
      RT_23 = REAL(NoInv)

! 180:[datatap] Scalar/Array Tap 
      RT_25 = FbIn(8)

! 190:[unity] Type/Shape conversion block 
! integer -> real
      RT_24 = REAL(NoInv)

! 200:[mult] Multiplier 
      RT_4 = RT_5 * RT_6

! 210:[mult] Multiplier 
      RT_2 = RT_3 * RT_1

! 220:[mult] Multiplier 
      RT_11 = RT_12 * RT_7

! 230:[mult] Multiplier 
      RT_8 = RT_9 * RT_10

! 240:[mult] Multiplier 
      RT_13 = RT_19 * RT_20

! 250:[mult] Multiplier 
      RT_14 = RT_21 * RT_18

! 260:[mult] Multiplier 
      RT_15 = RT_22 * RT_23

! 270:[mult] Multiplier 
      RT_16 = RT_25 * RT_24

! 280:[datamerge] Merges data signals into an array 
      FbOut(1) = RT_4
      FbOut(2) = RT_2
      FbOut(3) = RT_11
      FbOut(4) = RT_8
      FbOut(5) = RT_13
      FbOut(6) = RT_14
      FbOut(7) = RT_15
      FbOut(8) = RT_16
      FbOut(9) = RT_17
      FbOut(10) = RT_17

!---------------------------------------
! Feedbacks and transfers to storage 
!---------------------------------------

      STOI(ISTOI + 1) = NoInv
      STOF(ISTOF + 21) = RT_1
      STOF(ISTOF + 22) = RT_2
      STOF(ISTOF + 23) = RT_3
      STOF(ISTOF + 24) = RT_4
      STOF(ISTOF + 25) = RT_5
      STOF(ISTOF + 26) = RT_6
      STOF(ISTOF + 27) = RT_7
      STOF(ISTOF + 28) = RT_8
      STOF(ISTOF + 29) = RT_9
      STOF(ISTOF + 30) = RT_10
      STOF(ISTOF + 31) = RT_11
      STOF(ISTOF + 32) = RT_12
      STOF(ISTOF + 33) = RT_13
      STOF(ISTOF + 34) = RT_14
      STOF(ISTOF + 35) = RT_15
      STOF(ISTOF + 36) = RT_16
      STOF(ISTOF + 37) = RT_17
      STOF(ISTOF + 38) = RT_18
      STOF(ISTOF + 39) = RT_19
      STOF(ISTOF + 40) = RT_20
      STOF(ISTOF + 41) = RT_21
      STOF(ISTOF + 42) = RT_22
      STOF(ISTOF + 43) = RT_23
      STOF(ISTOF + 44) = RT_24
      STOF(ISTOF + 45) = RT_25

! Array (1:10) quantities...
      DO IT_0 = 1,10
         STOF(ISTOF + 0 + IT_0) = FbOut(IT_0)
         STOF(ISTOF + 10 + IT_0) = FbIn(IT_0)
      END DO


!---------------------------------------
! Transfer to Exports
!---------------------------------------
      !FbOut    is output

!---------------------------------------
! Close Model Data read 
!---------------------------------------

      IF ( TIMEZERO ) CALL EMTDC_CLOSEFILE
      RETURN
      END

!=======================================================================

      SUBROUTINE Aggr_Fb_ScaledOut()

!---------------------------------------
! Standard includes 
!---------------------------------------

      INCLUDE 'nd.h'
      INCLUDE 'emtconst.h'
      INCLUDE 'emtstor.h'
      INCLUDE 's0.h'
      INCLUDE 's1.h'
      INCLUDE 's2.h'
      INCLUDE 's4.h'
      INCLUDE 'branches.h'
      INCLUDE 'pscadv3.h'
      INCLUDE 'fnames.h'
      INCLUDE 'radiolinks.h'
      INCLUDE 'matlab.h'
      INCLUDE 'rtconfig.h'

!---------------------------------------
! Variable Declarations 
!---------------------------------------


! Electrical Node Indices

! Control Signals
      REAL     RT_17

! Internal Variables

! Indexing variables
      INTEGER ICALL_NO                            ! Module call num
      INTEGER ISTOL, ISTOI, ISTOF, ISTOC          ! Storage Indices
      INTEGER ISUBS                               ! SS/Node/Branch/Xfmr


!---------------------------------------
! Local Indices 
!---------------------------------------

! Dsdyn <-> Dsout transfer index storage

      NTXFR = NTXFR + 1

      ISTOL = TXFR(NTXFR,1)
      ISTOI = TXFR(NTXFR,2)
      ISTOF = TXFR(NTXFR,3)
      ISTOC = TXFR(NTXFR,4)

! Increment and assign runtime configuration call indices

      ICALL_NO  = NCALL_NO
      NCALL_NO  = NCALL_NO + 1

! Increment global storage indices

      NNODE     = NNODE + 2
      NCSCS     = NCSCS + 0
      NCSCR     = NCSCR + 0

!---------------------------------------
! Transfers from storage arrays 
!---------------------------------------

      RT_17    = STOF(ISTOF + 37)


!---------------------------------------
! Electrical Node Lookup 
!---------------------------------------


!---------------------------------------
! Configuration of Models 
!---------------------------------------

      IF ( TIMEZERO ) THEN
         FILENAME = 'Aggr_Fb_Scaled.dta'
         CALL EMTDC_OPENFILE
         SECTION = 'DATADSO:'
         CALL EMTDC_GOTOSECTION
      ENDIF
!---------------------------------------
! Generated code from module definition 
!---------------------------------------


! 50:[const] Real Constant 

      RT_17 = 0.0

!---------------------------------------
! Feedbacks and transfers to storage 
!---------------------------------------

      STOF(ISTOF + 37) = RT_17


!---------------------------------------
! Close Model Data read 
!---------------------------------------

      IF ( TIMEZERO ) CALL EMTDC_CLOSEFILE
      RETURN
      END

!=======================================================================

      SUBROUTINE Aggr_Fb_ScaledDyn_Begin()

!---------------------------------------
! Standard includes 
!---------------------------------------

      INCLUDE 'nd.h'
      INCLUDE 'emtconst.h'
      INCLUDE 's0.h'
      INCLUDE 's1.h'
      INCLUDE 's4.h'
      INCLUDE 'branches.h'
      INCLUDE 'pscadv3.h'
      INCLUDE 'radiolinks.h'
      INCLUDE 'rtconfig.h'

!---------------------------------------
! Variable Declarations 
!---------------------------------------


! Subroutine Arguments

! Electrical Node Indices

! Control Signals
      REAL     RT_17

! Internal Variables

! Indexing variables
      INTEGER ICALL_NO                            ! Module call num
      INTEGER ISUBS                               ! SS/Node/Branch/Xfmr


!---------------------------------------
! Local Indices 
!---------------------------------------


! Increment and assign runtime configuration call indices

      ICALL_NO  = NCALL_NO
      NCALL_NO  = NCALL_NO + 1

! Increment global storage indices

      NNODE     = NNODE + 2
      NCSCS     = NCSCS + 0
      NCSCR     = NCSCR + 0

!---------------------------------------
! Electrical Node Lookup 
!---------------------------------------


!---------------------------------------
! Generated code from module definition 
!---------------------------------------


! 30:[datatap] Scalar/Array Tap 

! 40:[unity] Type/Shape conversion block 

! 50:[const] Real Constant 
      RT_17 = 0.0

! 60:[datatap] Scalar/Array Tap 

! 70:[unity] Type/Shape conversion block 

! 80:[datatap] Scalar/Array Tap 

! 90:[unity] Type/Shape conversion block 

! 100:[datatap] Scalar/Array Tap 

! 110:[unity] Type/Shape conversion block 

! 120:[datatap] Scalar/Array Tap 

! 130:[unity] Type/Shape conversion block 

! 140:[datatap] Scalar/Array Tap 

! 150:[unity] Type/Shape conversion block 

! 160:[datatap] Scalar/Array Tap 

! 170:[unity] Type/Shape conversion block 

! 180:[datatap] Scalar/Array Tap 

! 190:[unity] Type/Shape conversion block 

! 200:[mult] Multiplier 

! 210:[mult] Multiplier 

! 220:[mult] Multiplier 

! 230:[mult] Multiplier 

! 240:[mult] Multiplier 

! 250:[mult] Multiplier 

! 260:[mult] Multiplier 

! 270:[mult] Multiplier 

! 280:[datamerge] Merges data signals into an array 

      RETURN
      END

!=======================================================================

      SUBROUTINE Aggr_Fb_ScaledOut_Begin()

!---------------------------------------
! Standard includes 
!---------------------------------------

      INCLUDE 'nd.h'
      INCLUDE 'emtconst.h'
      INCLUDE 's0.h'
      INCLUDE 's1.h'
      INCLUDE 's4.h'
      INCLUDE 'branches.h'
      INCLUDE 'pscadv3.h'
      INCLUDE 'radiolinks.h'
      INCLUDE 'rtconfig.h'

!---------------------------------------
! Variable Declarations 
!---------------------------------------


! Subroutine Arguments

! Electrical Node Indices

! Control Signals
      REAL     RT_17

! Internal Variables

! Indexing variables
      INTEGER ICALL_NO                            ! Module call num
      INTEGER ISUBS                               ! SS/Node/Branch/Xfmr


!---------------------------------------
! Local Indices 
!---------------------------------------


! Increment and assign runtime configuration call indices

      ICALL_NO  = NCALL_NO
      NCALL_NO  = NCALL_NO + 1

! Increment global storage indices

      NNODE     = NNODE + 2
      NCSCS     = NCSCS + 0
      NCSCR     = NCSCR + 0

!---------------------------------------
! Electrical Node Lookup 
!---------------------------------------


!---------------------------------------
! Generated code from module definition 
!---------------------------------------


! 50:[const] Real Constant 
      RT_17 = 0.0

      RETURN
      END

