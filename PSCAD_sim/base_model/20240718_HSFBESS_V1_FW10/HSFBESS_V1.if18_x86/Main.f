!=======================================================================
! Generated by: PSCAD v5.0.1.0
! Warning:  The content of this file is automatically generated.
!           Do not modify, as any changes made here will be lost!
!-----------------------------------------------------------------------
! Component     : Main
! Description   : 
!-----------------------------------------------------------------------


!=======================================================================

      SUBROUTINE MainDyn()

!---------------------------------------
! Standard includes 
!---------------------------------------

      INCLUDE 'nd.h'
      INCLUDE 'emtconst.h'
      INCLUDE 'emtstor.h'
      INCLUDE 's0.h'
      INCLUDE 's1.h'
      INCLUDE 's2.h'
      INCLUDE 's4.h'
      INCLUDE 'branches.h'
      INCLUDE 'pscadv3.h'
      INCLUDE 'fnames.h'
      INCLUDE 'radiolinks.h'
      INCLUDE 'matlab.h'
      INCLUDE 'rtconfig.h'

!---------------------------------------
! Function/Subroutine Declarations 
!---------------------------------------

!     SUBR    InvFbDummyDyn  ! 
!     SUBR    TSAT21        ! Transformer Saturation Subroutine
!     SUBR    DPS_DummyDyn  ! 
!     SUBR    GridSourceDyn  ! 
!     SUBR    FaultBlockDyn  ! 
!     SUBR    EMTDC_XTTRANS  ! 'Timed Transition'
!     SUBR    SymmetricalComponentsCalc_1_1Dyn  ! 
!     SUBR    SymmetricalComponentsCalcDyn  ! 
!     SUBR    setpointProfilesDyn  ! 
!     SUBR    EMTDC_X2COMP  ! 'Comparator with Interpolation'
!     SUBR    TapCtrl_1Dyn  ! 
!     SUBR    Aggr_Fb_ScaledDyn  ! 
!     SUBR    DDSRF_PLL_1Dyn  ! 
!     SUBR    HyCtlDyn      ! 
!     SUBR    SCxxxxDyn     ! SMA  SC xxxx
      REAL    LIMIT         ! Hard Limiter
!     SUBR    DEBUG_HyCon_ScopeDyn  ! 
!     SUBR    SC_ScopeDyn   ! Scopes for monitoring

!---------------------------------------
! Variable Declarations 
!---------------------------------------


! Subroutine Arguments

! Electrical Node Indices
      INTEGER  PCU2_MVBUS(3), PCU1_MVBUS(3)
      INTEGER  NT_16, NT_23(3), NT_24(3)
      INTEGER  NT_27(3), NT_28(3)

! Control Signals
      LOGICAL  LT_1
      INTEGER  Tap_position, No_PCU1, PCU2_BRK
      INTEGER  POI_BRK, IT_1, IT_2, MVBRK, IT_3
      INTEGER  No_PCU2, IT_4, PCU1_BRK, IT_5
      INTEGER  IT_6, PVmode
      REAL     Meas_Grid(10), DPS1_Spt(5)
      REAL     DPS2_Spt(5), maintap, RT_1
      REAL     PoiVArSpt_pu, RT_2, RT_3, RT_4
      REAL     RT_5, RT_6, PCU1_Irr, RT_7, RT_8
      REAL     RT_9, RT_10, RT_11, Iqzero_PoC
      REAL     RT_12, RT_13, RT_14, Vneg_PoC
      REAL     Vpos_PoC, Vzero_PoC, Vab_PPC
      REAL     Vbc_PPC, Vca_PPC, Ineg_PoC
      REAL     Ipos_PoC, Izero_PoC, RT_15(12)
      REAL     Poi_Ms(12), Pv_Ms(4), PCU2_Spt(20)
      REAL     PCU1_Spt(20), PCU2_Fb_SI(10)
      REAL     Bess_Ms(4), MEAS_PCU1(17)
      REAL     MEAS_PCU2(17), DPS1_Fb(10)
      REAL     DPS2_Fb(10), PCU1_P_LV, PCU1_Q_LV
      REAL     PCU1_A_LV(3), PCU1_V_LV_pu
      REAL     PCU1_Q_MV, PCU1_P_MV, PCU1_A_MV(3)
      REAL     RT_16, RT_17, RT_18, RT_19, RT_20
      REAL     RT_21, PVWSpt, PCU2_A_MV(3)
      REAL     PCU2_P_MV, PCU2_Q_MV, PCU2_Q_LV
      REAL     PCU2_P_LV, PCU1_Arms_LV
      REAL     PCU2_Arms_LV, PCU2_Phs, PCU1_Phs
      REAL     PLANT_Phs, RT_22, MV_Bus_Vol
      REAL     RT_23, Fsys, PCU1_Fb_SI(10)
      REAL     dummy_fb(10), SC_Fb(10)
      REAL     PoiWLimSales, PoiVArSpt, PoiVolSpt
      REAL     BessWSpt, PCU1_P_MV_AGGR
      REAL     PCU1_Q_MV_AGGR, PCU2_P_MV_AGGR
      REAL     PCU2_Q_MV_AGGR, Qspt_MVAr
      REAL     PoiPfSpt, Pspt_MW, PoiWLimSales_pu
      REAL     PCU1_V_LV, LV_Vol_base1
      REAL     PCU1_V_MV_pu, PCU1_V_MV
      REAL     PCU2_V_MV_pu, PCU2_V_MV
      REAL     MV_Vol_base, RT_24, RT_25, inf_BRK
      REAL     Pcmd_PPC_to_INV_PV
      REAL     Qcmd_PPC_to_INV_PV
      REAL     Pcmd_PPC_to_INV_BESS
      REAL     Qcmd_PPC_to_INV_BESS, Pout_INV_PV
      REAL     RT_26, P_Base_PV, Qout_INV_PV
      REAL     RT_27, Pout_INV_BESS, RT_28
      REAL     P_Base_BESS, Qout_INV_BESS, RT_29
      REAL     PCU2_V_LV_pu, PCU2_V_LV
      REAL     PCU2_A_LV(3), HV_Vol_base
      REAL     BESSspt_MW, BessWSpt_pu
      REAL     PoiVolSpt_pu, Q_Base_PV
      REAL     Q_Base_BESS, Iq_neg_pos_ratio
      REAL     Iqneg_PoC, Iqpos_PoC, Itot_PoC
      REAL     RT_30, RT_31, RT_32, Iq_PoC
      REAL     Id_PoC, RT_33, RT_34, RT_35, RT_36
      REAL     RT_37, RT_38, Ia_PoC, Ib_PoC
      REAL     Ic_PoC, PLANT_V_HV_pu, PLANT_P_HV
      REAL     PLANT_Q_HV, Vol_POI, Hz_POI
      REAL     McbStt, GcbStt, Vrms_abc_POI(3)
      REAL     RT_39, RT_40, FRT_flag_PV
      REAL     FRT_flag_BESS, FRT_flag_POC
      REAL     PLANT_Q_MV, PLANT_P_MV, PLANT_V_MV
      REAL     LV_Vol_base2, Meas_Plant(10)
      REAL     PCU1_Fb(10), PCU2_Fb(10), V_ph(3)
      REAL     DEBUG_PCU1(200), DEBUG_PCU2(200)
      REAL     DEBUG_HyCon1(40), PLANT_V_HV
      REAL     Amp_MV(3), PLANT_I_MV

! Internal Variables
      LOGICAL  LVD1_1
      INTEGER  IVD1_1, IVD1_2, IVD1_3, IVD1_4
      REAL     RVD1_1, RVD1_2, RVD1_3, RVD1_4
      REAL     OLD_CCIN_a1, OLD_CCIN_b1
      REAL     OLD_CCIN_c1, OLD_CCIN_a2
      REAL     OLD_CCIN_b2, OLD_CCIN_c2
      REAL     NEW_CCIN_a1, NEW_CCIN_b1
      REAL     NEW_CCIN_c1, NEW_CCIN_a2
      REAL     NEW_CCIN_b2, NEW_CCIN_c2, IMKa_OLD
      REAL     IMKb_OLD, IMKc_OLD, IKMa_OLD
      REAL     IKMb_OLD, IKMc_OLD, IZom, IZo
      REAL     Scl1, X_KNEE, TURNS_V, RVD2_1(2)
      REAL     RVD2_2(2), RVD1_5, RVD1_6, RVD1_7

! Indexing variables
      INTEGER ICALL_NO                            ! Module call num
      INTEGER ISTOL, ISTOI, ISTOF, IT_0           ! Storage Indices
      INTEGER ICX, IPGB                           ! Control/Monitoring
      INTEGER ISUBS, SS(8), IBRCH(8), INODE       ! SS/Node/Branch/Xfmr
      INTEGER IXFMR


!---------------------------------------
! Local Indices 
!---------------------------------------

! Dsdyn <-> Dsout transfer index storage

      NTXFR = NTXFR + 1

      TXFR(NTXFR,1) = NSTOL
      TXFR(NTXFR,2) = NSTOI
      TXFR(NTXFR,3) = NSTOF
      TXFR(NTXFR,4) = NSTOC

! Increment and assign runtime configuration call indices

      ICALL_NO  = NCALL_NO
      NCALL_NO  = NCALL_NO + 1

! Increment global storage indices

      ISTOL     = NSTOL
      NSTOL     = NSTOL + 1
      ISTOI     = NSTOI
      NSTOI     = NSTOI + 14
      ISTOF     = NSTOF
      NSTOF     = NSTOF + 809
      IPGB      = NPGB
      NPGB      = NPGB + 70
      ICX       = NCX
      NCX       = NCX + 7
      INODE     = NNODE + 2
      NNODE     = NNODE + 102
      IXFMR     = NXFMR
      NXFMR     = NXFMR + 12
      NCSCS     = NCSCS + 0
      NCSCR     = NCSCR + 0

! Initialize Subsystem Mapping

      ISUBS = NSUBS + 0
      NSUBS = NSUBS + 8

      DO IT_0 = 1,8
         SS(IT_0) = SUBS(ISUBS + IT_0)
      END DO

! Initialize Branch Mapping.

      IBRCH(1)     = NBRCH(SS(1))
      NBRCH(SS(1)) = NBRCH(SS(1)) + 119


      IBRCH(2)     = NBRCH(SS(2))
      NBRCH(SS(2)) = NBRCH(SS(2)) + 3


      IBRCH(3)     = NBRCH(SS(3))
      NBRCH(SS(3)) = NBRCH(SS(3)) + 1


      IBRCH(4)     = NBRCH(SS(4))
      NBRCH(SS(4)) = NBRCH(SS(4)) + 0


      IBRCH(5)     = NBRCH(SS(5))
      NBRCH(SS(5)) = NBRCH(SS(5)) + 0


      IBRCH(6)     = NBRCH(SS(6))
      NBRCH(SS(6)) = NBRCH(SS(6)) + 3


      IBRCH(7)     = NBRCH(SS(7))
      NBRCH(SS(7)) = NBRCH(SS(7)) + 0


      IBRCH(8)     = NBRCH(SS(8))
      NBRCH(SS(8)) = NBRCH(SS(8)) + 0

!---------------------------------------
! Transfers from storage arrays 
!---------------------------------------

      Tap_position = STOI(ISTOI + 1)
      maintap  = STOF(ISTOF + 21)
      RT_1     = STOF(ISTOF + 22)
      PoiVArSpt_pu = STOF(ISTOF + 23)
      RT_2     = STOF(ISTOF + 24)
      RT_3     = STOF(ISTOF + 25)
      RT_4     = STOF(ISTOF + 26)
      RT_5     = STOF(ISTOF + 27)
      RT_6     = STOF(ISTOF + 28)
      PCU1_Irr = STOF(ISTOF + 29)
      RT_7     = STOF(ISTOF + 30)
      RT_8     = STOF(ISTOF + 31)
      RT_9     = STOF(ISTOF + 32)
      RT_10    = STOF(ISTOF + 33)
      RT_11    = STOF(ISTOF + 34)
      Iqzero_PoC = STOF(ISTOF + 35)
      RT_12    = STOF(ISTOF + 36)
      RT_13    = STOF(ISTOF + 37)
      RT_14    = STOF(ISTOF + 38)
      Vneg_PoC = STOF(ISTOF + 39)
      Vpos_PoC = STOF(ISTOF + 40)
      Vzero_PoC = STOF(ISTOF + 41)
      Vab_PPC  = STOF(ISTOF + 42)
      Vbc_PPC  = STOF(ISTOF + 43)
      Vca_PPC  = STOF(ISTOF + 44)
      Ineg_PoC = STOF(ISTOF + 45)
      Ipos_PoC = STOF(ISTOF + 46)
      Izero_PoC = STOF(ISTOF + 47)
      No_PCU1  = STOI(ISTOI + 2)
      PCU1_P_LV = STOF(ISTOF + 184)
      PCU1_Q_LV = STOF(ISTOF + 185)
      PCU1_V_LV_pu = STOF(ISTOF + 189)
      PCU1_Q_MV = STOF(ISTOF + 190)
      PCU1_P_MV = STOF(ISTOF + 191)
      RT_16    = STOF(ISTOF + 195)
      RT_17    = STOF(ISTOF + 196)
      RT_18    = STOF(ISTOF + 197)
      RT_19    = STOF(ISTOF + 198)
      RT_20    = STOF(ISTOF + 199)
      RT_21    = STOF(ISTOF + 200)
      PVWSpt   = STOF(ISTOF + 201)
      PCU2_P_MV = STOF(ISTOF + 205)
      PCU2_Q_MV = STOF(ISTOF + 206)
      PCU2_Q_LV = STOF(ISTOF + 207)
      PCU2_P_LV = STOF(ISTOF + 208)
      PCU2_BRK = STOI(ISTOI + 3)
      LT_1     = STOL(ISTOL + 1)
      POI_BRK  = STOI(ISTOI + 4)
      IT_1     = STOI(ISTOI + 5)
      IT_2     = STOI(ISTOI + 6)
      PCU1_Arms_LV = STOF(ISTOF + 209)
      PCU2_Arms_LV = STOF(ISTOF + 210)
      PCU2_Phs = STOF(ISTOF + 211)
      PCU1_Phs = STOF(ISTOF + 212)
      PLANT_Phs = STOF(ISTOF + 213)
      MVBRK    = STOI(ISTOI + 7)
      RT_22    = STOF(ISTOF + 214)
      IT_3     = STOI(ISTOI + 8)
      MV_Bus_Vol = STOF(ISTOF + 215)
      RT_23    = STOF(ISTOF + 216)
      Fsys     = STOF(ISTOF + 217)
      No_PCU2  = STOI(ISTOI + 9)
      IT_4     = STOI(ISTOI + 10)
      PCU1_BRK = STOI(ISTOI + 11)
      IT_5     = STOI(ISTOI + 12)
      IT_6     = STOI(ISTOI + 13)
      PVmode   = STOI(ISTOI + 14)
      PoiWLimSales = STOF(ISTOF + 248)
      PoiVArSpt = STOF(ISTOF + 249)
      PoiVolSpt = STOF(ISTOF + 250)
      BessWSpt = STOF(ISTOF + 251)
      PCU1_P_MV_AGGR = STOF(ISTOF + 252)
      PCU1_Q_MV_AGGR = STOF(ISTOF + 253)
      PCU2_P_MV_AGGR = STOF(ISTOF + 254)
      PCU2_Q_MV_AGGR = STOF(ISTOF + 255)
      Qspt_MVAr = STOF(ISTOF + 256)
      PoiPfSpt = STOF(ISTOF + 257)
      Pspt_MW  = STOF(ISTOF + 258)
      PoiWLimSales_pu = STOF(ISTOF + 259)
      PCU1_V_LV = STOF(ISTOF + 260)
      LV_Vol_base1 = STOF(ISTOF + 261)
      PCU1_V_MV_pu = STOF(ISTOF + 262)
      PCU1_V_MV = STOF(ISTOF + 263)
      PCU2_V_MV_pu = STOF(ISTOF + 264)
      PCU2_V_MV = STOF(ISTOF + 265)
      MV_Vol_base = STOF(ISTOF + 266)
      RT_24    = STOF(ISTOF + 267)
      RT_25    = STOF(ISTOF + 268)
      inf_BRK  = STOF(ISTOF + 269)
      Pcmd_PPC_to_INV_PV = STOF(ISTOF + 270)
      Qcmd_PPC_to_INV_PV = STOF(ISTOF + 271)
      Pcmd_PPC_to_INV_BESS = STOF(ISTOF + 272)
      Qcmd_PPC_to_INV_BESS = STOF(ISTOF + 273)
      Pout_INV_PV = STOF(ISTOF + 274)
      RT_26    = STOF(ISTOF + 275)
      P_Base_PV = STOF(ISTOF + 276)
      Qout_INV_PV = STOF(ISTOF + 277)
      RT_27    = STOF(ISTOF + 278)
      Pout_INV_BESS = STOF(ISTOF + 279)
      RT_28    = STOF(ISTOF + 280)
      P_Base_BESS = STOF(ISTOF + 281)
      Qout_INV_BESS = STOF(ISTOF + 282)
      RT_29    = STOF(ISTOF + 283)
      PCU2_V_LV_pu = STOF(ISTOF + 284)
      PCU2_V_LV = STOF(ISTOF + 285)
      HV_Vol_base = STOF(ISTOF + 289)
      BESSspt_MW = STOF(ISTOF + 290)
      BessWSpt_pu = STOF(ISTOF + 291)
      PoiVolSpt_pu = STOF(ISTOF + 292)
      Q_Base_PV = STOF(ISTOF + 293)
      Q_Base_BESS = STOF(ISTOF + 294)
      Iq_neg_pos_ratio = STOF(ISTOF + 295)
      Iqneg_PoC = STOF(ISTOF + 296)
      Iqpos_PoC = STOF(ISTOF + 297)
      Itot_PoC = STOF(ISTOF + 298)
      RT_30    = STOF(ISTOF + 299)
      RT_31    = STOF(ISTOF + 300)
      RT_32    = STOF(ISTOF + 301)
      Iq_PoC   = STOF(ISTOF + 302)
      Id_PoC   = STOF(ISTOF + 303)
      RT_33    = STOF(ISTOF + 304)
      RT_34    = STOF(ISTOF + 305)
      RT_35    = STOF(ISTOF + 306)
      RT_36    = STOF(ISTOF + 307)
      RT_37    = STOF(ISTOF + 308)
      RT_38    = STOF(ISTOF + 309)
      Ia_PoC   = STOF(ISTOF + 310)
      Ib_PoC   = STOF(ISTOF + 311)
      Ic_PoC   = STOF(ISTOF + 312)
      PLANT_V_HV_pu = STOF(ISTOF + 313)
      PLANT_P_HV = STOF(ISTOF + 314)
      PLANT_Q_HV = STOF(ISTOF + 315)
      Vol_POI  = STOF(ISTOF + 316)
      Hz_POI   = STOF(ISTOF + 317)
      McbStt   = STOF(ISTOF + 318)
      GcbStt   = STOF(ISTOF + 319)
      RT_39    = STOF(ISTOF + 323)
      RT_40    = STOF(ISTOF + 324)
      FRT_flag_PV = STOF(ISTOF + 325)
      FRT_flag_BESS = STOF(ISTOF + 326)
      FRT_flag_POC = STOF(ISTOF + 327)
      PLANT_Q_MV = STOF(ISTOF + 328)
      PLANT_P_MV = STOF(ISTOF + 329)
      PLANT_V_MV = STOF(ISTOF + 330)
      LV_Vol_base2 = STOF(ISTOF + 331)
      PLANT_V_HV = STOF(ISTOF + 805)
      PLANT_I_MV = STOF(ISTOF + 809)

! Array (1:3) quantities...
      DO IT_0 = 1,3
         PCU1_A_LV(IT_0) = STOF(ISTOF + 185 + IT_0)
         PCU1_A_MV(IT_0) = STOF(ISTOF + 191 + IT_0)
         PCU2_A_MV(IT_0) = STOF(ISTOF + 201 + IT_0)
         PCU2_A_LV(IT_0) = STOF(ISTOF + 285 + IT_0)
         Vrms_abc_POI(IT_0) = STOF(ISTOF + 319 + IT_0)
         V_ph(IT_0) = STOF(ISTOF + 361 + IT_0)
         Amp_MV(IT_0) = STOF(ISTOF + 805 + IT_0)
      END DO

! Array (1:4) quantities...
      DO IT_0 = 1,4
         Pv_Ms(IT_0) = STOF(ISTOF + 71 + IT_0)
         Bess_Ms(IT_0) = STOF(ISTOF + 125 + IT_0)
      END DO

! Array (1:5) quantities...
      DO IT_0 = 1,5
         DPS1_Spt(IT_0) = STOF(ISTOF + 10 + IT_0)
         DPS2_Spt(IT_0) = STOF(ISTOF + 15 + IT_0)
      END DO

! Array (1:10) quantities...
      DO IT_0 = 1,10
         Meas_Grid(IT_0) = STOF(ISTOF + 0 + IT_0)
         PCU2_Fb_SI(IT_0) = STOF(ISTOF + 115 + IT_0)
         DPS1_Fb(IT_0) = STOF(ISTOF + 163 + IT_0)
         DPS2_Fb(IT_0) = STOF(ISTOF + 173 + IT_0)
         PCU1_Fb_SI(IT_0) = STOF(ISTOF + 217 + IT_0)
         dummy_fb(IT_0) = STOF(ISTOF + 227 + IT_0)
         SC_Fb(IT_0) = STOF(ISTOF + 237 + IT_0)
         Meas_Plant(IT_0) = STOF(ISTOF + 331 + IT_0)
         PCU1_Fb(IT_0) = STOF(ISTOF + 341 + IT_0)
         PCU2_Fb(IT_0) = STOF(ISTOF + 351 + IT_0)
      END DO

! Array (1:12) quantities...
      DO IT_0 = 1,12
         RT_15(IT_0) = STOF(ISTOF + 47 + IT_0)
         Poi_Ms(IT_0) = STOF(ISTOF + 59 + IT_0)
      END DO

! Array (1:17) quantities...
      DO IT_0 = 1,17
         MEAS_PCU1(IT_0) = STOF(ISTOF + 129 + IT_0)
         MEAS_PCU2(IT_0) = STOF(ISTOF + 146 + IT_0)
      END DO

! Array (1:20) quantities...
      DO IT_0 = 1,20
         PCU2_Spt(IT_0) = STOF(ISTOF + 75 + IT_0)
         PCU1_Spt(IT_0) = STOF(ISTOF + 95 + IT_0)
      END DO

! Array (1:40) quantities...
      DO IT_0 = 1,40
         DEBUG_HyCon1(IT_0) = STOF(ISTOF + 764 + IT_0)
      END DO

! Array (1:200) quantities...
      DO IT_0 = 1,200
         DEBUG_PCU1(IT_0) = STOF(ISTOF + 364 + IT_0)
         DEBUG_PCU2(IT_0) = STOF(ISTOF + 564 + IT_0)
      END DO


!---------------------------------------
! Electrical Node Lookup 
!---------------------------------------

      NT_16 = NODE(INODE + 47)

! Array (1:3) quantities...
      DO IT_0 = 1,3
         PCU2_MVBUS(IT_0) = NODE(INODE + 12 + IT_0)
         PCU1_MVBUS(IT_0) = NODE(INODE + 18 + IT_0)
         NT_23(IT_0) = NODE(INODE + 61 + IT_0)
         NT_24(IT_0) = NODE(INODE + 64 + IT_0)
         NT_27(IT_0) = NODE(INODE + 73 + IT_0)
         NT_28(IT_0) = NODE(INODE + 76 + IT_0)
      END DO

!---------------------------------------
! Configuration of Models 
!---------------------------------------

      IF ( TIMEZERO ) THEN
         FILENAME = 'Main.dta'
         CALL EMTDC_OPENFILE
         SECTION = 'DATADSD:'
         CALL EMTDC_GOTOSECTION
      ENDIF
!---------------------------------------
! Generated code from module definition 
!---------------------------------------


! 10:[const] Real Constant 'HV Vol base'
      HV_Vol_base = 220.0

! 20:[const] Real Constant 'MV Vol base'
      MV_Vol_base = 33.0

! 30:[const] Real Constant 'Freq base'
      Fsys = 50.0

! 40:[const] Real Constant 'LV Vol base'
      LV_Vol_base1 = 0.63

! 50:[const] Real Constant 'P_Base_PV'
      P_Base_PV = 4200.0

! 60:[const] Real Constant 'LV Vol base'
      LV_Vol_base2 = 0.66

! 70:[const] Real Constant 'P_Base_BESS'
      P_Base_BESS = 4400.0

! 80:[const] Real Constant 
      RT_16 = 127947.2

! 90:[const] Real Constant 'Q_Base_PV'
      Q_Base_PV = 2520.0

! 100:[const] Real Constant 
      RT_18 = 119000.0

! 110:[const] Real Constant 'Q_Base_BESS'
      Q_Base_BESS = 2640.0

! 120:[const] Real Constant 
      RT_19 = -100000.0

! 130:[consti] Integer Constant 'HV_BRK'
      POI_BRK = 0

! 140:[const] Real Constant 
      RT_20 = 47005.0

! 150:[const] Real Constant 
      RT_21 = -47005.0

! 160:[unity] Type/Shape conversion block 
! integer -> logical
      LT_1 = E_ItoB(POI_BRK)

! 170:[const] Real Constant 
      RT_39 = 119000.0

! 180:[const] Real Constant 'Gcb'
      GcbStt = 0.0

! 190:[const] Real Constant 
      RT_40 = 1785.0

! 200:[const] Real Constant 
      RT_17 = 50.0

! 210:[InvFbDummy]  
      CALL InvFbDummyDyn(dummy_fb)


! 220:[const] Real Constant 
      RT_38 = 127.947

! 230:[var] Variable Input Slider 'Vstp_manual'
      RT_5 = CX(CXMAP(ICX+1))

! 240:[const] Real Constant 
      RT_34 = 127.947

! 250:[var] Variable Input Slider 'Qstp_manual'
      RT_4 = CX(CXMAP(ICX+2))

! 260:[var_switch] Two State Switch 'PV'
      RT_23 = CX(CXMAP(ICX+3))

! 270:[unity] Type/Shape conversion block 
! real -> nearest integer
      PVmode = NINT(RT_23)

! 280:[var] Variable Input Slider 'Pstp_manual'
      RT_2 = CX(CXMAP(ICX+4))

! 290:[unity] Type/Shape conversion block 
! real -> nearest integer
      IT_4 = NINT(RT_23)

! 300:[var] Variable Input Slider 'PFstp_manual'
      RT_3 = CX(CXMAP(ICX+5))

! 310:[consti] Integer Constant 'PCU1_BRK'
      IT_6 = 0

! 320:[inv] Interpolated Logic Inverter 
      IF (IT_6 .NE. 0) THEN
         IT_5 = 0
      ELSE
         IT_5 = 1
      ENDIF

! 330:[const] Real Constant 
      RT_9 = 0.0

! 340:[var] Variable Input Slider 'P1stp_manual'
      RT_7 = CX(CXMAP(ICX+6))

! 350:[consti] Integer Constant 'PCU2_BRK'
      PCU2_BRK = 0

! 360:[const] Real Constant 
      RT_11 = 0.0

! 370:[consti] Integer Constant 'MVBRK'
      MVBRK = 0

! 380:[var] Variable Input Slider 'Irradiance'
      RT_6 = CX(CXMAP(ICX+7))

! 390:[time-sig] Output of Simulation Time 
      RT_24 = TIME

! 400:[const] Real Constant 'inf_BRK_time'
      RT_25 = 1000.0

! 410:[consti] Integer Constant 
      No_PCU1 = 36

! 420:[const] Real Constant 
      RT_22 = 25.0

! 440:[xfmr_2w_scaled] 3 Phase 2 Winding Transformer - With Scaling! 'T1_2'




      IZo = 1.0/((0.065*33.0*33.0)/(2.0*4.2*TWO_PI*50.0*DELT))
      Scl1 = REAL(No_PCU1)-1
      IZom = Scl1*IZo

! Recall current injections from the last time step
      OLD_CCIN_a1 = STORF(NSTORF+0)
      OLD_CCIN_b1 = STORF(NSTORF+1)
      OLD_CCIN_c1 = STORF(NSTORF+2)
      OLD_CCIN_a2 = STORF(NSTORF+3)
      OLD_CCIN_b2 = STORF(NSTORF+4)
      OLD_CCIN_c2 = STORF(NSTORF+5)

! Compute the branch currents from the last time step
      IMKa_OLD =  VDC(NT_28(1),SS(1))*IZo - OLD_CCIN_a2
      IMKb_OLD =  VDC(NT_28(2),SS(1))*IZo - OLD_CCIN_b2
      IMKc_OLD =  VDC(NT_28(3),SS(1))*IZo - OLD_CCIN_c2
      IKMa_OLD =  VDC(PCU1_MVBUS(1),SS(1))*IZo - OLD_CCIN_a1
      IKMb_OLD =  VDC(PCU1_MVBUS(2),SS(1))*IZo - OLD_CCIN_b1
      IKMc_OLD =  VDC(PCU1_MVBUS(3),SS(1))*IZo - OLD_CCIN_c1


! Define the new current injections
      NEW_CCIN_a1 = VDC(NT_28(1), SS(1))*IZo + IMKa_OLD + (VDC(NT_28(1),&
     & SS(1))*IZo + IMKa_OLD)*Scl1
      NEW_CCIN_b1 = VDC(NT_28(2), SS(1))*IZo + IMKb_OLD + (VDC(NT_28(2),&
     & SS(1))*IZo + IMKb_OLD)*Scl1
      NEW_CCIN_c1 = VDC(NT_28(3), SS(1))*IZo + IMKc_OLD + (VDC(NT_28(3),&
     & SS(1))*IZo + IMKc_OLD)*Scl1
      NEW_CCIN_a2 = VDC(PCU1_MVBUS(1), SS(1))*IZo + IKMa_OLD
      NEW_CCIN_b2 = VDC(PCU1_MVBUS(2), SS(1))*IZo + IKMb_OLD
      NEW_CCIN_c2 = VDC(PCU1_MVBUS(3), SS(1))*IZo + IKMc_OLD

! Put current injections into the EMTDC main program using CCIN
      CCIN(NT_28(1), SS(1)) = CCIN(NT_28(1), SS(1)) + NEW_CCIN_a2
      CCIN(NT_28(2), SS(1)) = CCIN(NT_28(2), SS(1)) + NEW_CCIN_b2
      CCIN(NT_28(3), SS(1)) = CCIN(NT_28(3), SS(1)) + NEW_CCIN_c2
      CCIN(PCU1_MVBUS(1), SS(1)) = CCIN(PCU1_MVBUS(1), SS(1)) + NEW_CCIN&
     &_a1
      CCIN(PCU1_MVBUS(2), SS(1)) = CCIN(PCU1_MVBUS(2), SS(1)) + NEW_CCIN&
     &_b1
      CCIN(PCU1_MVBUS(3), SS(1)) = CCIN(PCU1_MVBUS(3), SS(1)) + NEW_CCIN&
     &_c1

! Ensure main program records CCIN current injections at these nodes
      IF ( TIMEZERO ) THEN
         ENABCCIN(NT_28(1), SS(1)) = .TRUE.
         ENABCCIN(NT_28(2), SS(1)) = .TRUE.
         ENABCCIN(NT_28(3), SS(1)) = .TRUE.
         ENABCCIN(PCU1_MVBUS(1), SS(1)) = .TRUE.
         ENABCCIN(PCU1_MVBUS(2), SS(1)) = .TRUE.
         ENABCCIN(PCU1_MVBUS(3), SS(1)) = .TRUE.
      ENDIF

         GGIN(NT_28(1),SS(1)) = GGIN(NT_28(1),SS(1)) + IZo
         GGIN(NT_28(2),SS(1)) = GGIN(NT_28(2),SS(1)) + IZo
         GGIN(NT_28(3),SS(1)) = GGIN(NT_28(3),SS(1)) + IZo
         GGIN(PCU1_MVBUS(1),SS(1)) = GGIN(PCU1_MVBUS(1),SS(1)) + IZo + I&
     &Zom
         GGIN(PCU1_MVBUS(2),SS(1)) = GGIN(PCU1_MVBUS(2),SS(1)) + IZo + I&
     &Zom
         GGIN(PCU1_MVBUS(3),SS(1)) = GGIN(PCU1_MVBUS(3),SS(1)) + IZo + I&
     &Zom


! Save current injections for use in the next time step to compute the branch currents
      STORF(NSTORF+0) = VDC(NT_28(1), SS(1))*IZo + IMKa_OLD
      STORF(NSTORF+1) = VDC(NT_28(2), SS(1))*IZo + IMKb_OLD
      STORF(NSTORF+2) = VDC(NT_28(3), SS(1))*IZo + IMKc_OLD
      STORF(NSTORF+3) = VDC(PCU1_MVBUS(1), SS(1))*IZo + IKMa_OLD
      STORF(NSTORF+4) = VDC(PCU1_MVBUS(2), SS(1))*IZo + IKMb_OLD
      STORF(NSTORF+5) = VDC(PCU1_MVBUS(3), SS(1))*IZo + IKMc_OLD
      NSTORF = NSTORF + 6

! 440:[xfmr_2w_scaled] 3 Phase 2 Winding Transformer - With Scaling! 'T1_2'
!  TRANSFORMER SATURATION SUBROUTINE
      IF (TIME.GT.0.1) THEN
         X_KNEE = 1.25
      ELSE
         X_KNEE = -1.25
      ENDIF
      TURNS_V = 33.0
      CALL TSAT21(NT_27(1),NT_28(2), NT_27(2),NT_28(3), NT_27(3),NT_28(1&
     &),SS(1),1.4,TURNS_V,0.2,X_KNEE,50.0,1.0,0.004, 0.0, 0)
!

! 470:[const] Real Constant 
      RT_1 = 1.03

! 480:[DPS_Dummy]  
      CALL DPS_DummyDyn(DPS1_Fb)


! 490:[breaker3] 3 Phase Breaker 'MVBRK'
      IVD1_4 = NSTORI
      NSTORI = NSTORI + 3
! Three Phase Breaker
      CALL EMTDC_BREAKER1(SS(1), (IBRCH(1)+56),0.0001,100000000.0,RTCF(N&
     &RTCF),0,NINT(1.0-REAL(MVBRK)))
      CALL EMTDC_BREAKER1(SS(1), (IBRCH(1)+57),0.0001,100000000.0,RTCF(N&
     &RTCF),0,NINT(1.0-REAL(MVBRK)))
      CALL EMTDC_BREAKER1(SS(1), (IBRCH(1)+58),0.0001,100000000.0,RTCF(N&
     &RTCF),0,NINT(1.0-REAL(MVBRK)))
!
      IVD1_1 = 2*E_BtoI(OPENBR( (IBRCH(1)+56),SS(1)))
      IVD1_2 = 2*E_BtoI(OPENBR( (IBRCH(1)+57),SS(1)))
      IVD1_3 = 2*E_BtoI(OPENBR( (IBRCH(1)+58),SS(1)))
      NRTCF = NRTCF + 1
      IF (FIRSTSTEP .OR. (STORI(IVD1_4+0) .NE. IVD1_1)) THEN
         CALL PSCAD_AGI2(ICALL_NO,943764813,IVD1_1,"BOpen1")
      ENDIF
      IF (FIRSTSTEP .OR. (STORI(IVD1_4+1) .NE. IVD1_2)) THEN
         CALL PSCAD_AGI2(ICALL_NO,943764813,IVD1_2,"BOpen2")
      ENDIF
      IF (FIRSTSTEP .OR. (STORI(IVD1_4+2) .NE. IVD1_3)) THEN
         CALL PSCAD_AGI2(ICALL_NO,943764813,IVD1_3,"BOpen3")
      ENDIF
      STORI(IVD1_4+0) = 2*E_BtoI(OPENBR( (IBRCH(1)+56),SS(1)))
      STORI(IVD1_4+1) = 2*E_BtoI(OPENBR( (IBRCH(1)+57),SS(1)))
      STORI(IVD1_4+2) = 2*E_BtoI(OPENBR( (IBRCH(1)+58),SS(1)))

! 520:[breaker3] 3 Phase Breaker 'POI_BRK'
      IVD1_4 = NSTORI
      NSTORI = NSTORI + 3
! Three Phase Breaker
      CALL EMTDC_BREAKER1(SS(1), (IBRCH(1)+25),0.0001,100000000.0,RTCF(N&
     &RTCF),0,NINT(1.0-REAL(POI_BRK)))
      CALL EMTDC_BREAKER1(SS(1), (IBRCH(1)+26),0.0001,100000000.0,RTCF(N&
     &RTCF),0,NINT(1.0-REAL(POI_BRK)))
      CALL EMTDC_BREAKER1(SS(1), (IBRCH(1)+27),0.0001,100000000.0,RTCF(N&
     &RTCF),0,NINT(1.0-REAL(POI_BRK)))
!
      IVD1_1 = 2*E_BtoI(OPENBR( (IBRCH(1)+25),SS(1)))
      IVD1_2 = 2*E_BtoI(OPENBR( (IBRCH(1)+26),SS(1)))
      IVD1_3 = 2*E_BtoI(OPENBR( (IBRCH(1)+27),SS(1)))
      NRTCF = NRTCF + 1
      IF (FIRSTSTEP .OR. (STORI(IVD1_4+0) .NE. IVD1_1)) THEN
         CALL PSCAD_AGI2(ICALL_NO,715073575,IVD1_1,"BOpen1")
      ENDIF
      IF (FIRSTSTEP .OR. (STORI(IVD1_4+1) .NE. IVD1_2)) THEN
         CALL PSCAD_AGI2(ICALL_NO,715073575,IVD1_2,"BOpen2")
      ENDIF
      IF (FIRSTSTEP .OR. (STORI(IVD1_4+2) .NE. IVD1_3)) THEN
         CALL PSCAD_AGI2(ICALL_NO,715073575,IVD1_3,"BOpen3")
      ENDIF
      STORI(IVD1_4+0) = 2*E_BtoI(OPENBR( (IBRCH(1)+25),SS(1)))
      STORI(IVD1_4+1) = 2*E_BtoI(OPENBR( (IBRCH(1)+26),SS(1)))
      STORI(IVD1_4+2) = 2*E_BtoI(OPENBR( (IBRCH(1)+27),SS(1)))

! 540:[consti] Integer Constant 
      No_PCU2 = 40

! 570:[GridSource]  'GridSource_1'
      CALL GridSourceDyn(0, 0.0, 0.0, 220.0, 0.0, 0.0, 0.999776463133, 5&
     &0.0, 3.0, 251.5, 0, 0.0, 0.0, 50.0, 50.0, 51.0, 51.0, 51.5, 51.5, &
     &50.0, 50.0, 0.0, 5.0, 5.5, 1, 10.0, 10.5, 15.0, 15.5, 25.0, 0.0, 0&
     &.0, 0.0, 0, 0, 8, 1.02, 1, 1.02, 0.918, 0.918, 1.02, 1.02, 0.0, 0.&
     &0, 0.0, 0.0, 0.0, 5.0, 5.001, 10.0, 10.001, 15.0, 0.0, 0.0, 0.0, 0&
     &.0, 1, 0, 6, 0.1, 10.0, 0, 0.0, 5.0, 0.0, 1, 0.0, 90.0, 90.0, 0.0,&
     & 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 5.0, 5.01, 10.0, 10.01, 15.0, 15.01&
     &, 0.0, 0.0, 0.0, 6)


! 580:[xfmr_2w_scaled] 3 Phase 2 Winding Transformer - With Scaling! 'T1_2'




      IZo = 1.0/((0.065*33.825*33.825)/(2.0*4.4*TWO_PI*50.0*DELT))
      Scl1 = REAL(No_PCU2)-1
      IZom = Scl1*IZo

! Recall current injections from the last time step
      OLD_CCIN_a1 = STORF(NSTORF+0)
      OLD_CCIN_b1 = STORF(NSTORF+1)
      OLD_CCIN_c1 = STORF(NSTORF+2)
      OLD_CCIN_a2 = STORF(NSTORF+3)
      OLD_CCIN_b2 = STORF(NSTORF+4)
      OLD_CCIN_c2 = STORF(NSTORF+5)

! Compute the branch currents from the last time step
      IMKa_OLD =  VDC(NT_24(1),SS(1))*IZo - OLD_CCIN_a2
      IMKb_OLD =  VDC(NT_24(2),SS(1))*IZo - OLD_CCIN_b2
      IMKc_OLD =  VDC(NT_24(3),SS(1))*IZo - OLD_CCIN_c2
      IKMa_OLD =  VDC(PCU2_MVBUS(1),SS(1))*IZo - OLD_CCIN_a1
      IKMb_OLD =  VDC(PCU2_MVBUS(2),SS(1))*IZo - OLD_CCIN_b1
      IKMc_OLD =  VDC(PCU2_MVBUS(3),SS(1))*IZo - OLD_CCIN_c1


! Define the new current injections
      NEW_CCIN_a1 = VDC(NT_24(1), SS(1))*IZo + IMKa_OLD + (VDC(NT_24(1),&
     & SS(1))*IZo + IMKa_OLD)*Scl1
      NEW_CCIN_b1 = VDC(NT_24(2), SS(1))*IZo + IMKb_OLD + (VDC(NT_24(2),&
     & SS(1))*IZo + IMKb_OLD)*Scl1
      NEW_CCIN_c1 = VDC(NT_24(3), SS(1))*IZo + IMKc_OLD + (VDC(NT_24(3),&
     & SS(1))*IZo + IMKc_OLD)*Scl1
      NEW_CCIN_a2 = VDC(PCU2_MVBUS(1), SS(1))*IZo + IKMa_OLD
      NEW_CCIN_b2 = VDC(PCU2_MVBUS(2), SS(1))*IZo + IKMb_OLD
      NEW_CCIN_c2 = VDC(PCU2_MVBUS(3), SS(1))*IZo + IKMc_OLD

! Put current injections into the EMTDC main program using CCIN
      CCIN(NT_24(1), SS(1)) = CCIN(NT_24(1), SS(1)) + NEW_CCIN_a2
      CCIN(NT_24(2), SS(1)) = CCIN(NT_24(2), SS(1)) + NEW_CCIN_b2
      CCIN(NT_24(3), SS(1)) = CCIN(NT_24(3), SS(1)) + NEW_CCIN_c2
      CCIN(PCU2_MVBUS(1), SS(1)) = CCIN(PCU2_MVBUS(1), SS(1)) + NEW_CCIN&
     &_a1
      CCIN(PCU2_MVBUS(2), SS(1)) = CCIN(PCU2_MVBUS(2), SS(1)) + NEW_CCIN&
     &_b1
      CCIN(PCU2_MVBUS(3), SS(1)) = CCIN(PCU2_MVBUS(3), SS(1)) + NEW_CCIN&
     &_c1

! Ensure main program records CCIN current injections at these nodes
      IF ( TIMEZERO ) THEN
         ENABCCIN(NT_24(1), SS(1)) = .TRUE.
         ENABCCIN(NT_24(2), SS(1)) = .TRUE.
         ENABCCIN(NT_24(3), SS(1)) = .TRUE.
         ENABCCIN(PCU2_MVBUS(1), SS(1)) = .TRUE.
         ENABCCIN(PCU2_MVBUS(2), SS(1)) = .TRUE.
         ENABCCIN(PCU2_MVBUS(3), SS(1)) = .TRUE.
      ENDIF

         GGIN(NT_24(1),SS(1)) = GGIN(NT_24(1),SS(1)) + IZo
         GGIN(NT_24(2),SS(1)) = GGIN(NT_24(2),SS(1)) + IZo
         GGIN(NT_24(3),SS(1)) = GGIN(NT_24(3),SS(1)) + IZo
         GGIN(PCU2_MVBUS(1),SS(1)) = GGIN(PCU2_MVBUS(1),SS(1)) + IZo + I&
     &Zom
         GGIN(PCU2_MVBUS(2),SS(1)) = GGIN(PCU2_MVBUS(2),SS(1)) + IZo + I&
     &Zom
         GGIN(PCU2_MVBUS(3),SS(1)) = GGIN(PCU2_MVBUS(3),SS(1)) + IZo + I&
     &Zom


! Save current injections for use in the next time step to compute the branch currents
      STORF(NSTORF+0) = VDC(NT_24(1), SS(1))*IZo + IMKa_OLD
      STORF(NSTORF+1) = VDC(NT_24(2), SS(1))*IZo + IMKb_OLD
      STORF(NSTORF+2) = VDC(NT_24(3), SS(1))*IZo + IMKc_OLD
      STORF(NSTORF+3) = VDC(PCU2_MVBUS(1), SS(1))*IZo + IKMa_OLD
      STORF(NSTORF+4) = VDC(PCU2_MVBUS(2), SS(1))*IZo + IKMb_OLD
      STORF(NSTORF+5) = VDC(PCU2_MVBUS(3), SS(1))*IZo + IKMc_OLD
      NSTORF = NSTORF + 6

! 580:[xfmr_2w_scaled] 3 Phase 2 Winding Transformer - With Scaling! 'T1_2'
!  TRANSFORMER SATURATION SUBROUTINE
      IF (TIME.GT.0.1) THEN
         X_KNEE = 1.25
      ELSE
         X_KNEE = -1.25
      ENDIF
      TURNS_V = 33.825
      CALL TSAT21(NT_23(1),NT_24(2), NT_23(2),NT_24(3), NT_23(3),NT_24(1&
     &),SS(1),1.46666666667,TURNS_V,0.2,X_KNEE,50.0,1.0,0.004, 0.0, 0)
!

! 620:[breaker3] 3 Phase Breaker 'PCU2_BRK'
      IVD1_4 = NSTORI
      NSTORI = NSTORI + 3
! Three Phase Breaker
      CALL EMTDC_BREAKER1(SS(1), (IBRCH(1)+16),0.0001,100000000.0,RTCF(N&
     &RTCF),0,NINT(1.0-REAL(PCU2_BRK)))
      CALL EMTDC_BREAKER1(SS(1), (IBRCH(1)+17),0.0001,100000000.0,RTCF(N&
     &RTCF),0,NINT(1.0-REAL(PCU2_BRK)))
      CALL EMTDC_BREAKER1(SS(1), (IBRCH(1)+18),0.0001,100000000.0,RTCF(N&
     &RTCF),0,NINT(1.0-REAL(PCU2_BRK)))
!
      IVD1_1 = 2*E_BtoI(OPENBR( (IBRCH(1)+16),SS(1)))
      IVD1_2 = 2*E_BtoI(OPENBR( (IBRCH(1)+17),SS(1)))
      IVD1_3 = 2*E_BtoI(OPENBR( (IBRCH(1)+18),SS(1)))
      NRTCF = NRTCF + 1
      IF (FIRSTSTEP .OR. (STORI(IVD1_4+0) .NE. IVD1_1)) THEN
         CALL PSCAD_AGI2(ICALL_NO,1701648050,IVD1_1,"BOpen1")
      ENDIF
      IF (FIRSTSTEP .OR. (STORI(IVD1_4+1) .NE. IVD1_2)) THEN
         CALL PSCAD_AGI2(ICALL_NO,1701648050,IVD1_2,"BOpen2")
      ENDIF
      IF (FIRSTSTEP .OR. (STORI(IVD1_4+2) .NE. IVD1_3)) THEN
         CALL PSCAD_AGI2(ICALL_NO,1701648050,IVD1_3,"BOpen3")
      ENDIF
      STORI(IVD1_4+0) = 2*E_BtoI(OPENBR( (IBRCH(1)+16),SS(1)))
      STORI(IVD1_4+1) = 2*E_BtoI(OPENBR( (IBRCH(1)+17),SS(1)))
      STORI(IVD1_4+2) = 2*E_BtoI(OPENBR( (IBRCH(1)+18),SS(1)))

! 640:[DPS_Dummy]  
      CALL DPS_DummyDyn(DPS2_Fb)


! 660:[FaultBlock]  'FaultBlock_1'
      CALL FaultBlockDyn(0.0, 0.0, 0, 0.0, 0.0, 0.0, 0, 0.0, 0.0, 0.0, 0&
     &, 0.0, 0.0, 0.0, 0, 0.0, 0.0, 0.0, 0, 0.0, 0.0, 0.0, 0, 0.0, 0.0, &
     &0.0, 0, 0.0, 0.0, 0.0, 0, 0.0, 0.0, 0.0, 0, 0.0, 0.0, 0.0, 0, 0.0,&
     & 0.0, 0.0, 0, 0.0, 0.0, 0.0, 0, 0.0, 0.0, 0.0, 0, 0.0, 30.0, 0.43,&
     & 0, 18.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0&
     &.0, 0.0, 3.0, 1, 1, 5.0, 0.43, 0, 18.0, 3.0, 50.0, 0.0, 0.0, 0.0, &
     &0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0)


! 670:[breaker3] 3 Phase Breaker 'PCU2_BRK'
      IVD1_4 = NSTORI
      NSTORI = NSTORI + 3
! Three Phase Breaker
      CALL EMTDC_BREAKER1(SS(1), (IBRCH(1)+28),0.0001,100000000.0,RTCF(N&
     &RTCF),0,NINT(1.0-REAL(PCU2_BRK)))
      CALL EMTDC_BREAKER1(SS(1), (IBRCH(1)+29),0.0001,100000000.0,RTCF(N&
     &RTCF),0,NINT(1.0-REAL(PCU2_BRK)))
      CALL EMTDC_BREAKER1(SS(1), (IBRCH(1)+30),0.0001,100000000.0,RTCF(N&
     &RTCF),0,NINT(1.0-REAL(PCU2_BRK)))
!
      IVD1_1 = 2*E_BtoI(OPENBR( (IBRCH(1)+28),SS(1)))
      IVD1_2 = 2*E_BtoI(OPENBR( (IBRCH(1)+29),SS(1)))
      IVD1_3 = 2*E_BtoI(OPENBR( (IBRCH(1)+30),SS(1)))
      NRTCF = NRTCF + 1
      IF (FIRSTSTEP .OR. (STORI(IVD1_4+0) .NE. IVD1_1)) THEN
         CALL PSCAD_AGI2(ICALL_NO,151804995,IVD1_1,"BOpen1")
      ENDIF
      IF (FIRSTSTEP .OR. (STORI(IVD1_4+1) .NE. IVD1_2)) THEN
         CALL PSCAD_AGI2(ICALL_NO,151804995,IVD1_2,"BOpen2")
      ENDIF
      IF (FIRSTSTEP .OR. (STORI(IVD1_4+2) .NE. IVD1_3)) THEN
         CALL PSCAD_AGI2(ICALL_NO,151804995,IVD1_3,"BOpen3")
      ENDIF
      STORI(IVD1_4+0) = 2*E_BtoI(OPENBR( (IBRCH(1)+28),SS(1)))
      STORI(IVD1_4+1) = 2*E_BtoI(OPENBR( (IBRCH(1)+29),SS(1)))
      STORI(IVD1_4+2) = 2*E_BtoI(OPENBR( (IBRCH(1)+30),SS(1)))

! 700:[inv] Interpolated Logic Inverter 
      IF (E_BtoI(LT_1) .NE. 0) THEN
         IT_1 = 0
      ELSE
         IT_1 = 1
      ENDIF

! 710:[bin_delay] Timed ON/OFF Logic Transition 
!
      RVD2_1(1) = REAL(IT_1)
      RVD2_1(2) = 0.0
!
      CALL EMTDC_XTTRANS(0,0.05,0.05,RVD2_1,RVD2_2)
!
      IT_2 = NINT(RVD2_2(1))

! 720:[unity] Type/Shape conversion block 
! logical -> real
      McbStt = E_BtoR(E_ItoB(IT_2))

! 730:[sumjct] Summing/Differencing Junctions 
      PVWSpt = + RT_39 + RT_40

! 770:[SymmetricalComponentsCalc_1_1]  'SymmetricalComponentsCalc_1_1'
      CALL SymmetricalComponentsCalc_1_1Dyn(Iqneg_PoC, Iqpos_PoC, Iqzero&
     &_PoC, RT_12, RT_13, RT_14, Ic_PoC, Ib_PoC, Ia_PoC, 50.0)


! 780:[SymmetricalComponentsCalc]  'SymmetricalComponentsCalc_1'
      CALL SymmetricalComponentsCalcDyn(Vneg_PoC, Vpos_PoC, Vzero_PoC, V&
     &ab_PPC, Vbc_PPC, Vca_PPC, 50.0)


! 790:[div] Divider 
      IF (ABS(RT_38) .LT. 1.0E-100) THEN
         IF (RT_38 .LT. 0.0)  THEN
            RT_36 = -1.0E100 * PLANT_P_HV
         ELSE
            RT_36 =  1.0E100 * PLANT_P_HV
         ENDIF
      ELSE
         RT_36 = PLANT_P_HV / RT_38
      ENDIF

! 800:[div] Divider 
      IF (ABS(RT_34) .LT. 1.0E-100) THEN
         IF (RT_34 .LT. 0.0)  THEN
            RT_33 = -1.0E100 * PLANT_Q_HV
         ELSE
            RT_33 =  1.0E100 * PLANT_Q_HV
         ENDIF
      ELSE
         RT_33 = PLANT_Q_HV / RT_34
      ENDIF

! 810:[SymmetricalComponentsCalc]  'SymmetricalComponentsCalc_1'
      CALL SymmetricalComponentsCalcDyn(Ineg_PoC, Ipos_PoC, Izero_PoC, I&
     &c_PoC, Ib_PoC, Ia_PoC, 50.0)


! 820:[setpointProfiles]  'setpointProfiles_1'
      CALL setpointProfilesDyn(PoiWLimSales_pu, PoiPfSpt, PoiVArSpt_pu, &
     &PoiVolSpt_pu, RT_2, RT_3, RT_4, RT_5, RT_6, PCU1_Irr, BessWSpt_pu,&
     & RT_7, RT_8, RT_9, RT_10, RT_11, 0.0, 1.02, 1.02, 1.0, 1.05, 1.05,&
     & 1.02, 1.02, 0.0, 0.0, 0.0, 4.0, 4.001, 2, 10.0, 10.001, 100.0, 0.&
     &0, 0.0, 0.0, 0.0, 0.0, 6, 1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, &
     &0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 2, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0&
     &, 0.0, 10, 1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, &
     &0.0, 0.0, 0.0, 2, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 10, 1.0,&
     & 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, &
     &2, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 10, 1.0, 0.0, 0.0, 0.0,&
     & 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 2, 0.0, 0.0, 0.&
     &0, 0.0, 0.0, 0.0, 0.0, 0.0, 10, 1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0,&
     & 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 2, 0.0, 0.0, 0.0, 0.0, 0.0, 0.&
     &0, 0.0, 0.0, 10, 1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0,&
     & 0.0, 0.0, 0.0, 0.0, 2, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 10&
     &, 1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,&
     & 0.0, 2, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0, 1000.0)


! 830:[gain] Gain Block 
!  Gain
      PoiVArSpt = 119000.0 * PoiVArSpt_pu

! 840:[gain] Gain Block 
!  Gain
      PoiWLimSales = 119000.0 * PoiWLimSales_pu

! 850:[logic_mult] Multiple Input Logic Gate 
!
! Multi input AND gate
!
      IF ( (IT_4 .NE. 0) .AND. (IT_5 .NE. 0) ) THEN
        PCU1_BRK = 0
      ELSE
        PCU1_BRK = 1
      ENDIF

! 860:[gain] Gain Block 
!  Gain
      BessWSpt = 119000.0 * BessWSpt_pu

! 870:[compar] Two Input Comparator 
!
      CALL EMTDC_X2COMP(0,0,RT_24,RT_25,1.0,0.0,0.0,RVD2_1)
      inf_BRK = RVD2_1(1)

! 880:[TapCtrl_1]  
      CALL TapCtrl_1Dyn(Tap_position, maintap, PLANT_V_MV, RT_1, 1, 220.&
     &0, 0.0125, 0.64, 8, 8, 10, 0.01, 30.0, 30.0, 30.0, 1.0, 3.0, 3.0, &
     &1)


! 890:[gain] Gain Block 
!  Gain
      PoiVolSpt = 220000.0 * PoiVolSpt_pu

! 900:[datamerge] Merges data signals into an array 
      RT_15(1) = RT_16
      RT_15(2) = RT_18
      RT_15(3) = PoiWLimSales
      RT_15(4) = RT_19
      RT_15(5) = RT_20
      RT_15(6) = RT_21
      RT_15(7) = BessWSpt
      RT_15(8) = PVWSpt
      RT_15(9) = PoiVArSpt
      RT_15(10) = PoiPfSpt
      RT_15(11) = PoiVolSpt
      RT_15(12) = RT_17

! 910:[Aggr_Fb_Scaled]  
      CALL Aggr_Fb_ScaledDyn(PCU2_Fb_SI, No_PCU2, PCU2_Fb)


! 920:[select] Two Input Selector 
      IF (PVmode .EQ. RTCI(NRTCI)) THEN
         SC_Fb = PCU1_Fb_SI
      ELSE
         SC_Fb = dummy_fb
      ENDIF
      NRTCI = NRTCI + 1
!

! 930:[DDSRF_PLL_1]  
      CALL DDSRF_PLL_1Dyn(220.0, 50.0, Meas_Plant, Meas_Grid)


! 940:[datatap] Scalar/Array Tap 
      Vrms_abc_POI = Meas_Plant(6 : 8)

! 950:[datatap] Scalar/Array Tap 
      Hz_POI = Meas_Plant(2)

! 960:[datatap] Scalar/Array Tap 
      Vol_POI = Meas_Plant(1)

! 970:[datamerge] Merges data signals into an array 
      Bess_Ms(1) = PCU2_P_MV_AGGR
      Bess_Ms(2) = PCU2_Q_MV_AGGR
      Bess_Ms(3) = PCU2_V_MV
      Bess_Ms(4) = Hz_POI

! 980:[datamerge] Merges data signals into an array 
      Pv_Ms(1) = PCU1_P_MV_AGGR
      Pv_Ms(2) = PCU1_Q_MV_AGGR
      Pv_Ms(3) = PCU1_V_MV
      Pv_Ms(4) = Hz_POI

! 990:[datamerge] Merges data signals into an array 
      Poi_Ms(1) = PLANT_P_HV
      Poi_Ms(2) = PLANT_Q_HV
      Poi_Ms(3) = Vol_POI
      Poi_Ms(4) = Hz_POI
      Poi_Ms(5) = McbStt
      Poi_Ms(6) = GcbStt
      Poi_Ms(7 : 9) = Vrms_abc_POI
      Poi_Ms(10 : 12) = Vrms_abc_POI

! 1000:[HyCtl]  'HyCon1'
      CALL HyCtlDyn(RT_15, Poi_Ms, Pv_Ms, PCU2_Spt, PCU1_Spt, PCU2_Fb_SI&
     &, SC_Fb, Bess_Ms, dummy_fb, DEBUG_HyCon1, dummy_fb, 1, 0, 50.0, 30&
     &00.0, 21521, 0.04, 1.2, 0.0, 0.0, 0.0, 0.0)


! 1010:[SCxxxx] SMA  SC xxxx 
      CALL SCxxxxDyn(PCU1_Spt, PCU1_Fb, 51, 16641, 9, 0, 3000, DPS1_Spt,&
     & DPS1_Fb, DEBUG_PCU1, MEAS_PCU1)


! 1020:[Aggr_Fb_Scaled]  
      CALL Aggr_Fb_ScaledDyn(PCU1_Fb_SI, No_PCU1, PCU1_Fb)


! 1030:[SCxxxx] SMA  SC xxxx 
      CALL SCxxxxDyn(PCU2_Spt, PCU2_Fb, 57, 82433, 9, 0, 3000, DPS2_Spt,&
     & DPS2_Fb, DEBUG_PCU2, MEAS_PCU2)


! 1040:[div] Divider 
      IF (ABS(HV_Vol_base) .LT. 1.0E-100) THEN
         IF (HV_Vol_base .LT. 0.0)  THEN
            PLANT_V_HV_pu = -1.0E100 * Vol_POI
         ELSE
            PLANT_V_HV_pu =  1.0E100 * Vol_POI
         ENDIF
      ELSE
         PLANT_V_HV_pu = Vol_POI / HV_Vol_base
      ENDIF

! 1050:[hardlimit] Hard Limiter 
!  Hard_Limit
      IF (0.001 .LE. 2.0) THEN
        RT_37 = LIMIT(0.001, 2.0, PLANT_V_HV_pu)
      ELSE
        RT_37 = PLANT_V_HV_pu
        IF (STORL(NSTORL) .EQV. .FALSE.) THEN
          CALL EMTDC_WARN(ICALL_NO,2095370447,1,"Lower limit is more tha&
     &n the upper limit, limits not enforced.")
          STORL(NSTORL) = .TRUE.
        ENDIF
      ENDIF
      NSTORL = NSTORL + 1
!

! 1060:[div] Divider 
      IF (ABS(RT_37) .LT. 1.0E-100) THEN
         IF (RT_37 .LT. 0.0)  THEN
            Id_PoC = -1.0E100 * RT_36
         ELSE
            Id_PoC =  1.0E100 * RT_36
         ENDIF
      ELSE
         Id_PoC = RT_36 / RT_37
      ENDIF

! 1070:[square] Square 
      RT_30 = Id_PoC * Id_PoC

! 1080:[hardlimit] Hard Limiter 
!  Hard_Limit
      IF (0.001 .LE. 2.0) THEN
        RT_35 = LIMIT(0.001, 2.0, PLANT_V_HV_pu)
      ELSE
        RT_35 = PLANT_V_HV_pu
        IF (STORL(NSTORL) .EQV. .FALSE.) THEN
          CALL EMTDC_WARN(ICALL_NO,389639178,1,"Lower limit is more than&
     & the upper limit, limits not enforced.")
          STORL(NSTORL) = .TRUE.
        ENDIF
      ENDIF
      NSTORL = NSTORL + 1
!

! 1090:[div] Divider 
      IF (ABS(RT_35) .LT. 1.0E-100) THEN
         IF (RT_35 .LT. 0.0)  THEN
            Iq_PoC = -1.0E100 * RT_33
         ELSE
            Iq_PoC =  1.0E100 * RT_33
         ENDIF
      ELSE
         Iq_PoC = RT_33 / RT_35
      ENDIF

! 1100:[square] Square 
      RT_31 = Iq_PoC * Iq_PoC

! 1110:[sumjct] Summing/Differencing Junctions 
      RT_32 = + RT_30 + RT_31

! 1120:[datatap] Scalar/Array Tap 
      RT_29 = PCU2_Fb(6)

! 1130:[sqrt] Square Root 
      LVD1_1 = STORL(NSTORL)
      IF (RT_32 .LT. 0.0) THEN
        Itot_PoC = 0.0
        IF (.NOT. LVD1_1) THEN
          CALL EMTDC_MESSAGE(ICALL_NO,726772474,1,2,"A negative value is&
     & detected as an input to the Square Root function. ")
          CALL EMTDC_MESSAGE(ICALL_NO,726772474,1,-1,"Input is treated a&
     &s 0.0.")
          STORL(NSTORL) = .TRUE.
        ENDIF
      ELSE
         Itot_PoC = SQRT(RT_32)
      ENDIF
      NSTORL = NSTORL + 1

! 1140:[datatap] Scalar/Array Tap 
      RT_27 = PCU1_Fb(6)

! 1150:[datatap] Scalar/Array Tap 
      RT_28 = PCU2_Fb(5)

! 1160:[datatap] Scalar/Array Tap 
      RT_26 = PCU1_Fb(5)

! 1170:[datatap] Scalar/Array Tap 
      FRT_flag_POC = DEBUG_HyCon1(18)

! 1180:[datatap] Scalar/Array Tap 
      FRT_flag_BESS = DEBUG_PCU2(1)

! 1190:[datatap] Scalar/Array Tap 
      FRT_flag_PV = DEBUG_PCU1(1)

! 1200:[gain] Gain Block 
!  Gain
      BESSspt_MW = 119.0 * BessWSpt_pu

! 1210:[gain] Gain Block 
!  Gain
      Qspt_MVAr = 119.0 * PoiVArSpt_pu

! 1220:[gain] Gain Block 
!  Gain
      Pspt_MW = 119.0 * PoiWLimSales_pu

! 1230:[div] Divider 
      IF (ABS(Iqpos_PoC) .LT. 1.0E-100) THEN
         IF (Iqpos_PoC .LT. 0.0)  THEN
            Iq_neg_pos_ratio = -1.0E100 * Iqneg_PoC
         ELSE
            Iq_neg_pos_ratio =  1.0E100 * Iqneg_PoC
         ENDIF
      ELSE
         Iq_neg_pos_ratio = Iqneg_PoC / Iqpos_PoC
      ENDIF

! 1240:[datatap] Scalar/Array Tap 
      Qcmd_PPC_to_INV_BESS = PCU2_Spt(2)

! 1250:[datatap] Scalar/Array Tap 
      Pcmd_PPC_to_INV_BESS = PCU2_Spt(1)

! 1260:[datatap] Scalar/Array Tap 
      Qcmd_PPC_to_INV_PV = PCU1_Spt(2)

! 1270:[datatap] Scalar/Array Tap 
      Pcmd_PPC_to_INV_PV = PCU1_Spt(1)

! 1280:[breaker3] 3 Phase Breaker 'PCU1_BRK'
      IVD1_4 = NSTORI
      NSTORI = NSTORI + 3
! Three Phase Breaker
      CALL EMTDC_BREAKER1(SS(1), (IBRCH(1)+19),0.0001,100000000.0,RTCF(N&
     &RTCF),0,NINT(1.0-REAL(PCU1_BRK)))
      CALL EMTDC_BREAKER1(SS(1), (IBRCH(1)+20),0.0001,100000000.0,RTCF(N&
     &RTCF),0,NINT(1.0-REAL(PCU1_BRK)))
      CALL EMTDC_BREAKER1(SS(1), (IBRCH(1)+21),0.0001,100000000.0,RTCF(N&
     &RTCF),0,NINT(1.0-REAL(PCU1_BRK)))
!
      IVD1_1 = 2*E_BtoI(OPENBR( (IBRCH(1)+19),SS(1)))
      IVD1_2 = 2*E_BtoI(OPENBR( (IBRCH(1)+20),SS(1)))
      IVD1_3 = 2*E_BtoI(OPENBR( (IBRCH(1)+21),SS(1)))
      NRTCF = NRTCF + 1
      IF (FIRSTSTEP .OR. (STORI(IVD1_4+0) .NE. IVD1_1)) THEN
         CALL PSCAD_AGI2(ICALL_NO,1365129883,IVD1_1,"BOpen1")
      ENDIF
      IF (FIRSTSTEP .OR. (STORI(IVD1_4+1) .NE. IVD1_2)) THEN
         CALL PSCAD_AGI2(ICALL_NO,1365129883,IVD1_2,"BOpen2")
      ENDIF
      IF (FIRSTSTEP .OR. (STORI(IVD1_4+2) .NE. IVD1_3)) THEN
         CALL PSCAD_AGI2(ICALL_NO,1365129883,IVD1_3,"BOpen3")
      ENDIF
      STORI(IVD1_4+0) = 2*E_BtoI(OPENBR( (IBRCH(1)+19),SS(1)))
      STORI(IVD1_4+1) = 2*E_BtoI(OPENBR( (IBRCH(1)+20),SS(1)))
      STORI(IVD1_4+2) = 2*E_BtoI(OPENBR( (IBRCH(1)+21),SS(1)))

! 1300:[breaker3] 3 Phase Breaker 'inf_BRK'
      IVD1_4 = NSTORI
      NSTORI = NSTORI + 3
! Three Phase Breaker
      CALL EMTDC_BREAKER1(SS(1), (IBRCH(1)+113),0.0001,100000000.0,RTCF(&
     &NRTCF),0,NINT(1.0-inf_BRK))
      CALL EMTDC_BREAKER1(SS(1), (IBRCH(1)+114),0.0001,100000000.0,RTCF(&
     &NRTCF),0,NINT(1.0-inf_BRK))
      CALL EMTDC_BREAKER1(SS(1), (IBRCH(1)+115),0.0001,100000000.0,RTCF(&
     &NRTCF),0,NINT(1.0-inf_BRK))
!
      IVD1_1 = 2*E_BtoI(OPENBR( (IBRCH(1)+113),SS(1)))
      IVD1_2 = 2*E_BtoI(OPENBR( (IBRCH(1)+114),SS(1)))
      IVD1_3 = 2*E_BtoI(OPENBR( (IBRCH(1)+115),SS(1)))
      NRTCF = NRTCF + 1
      IF (FIRSTSTEP .OR. (STORI(IVD1_4+0) .NE. IVD1_1)) THEN
         CALL PSCAD_AGI2(ICALL_NO,371043801,IVD1_1,"BOpen1")
      ENDIF
      IF (FIRSTSTEP .OR. (STORI(IVD1_4+1) .NE. IVD1_2)) THEN
         CALL PSCAD_AGI2(ICALL_NO,371043801,IVD1_2,"BOpen2")
      ENDIF
      IF (FIRSTSTEP .OR. (STORI(IVD1_4+2) .NE. IVD1_3)) THEN
         CALL PSCAD_AGI2(ICALL_NO,371043801,IVD1_3,"BOpen3")
      ENDIF
      STORI(IVD1_4+0) = 2*E_BtoI(OPENBR( (IBRCH(1)+113),SS(1)))
      STORI(IVD1_4+1) = 2*E_BtoI(OPENBR( (IBRCH(1)+114),SS(1)))
      STORI(IVD1_4+2) = 2*E_BtoI(OPENBR( (IBRCH(1)+115),SS(1)))

! 1310:[xfmr-3p2w] 3 Phase 2 Winding Transformer 'T2'
!  TRANSFORMER SATURATION SUBROUTINE
      IVD1_1 = NEXC
      CALL TSAT1_EXE( (IBRCH(1)+50), (IBRCH(1)+51), (IBRCH(1)+52),SS(1),&
     &maintap,0)
      CALL TRTAP5((IXFMR + 7), 1, SS(1), maintap)
      CALL TRTAP5((IXFMR + 8), 1, SS(1), maintap)
      CALL TRTAP5((IXFMR + 9), 1, SS(1), maintap)

! 1320:[pgb] Output Channel 'Tap_position'

      PGB(IPGB+1) = REAL(Tap_position)

! 1330:[breaker3] 3 Phase Breaker 'PCU1_BRK'
      IVD1_4 = NSTORI
      NSTORI = NSTORI + 3
! Three Phase Breaker
      CALL EMTDC_BREAKER1(SS(1), (IBRCH(1)+7),0.0001,100000000.0,RTCF(NR&
     &TCF),0,NINT(1.0-REAL(PCU1_BRK)))
      CALL EMTDC_BREAKER1(SS(1), (IBRCH(1)+8),0.0001,100000000.0,RTCF(NR&
     &TCF),0,NINT(1.0-REAL(PCU1_BRK)))
      CALL EMTDC_BREAKER1(SS(1), (IBRCH(1)+9),0.0001,100000000.0,RTCF(NR&
     &TCF),0,NINT(1.0-REAL(PCU1_BRK)))
!
      IVD1_1 = 2*E_BtoI(OPENBR( (IBRCH(1)+7),SS(1)))
      IVD1_2 = 2*E_BtoI(OPENBR( (IBRCH(1)+8),SS(1)))
      IVD1_3 = 2*E_BtoI(OPENBR( (IBRCH(1)+9),SS(1)))
      NRTCF = NRTCF + 1
      IF (FIRSTSTEP .OR. (STORI(IVD1_4+0) .NE. IVD1_1)) THEN
         CALL PSCAD_AGI2(ICALL_NO,2042303879,IVD1_1,"BOpen1")
      ENDIF
      IF (FIRSTSTEP .OR. (STORI(IVD1_4+1) .NE. IVD1_2)) THEN
         CALL PSCAD_AGI2(ICALL_NO,2042303879,IVD1_2,"BOpen2")
      ENDIF
      IF (FIRSTSTEP .OR. (STORI(IVD1_4+2) .NE. IVD1_3)) THEN
         CALL PSCAD_AGI2(ICALL_NO,2042303879,IVD1_3,"BOpen3")
      ENDIF
      STORI(IVD1_4+0) = 2*E_BtoI(OPENBR( (IBRCH(1)+7),SS(1)))
      STORI(IVD1_4+1) = 2*E_BtoI(OPENBR( (IBRCH(1)+8),SS(1)))
      STORI(IVD1_4+2) = 2*E_BtoI(OPENBR( (IBRCH(1)+9),SS(1)))

! 1340:[pgb] Output Channel 'maintap'

      PGB(IPGB+2) = maintap

! 1350:[photovoltaic_source] photovoltaic source 'PVarray1'
      CALL COMPONENT_ID(ICALL_NO,1473112425)
      CALL PHOTOVOLT1_EXE(SS(2), (IBRCH(2)+1),PCU1_Irr,RT_22,RVD1_1,RVD1&
     &_2,RVD1_3, RVD1_4)

! 1380:[pgb] Output Channel 'Itot_PoC'

      PGB(IPGB+5) = Itot_PoC

! 1390:[div] Divider 
      IF (ABS(Q_Base_BESS) .LT. 1.0E-100) THEN
         IF (Q_Base_BESS .LT. 0.0)  THEN
            Qout_INV_BESS = -1.0E100 * RT_29
         ELSE
            Qout_INV_BESS =  1.0E100 * RT_29
         ENDIF
      ELSE
         Qout_INV_BESS = RT_29 / Q_Base_BESS
      ENDIF

! 1410:[div] Divider 
      IF (ABS(Q_Base_PV) .LT. 1.0E-100) THEN
         IF (Q_Base_PV .LT. 0.0)  THEN
            Qout_INV_PV = -1.0E100 * RT_27
         ELSE
            Qout_INV_PV =  1.0E100 * RT_27
         ENDIF
      ELSE
         Qout_INV_PV = RT_27 / Q_Base_PV
      ENDIF

! 1420:[div] Divider 
      IF (ABS(P_Base_BESS) .LT. 1.0E-100) THEN
         IF (P_Base_BESS .LT. 0.0)  THEN
            Pout_INV_BESS = -1.0E100 * RT_28
         ELSE
            Pout_INV_BESS =  1.0E100 * RT_28
         ENDIF
      ELSE
         Pout_INV_BESS = RT_28 / P_Base_BESS
      ENDIF

! 1430:[pgb] Output Channel 'Ineg_PoC'

      PGB(IPGB+7) = Ineg_PoC

! 1440:[div] Divider 
      IF (ABS(MV_Vol_base) .LT. 1.0E-100) THEN
         IF (MV_Vol_base .LT. 0.0)  THEN
            PCU2_V_MV_pu = -1.0E100 * PCU2_V_MV
         ELSE
            PCU2_V_MV_pu =  1.0E100 * PCU2_V_MV
         ENDIF
      ELSE
         PCU2_V_MV_pu = PCU2_V_MV / MV_Vol_base
      ENDIF

! 1450:[div] Divider 
      IF (ABS(P_Base_PV) .LT. 1.0E-100) THEN
         IF (P_Base_PV .LT. 0.0)  THEN
            Pout_INV_PV = -1.0E100 * RT_26
         ELSE
            Pout_INV_PV =  1.0E100 * RT_26
         ENDIF
      ELSE
         Pout_INV_PV = RT_26 / P_Base_PV
      ENDIF

! 1460:[div] Divider 
      IF (ABS(MV_Vol_base) .LT. 1.0E-100) THEN
         IF (MV_Vol_base .LT. 0.0)  THEN
            PCU1_V_MV_pu = -1.0E100 * PCU1_V_MV
         ELSE
            PCU1_V_MV_pu =  1.0E100 * PCU1_V_MV
         ENDIF
      ELSE
         PCU1_V_MV_pu = PCU1_V_MV / MV_Vol_base
      ENDIF

! 1470:[pgb] Output Channel 'Ipos_PoC'

      PGB(IPGB+8) = Ipos_PoC

! 1480:[pgb] Output Channel 'Iq_PoC'

      PGB(IPGB+9) = Iq_PoC

! 1490:[pgb] Output Channel 'Izero_PoC'

      PGB(IPGB+10) = Izero_PoC

! 1500:[div] Divider 
      IF (ABS(LV_Vol_base2) .LT. 1.0E-100) THEN
         IF (LV_Vol_base2 .LT. 0.0)  THEN
            PCU2_V_LV_pu = -1.0E100 * PCU2_V_LV
         ELSE
            PCU2_V_LV_pu =  1.0E100 * PCU2_V_LV
         ENDIF
      ELSE
         PCU2_V_LV_pu = PCU2_V_LV / LV_Vol_base2
      ENDIF

! 1510:[div] Divider 
      IF (ABS(LV_Vol_base1) .LT. 1.0E-100) THEN
         IF (LV_Vol_base1 .LT. 0.0)  THEN
            PCU1_V_LV_pu = -1.0E100 * PCU1_V_LV
         ELSE
            PCU1_V_LV_pu =  1.0E100 * PCU1_V_LV
         ENDIF
      ELSE
         PCU1_V_LV_pu = PCU1_V_LV / LV_Vol_base1
      ENDIF

! 1520:[pgb] Output Channel 'FRT_flag_POC'

      PGB(IPGB+11) = FRT_flag_POC

! 1540:[pgb] Output Channel 'FRT_flag_BESS'

      PGB(IPGB+13) = FRT_flag_BESS

! 1560:[pgb] Output Channel 'FRT_flag_PV'

      PGB(IPGB+15) = FRT_flag_PV

! 1570:[pgb] Output Channel 'Vneg_PoC'

      PGB(IPGB+16) = Vneg_PoC

! 1590:[pgb] Output Channel 'Id_PoC'

      PGB(IPGB+18) = Id_PoC

! 1600:[pgb] Output Channel 'Vpos_PoC'

      PGB(IPGB+19) = Vpos_PoC

! 1610:[pgb] Output Channel 'Qout_INV_BESS'

      PGB(IPGB+20) = Qout_INV_BESS

! 1620:[pgb] Output Channel 'BESSspt_MW'

      PGB(IPGB+21) = BESSspt_MW

! 1640:[pgb] Output Channel 'Vzero_PoC'

      PGB(IPGB+23) = Vzero_PoC

! 1660:[pgb] Output Channel 'Pout_INV_BESS'

      PGB(IPGB+25) = Pout_INV_BESS

! 1670:[pgb] Output Channel 'Qspt_MVAr'

      PGB(IPGB+26) = Qspt_MVAr

! 1700:[DEBUG_HyCon_Scope]  
      CALL DEBUG_HyCon_ScopeDyn(DEBUG_HyCon1)


! 1710:[pgb] Output Channel 'Qout_INV_PV'

      PGB(IPGB+29) = Qout_INV_PV

! 1720:[pgb] Output Channel 'Pspt_MW'

      PGB(IPGB+30) = Pspt_MW

! 1740:[pgb] Output Channel 'Pout_INV_PV'

      PGB(IPGB+32) = Pout_INV_PV

! 1750:[pgb] Output Channel 'PoiPfSpt'

      PGB(IPGB+33) = PoiPfSpt

! 1770:[pgb] Output Channel 'Iqneg_PoC'

      PGB(IPGB+35) = Iqneg_PoC

! 1790:[pgb] Output Channel 'PoiVolSpt_pu'

      PGB(IPGB+37) = PoiVolSpt_pu

! 1810:[pgb] Output Channel 'Qcmd_PPC_to_INV_BESS'

      PGB(IPGB+39) = Qcmd_PPC_to_INV_BESS

! 1820:[pgb] Output Channel 'Iqpos_PoC'

      PGB(IPGB+40) = Iqpos_PoC

! 1830:[pgb] Output Channel 'Iq_neg_pos_ratio'

      PGB(IPGB+41) = Iq_neg_pos_ratio

! 1860:[pgb] Output Channel 'Hz_POI'

      PGB(IPGB+48) = Hz_POI

! 1870:[pgb] Output Channel 'Pcmd_PPC_to_INV_BESS'

      PGB(IPGB+49) = Pcmd_PPC_to_INV_BESS

! 1880:[pgb] Output Channel 'Iqzero_PoC'

      PGB(IPGB+50) = Iqzero_PoC

! 1890:[pgb] Output Channel 'PCU2_V_MV_pu'

      PGB(IPGB+51) = PCU2_V_MV_pu

! 1900:[pgb] Output Channel 'PCU1_V_MV_pu'

      PGB(IPGB+52) = PCU1_V_MV_pu

! 1920:[pgb] Output Channel 'Qcmd_PPC_to_INV_PV'

      PGB(IPGB+54) = Qcmd_PPC_to_INV_PV

! 1930:[SC_Scope] Scopes for monitoring 
      CALL SC_ScopeDyn(DEBUG_PCU2, MEAS_PCU2)


! 1960:[pgb] Output Channel 'Pcmd_PPC_to_INV_PV'

      PGB(IPGB+57) = Pcmd_PPC_to_INV_PV

! 2020:[pgb] Output Channel 'PLANT_V_HV_pu'

      PGB(IPGB+65) = PLANT_V_HV_pu

! 2040:[SC_Scope] Scopes for monitoring 
      CALL SC_ScopeDyn(DEBUG_PCU1, MEAS_PCU1)


! 2050:[pgb] Output Channel 'PCU2_V_LV_pu'

      PGB(IPGB+69) = PCU2_V_LV_pu

! 2060:[pgb] Output Channel 'PCU1_V_LV_pu'

      PGB(IPGB+70) = PCU1_V_LV_pu

! 1:[source1] Single Phase Voltage Source Model 1 'Battery'
!  Single Phase Source: Battery
      RVD1_1 = RTCF(NRTCF+12)*SQRT_3*SQRT_1BY2
      RVD1_2 = 0.0
      RVD1_3 = PI_BY2
      CALL ESYS651_EXE(SS(6), (IBRCH(6)+1),0,0,0,0,0,  SS(6),NT_16,0,0,0&
     &,  RVD1_2, RVD1_1, 0.05,  1.0, 1.0, 1.0,RVD1_3,  1.0, 1.0, 1.0,  1&
     &.0, 1.0, 1.0,  RVD1_4, RVD1_5, RVD1_6, RVD1_7)

!---------------------------------------
! Feedbacks and transfers to storage 
!---------------------------------------

      STOI(ISTOI + 1) = Tap_position
      STOF(ISTOF + 21) = maintap
      STOF(ISTOF + 22) = RT_1
      STOF(ISTOF + 23) = PoiVArSpt_pu
      STOF(ISTOF + 24) = RT_2
      STOF(ISTOF + 25) = RT_3
      STOF(ISTOF + 26) = RT_4
      STOF(ISTOF + 27) = RT_5
      STOF(ISTOF + 28) = RT_6
      STOF(ISTOF + 29) = PCU1_Irr
      STOF(ISTOF + 30) = RT_7
      STOF(ISTOF + 31) = RT_8
      STOF(ISTOF + 32) = RT_9
      STOF(ISTOF + 33) = RT_10
      STOF(ISTOF + 34) = RT_11
      STOF(ISTOF + 35) = Iqzero_PoC
      STOF(ISTOF + 36) = RT_12
      STOF(ISTOF + 37) = RT_13
      STOF(ISTOF + 38) = RT_14
      STOF(ISTOF + 39) = Vneg_PoC
      STOF(ISTOF + 40) = Vpos_PoC
      STOF(ISTOF + 41) = Vzero_PoC
      STOF(ISTOF + 42) = Vab_PPC
      STOF(ISTOF + 43) = Vbc_PPC
      STOF(ISTOF + 44) = Vca_PPC
      STOF(ISTOF + 45) = Ineg_PoC
      STOF(ISTOF + 46) = Ipos_PoC
      STOF(ISTOF + 47) = Izero_PoC
      STOI(ISTOI + 2) = No_PCU1
      STOF(ISTOF + 184) = PCU1_P_LV
      STOF(ISTOF + 185) = PCU1_Q_LV
      STOF(ISTOF + 189) = PCU1_V_LV_pu
      STOF(ISTOF + 190) = PCU1_Q_MV
      STOF(ISTOF + 191) = PCU1_P_MV
      STOF(ISTOF + 195) = RT_16
      STOF(ISTOF + 196) = RT_17
      STOF(ISTOF + 197) = RT_18
      STOF(ISTOF + 198) = RT_19
      STOF(ISTOF + 199) = RT_20
      STOF(ISTOF + 200) = RT_21
      STOF(ISTOF + 201) = PVWSpt
      STOF(ISTOF + 205) = PCU2_P_MV
      STOF(ISTOF + 206) = PCU2_Q_MV
      STOF(ISTOF + 207) = PCU2_Q_LV
      STOF(ISTOF + 208) = PCU2_P_LV
      STOI(ISTOI + 3) = PCU2_BRK
      STOL(ISTOL + 1) = LT_1
      STOI(ISTOI + 4) = POI_BRK
      STOI(ISTOI + 5) = IT_1
      STOI(ISTOI + 6) = IT_2
      STOF(ISTOF + 209) = PCU1_Arms_LV
      STOF(ISTOF + 210) = PCU2_Arms_LV
      STOF(ISTOF + 211) = PCU2_Phs
      STOF(ISTOF + 212) = PCU1_Phs
      STOF(ISTOF + 213) = PLANT_Phs
      STOI(ISTOI + 7) = MVBRK
      STOF(ISTOF + 214) = RT_22
      STOI(ISTOI + 8) = IT_3
      STOF(ISTOF + 215) = MV_Bus_Vol
      STOF(ISTOF + 216) = RT_23
      STOF(ISTOF + 217) = Fsys
      STOI(ISTOI + 9) = No_PCU2
      STOI(ISTOI + 10) = IT_4
      STOI(ISTOI + 11) = PCU1_BRK
      STOI(ISTOI + 12) = IT_5
      STOI(ISTOI + 13) = IT_6
      STOI(ISTOI + 14) = PVmode
      STOF(ISTOF + 248) = PoiWLimSales
      STOF(ISTOF + 249) = PoiVArSpt
      STOF(ISTOF + 250) = PoiVolSpt
      STOF(ISTOF + 251) = BessWSpt
      STOF(ISTOF + 252) = PCU1_P_MV_AGGR
      STOF(ISTOF + 253) = PCU1_Q_MV_AGGR
      STOF(ISTOF + 254) = PCU2_P_MV_AGGR
      STOF(ISTOF + 255) = PCU2_Q_MV_AGGR
      STOF(ISTOF + 256) = Qspt_MVAr
      STOF(ISTOF + 257) = PoiPfSpt
      STOF(ISTOF + 258) = Pspt_MW
      STOF(ISTOF + 259) = PoiWLimSales_pu
      STOF(ISTOF + 260) = PCU1_V_LV
      STOF(ISTOF + 261) = LV_Vol_base1
      STOF(ISTOF + 262) = PCU1_V_MV_pu
      STOF(ISTOF + 263) = PCU1_V_MV
      STOF(ISTOF + 264) = PCU2_V_MV_pu
      STOF(ISTOF + 265) = PCU2_V_MV
      STOF(ISTOF + 266) = MV_Vol_base
      STOF(ISTOF + 267) = RT_24
      STOF(ISTOF + 268) = RT_25
      STOF(ISTOF + 269) = inf_BRK
      STOF(ISTOF + 270) = Pcmd_PPC_to_INV_PV
      STOF(ISTOF + 271) = Qcmd_PPC_to_INV_PV
      STOF(ISTOF + 272) = Pcmd_PPC_to_INV_BESS
      STOF(ISTOF + 273) = Qcmd_PPC_to_INV_BESS
      STOF(ISTOF + 274) = Pout_INV_PV
      STOF(ISTOF + 275) = RT_26
      STOF(ISTOF + 276) = P_Base_PV
      STOF(ISTOF + 277) = Qout_INV_PV
      STOF(ISTOF + 278) = RT_27
      STOF(ISTOF + 279) = Pout_INV_BESS
      STOF(ISTOF + 280) = RT_28
      STOF(ISTOF + 281) = P_Base_BESS
      STOF(ISTOF + 282) = Qout_INV_BESS
      STOF(ISTOF + 283) = RT_29
      STOF(ISTOF + 284) = PCU2_V_LV_pu
      STOF(ISTOF + 285) = PCU2_V_LV
      STOF(ISTOF + 289) = HV_Vol_base
      STOF(ISTOF + 290) = BESSspt_MW
      STOF(ISTOF + 291) = BessWSpt_pu
      STOF(ISTOF + 292) = PoiVolSpt_pu
      STOF(ISTOF + 293) = Q_Base_PV
      STOF(ISTOF + 294) = Q_Base_BESS
      STOF(ISTOF + 295) = Iq_neg_pos_ratio
      STOF(ISTOF + 296) = Iqneg_PoC
      STOF(ISTOF + 297) = Iqpos_PoC
      STOF(ISTOF + 298) = Itot_PoC
      STOF(ISTOF + 299) = RT_30
      STOF(ISTOF + 300) = RT_31
      STOF(ISTOF + 301) = RT_32
      STOF(ISTOF + 302) = Iq_PoC
      STOF(ISTOF + 303) = Id_PoC
      STOF(ISTOF + 304) = RT_33
      STOF(ISTOF + 305) = RT_34
      STOF(ISTOF + 306) = RT_35
      STOF(ISTOF + 307) = RT_36
      STOF(ISTOF + 308) = RT_37
      STOF(ISTOF + 309) = RT_38
      STOF(ISTOF + 310) = Ia_PoC
      STOF(ISTOF + 311) = Ib_PoC
      STOF(ISTOF + 312) = Ic_PoC
      STOF(ISTOF + 313) = PLANT_V_HV_pu
      STOF(ISTOF + 314) = PLANT_P_HV
      STOF(ISTOF + 315) = PLANT_Q_HV
      STOF(ISTOF + 316) = Vol_POI
      STOF(ISTOF + 317) = Hz_POI
      STOF(ISTOF + 318) = McbStt
      STOF(ISTOF + 319) = GcbStt
      STOF(ISTOF + 323) = RT_39
      STOF(ISTOF + 324) = RT_40
      STOF(ISTOF + 325) = FRT_flag_PV
      STOF(ISTOF + 326) = FRT_flag_BESS
      STOF(ISTOF + 327) = FRT_flag_POC
      STOF(ISTOF + 328) = PLANT_Q_MV
      STOF(ISTOF + 329) = PLANT_P_MV
      STOF(ISTOF + 330) = PLANT_V_MV
      STOF(ISTOF + 331) = LV_Vol_base2
      STOF(ISTOF + 805) = PLANT_V_HV
      STOF(ISTOF + 809) = PLANT_I_MV

! Array (1:3) quantities...
      DO IT_0 = 1,3
         STOF(ISTOF + 185 + IT_0) = PCU1_A_LV(IT_0)
         STOF(ISTOF + 191 + IT_0) = PCU1_A_MV(IT_0)
         STOF(ISTOF + 201 + IT_0) = PCU2_A_MV(IT_0)
         STOF(ISTOF + 285 + IT_0) = PCU2_A_LV(IT_0)
         STOF(ISTOF + 319 + IT_0) = Vrms_abc_POI(IT_0)
         STOF(ISTOF + 361 + IT_0) = V_ph(IT_0)
         STOF(ISTOF + 805 + IT_0) = Amp_MV(IT_0)
      END DO

! Array (1:4) quantities...
      DO IT_0 = 1,4
         STOF(ISTOF + 71 + IT_0) = Pv_Ms(IT_0)
         STOF(ISTOF + 125 + IT_0) = Bess_Ms(IT_0)
      END DO

! Array (1:5) quantities...
      DO IT_0 = 1,5
         STOF(ISTOF + 10 + IT_0) = DPS1_Spt(IT_0)
         STOF(ISTOF + 15 + IT_0) = DPS2_Spt(IT_0)
      END DO

! Array (1:10) quantities...
      DO IT_0 = 1,10
         STOF(ISTOF + 0 + IT_0) = Meas_Grid(IT_0)
         STOF(ISTOF + 115 + IT_0) = PCU2_Fb_SI(IT_0)
         STOF(ISTOF + 163 + IT_0) = DPS1_Fb(IT_0)
         STOF(ISTOF + 173 + IT_0) = DPS2_Fb(IT_0)
         STOF(ISTOF + 217 + IT_0) = PCU1_Fb_SI(IT_0)
         STOF(ISTOF + 227 + IT_0) = dummy_fb(IT_0)
         STOF(ISTOF + 237 + IT_0) = SC_Fb(IT_0)
         STOF(ISTOF + 331 + IT_0) = Meas_Plant(IT_0)
         STOF(ISTOF + 341 + IT_0) = PCU1_Fb(IT_0)
         STOF(ISTOF + 351 + IT_0) = PCU2_Fb(IT_0)
      END DO

! Array (1:12) quantities...
      DO IT_0 = 1,12
         STOF(ISTOF + 47 + IT_0) = RT_15(IT_0)
         STOF(ISTOF + 59 + IT_0) = Poi_Ms(IT_0)
      END DO

! Array (1:17) quantities...
      DO IT_0 = 1,17
         STOF(ISTOF + 129 + IT_0) = MEAS_PCU1(IT_0)
         STOF(ISTOF + 146 + IT_0) = MEAS_PCU2(IT_0)
      END DO

! Array (1:20) quantities...
      DO IT_0 = 1,20
         STOF(ISTOF + 75 + IT_0) = PCU2_Spt(IT_0)
         STOF(ISTOF + 95 + IT_0) = PCU1_Spt(IT_0)
      END DO

! Array (1:40) quantities...
      DO IT_0 = 1,40
         STOF(ISTOF + 764 + IT_0) = DEBUG_HyCon1(IT_0)
      END DO

! Array (1:200) quantities...
      DO IT_0 = 1,200
         STOF(ISTOF + 364 + IT_0) = DEBUG_PCU1(IT_0)
         STOF(ISTOF + 564 + IT_0) = DEBUG_PCU2(IT_0)
      END DO


!---------------------------------------
! Transfer to Exports
!---------------------------------------

!---------------------------------------
! Close Model Data read 
!---------------------------------------

      IF ( TIMEZERO ) CALL EMTDC_CLOSEFILE
      RETURN
      END

!=======================================================================

      SUBROUTINE MainOut()

!---------------------------------------
! Standard includes 
!---------------------------------------

      INCLUDE 'nd.h'
      INCLUDE 'emtconst.h'
      INCLUDE 'emtstor.h'
      INCLUDE 's0.h'
      INCLUDE 's1.h'
      INCLUDE 's2.h'
      INCLUDE 's4.h'
      INCLUDE 'branches.h'
      INCLUDE 'pscadv3.h'
      INCLUDE 'fnames.h'
      INCLUDE 'radiolinks.h'
      INCLUDE 'matlab.h'
      INCLUDE 'rtconfig.h'

!---------------------------------------
! Function/Subroutine Declarations 
!---------------------------------------

!     SUBR    InvFbDummyOut  ! 
      REAL    P3PH3         ! 
      REAL    Q3PH3         ! 
!     SUBR    DGTL_RMS3     ! '3 Phase Digital RMS Meter'
!     SUBR    DGTL_RMS3A    ! '3 Phase Digital RMS Meter'
      REAL    EMTDC_VVDC    ! 
!     SUBR    MPHASE3PS     ! Phase Measurement in a 3p signal
!     SUBR    DPS_DummyOut  ! 
      REAL    VBRANCH       ! 
!     SUBR    GridSourceOut  ! 
!     SUBR    FaultBlockOut  ! 
!     SUBR    SymmetricalComponentsCalc_1_1Out  ! 
!     SUBR    SymmetricalComponentsCalcOut  ! 
!     SUBR    setpointProfilesOut  ! 
!     SUBR    TapCtrl_1Out  ! 
!     SUBR    Aggr_Fb_ScaledOut  ! 
!     SUBR    DDSRF_PLL_1Out  ! 
!     SUBR    HyCtlOut      ! 
!     SUBR    SCxxxxOut     ! SMA  SC xxxx
!     SUBR    DEBUG_HyCon_ScopeOut  ! 
!     SUBR    SC_ScopeOut   ! Scopes for monitoring

!---------------------------------------
! Variable Declarations 
!---------------------------------------


! Electrical Node Indices
      INTEGER  PCU1_LVBUS(3), PLANT_HVBUS(3)
      INTEGER  PCU2_MVBUS(3), PCU2_LVBUS(3)
      INTEGER  PCU1_MVBUS(3), NT_14(3), NT_21(3)
      INTEGER  NT_31(3), NT_33(3), NT_36, NT_37
      INTEGER  NT_38

! Control Signals
      INTEGER  No_PCU1, PCU2_BRK, POI_BRK, MVBRK
      INTEGER  IT_3, No_PCU2, IT_6
      REAL     RT_1, RT_9, RT_11, RT_12, RT_13
      REAL     RT_14, Vab_PPC, Vbc_PPC, Vca_PPC
      REAL     PCU1_P_LV, PCU1_Q_LV, PCU1_A_LV(3)
      REAL     PCU1_Q_MV, PCU1_P_MV, PCU1_A_MV(3)
      REAL     RT_16, RT_17, RT_18, RT_19, RT_20
      REAL     RT_21, PCU2_A_MV(3), PCU2_P_MV
      REAL     PCU2_Q_MV, PCU2_Q_LV, PCU2_P_LV
      REAL     PCU1_Arms_LV, PCU2_Arms_LV
      REAL     PCU2_Phs, PCU1_Phs, PLANT_Phs
      REAL     RT_22, MV_Bus_Vol, Fsys
      REAL     PCU1_P_MV_AGGR, PCU1_Q_MV_AGGR
      REAL     PCU2_P_MV_AGGR, PCU2_Q_MV_AGGR
      REAL     PCU1_V_LV, LV_Vol_base1, PCU1_V_MV
      REAL     PCU2_V_MV, MV_Vol_base, RT_25
      REAL     P_Base_PV, P_Base_BESS, PCU2_V_LV
      REAL     PCU2_A_LV(3), HV_Vol_base
      REAL     Q_Base_PV, Q_Base_BESS, RT_34
      REAL     RT_38, Ia_PoC, Ib_PoC, Ic_PoC
      REAL     PLANT_P_HV, PLANT_Q_HV, GcbStt
      REAL     RT_39, RT_40, PLANT_Q_MV
      REAL     PLANT_P_MV, PLANT_V_MV
      REAL     LV_Vol_base2, V_ph(3), PLANT_V_HV
      REAL     Amp_MV(3), PLANT_I_MV

! Internal Variables
      INTEGER  IVD1_1
      REAL     RVD1_1, RVD1_2, RVD1_3, RVD1_4

! Indexing variables
      INTEGER ICALL_NO                            ! Module call num
      INTEGER ISTOL, ISTOI, ISTOF, ISTOC, IT_0    ! Storage Indices
      INTEGER IPGB                                ! Control/Monitoring
      INTEGER ISUBS, SS(8), IBRCH(8), INODE       ! SS/Node/Branch/Xfmr
      INTEGER IXFMR


!---------------------------------------
! Local Indices 
!---------------------------------------

! Dsdyn <-> Dsout transfer index storage

      NTXFR = NTXFR + 1

      ISTOL = TXFR(NTXFR,1)
      ISTOI = TXFR(NTXFR,2)
      ISTOF = TXFR(NTXFR,3)
      ISTOC = TXFR(NTXFR,4)

! Increment and assign runtime configuration call indices

      ICALL_NO  = NCALL_NO
      NCALL_NO  = NCALL_NO + 1

! Increment global storage indices

      IPGB      = NPGB
      NPGB      = NPGB + 70
      NCX       = NCX + 0
      INODE     = NNODE + 2
      NNODE     = NNODE + 102
      IXFMR     = NXFMR
      NXFMR     = NXFMR + 12
      NCSCS     = NCSCS + 0
      NCSCR     = NCSCR + 0

! Initialize Subsystem Mapping

      ISUBS = NSUBS + 0
      NSUBS = NSUBS + 8

      DO IT_0 = 1,8
         SS(IT_0) = SUBS(ISUBS + IT_0)
      END DO

! Initialize Branch Mapping.

      IBRCH(1)     = NBRCH(SS(1))
      NBRCH(SS(1)) = NBRCH(SS(1)) + 119


      IBRCH(2)     = NBRCH(SS(2))
      NBRCH(SS(2)) = NBRCH(SS(2)) + 3


      IBRCH(3)     = NBRCH(SS(3))
      NBRCH(SS(3)) = NBRCH(SS(3)) + 1


      IBRCH(4)     = NBRCH(SS(4))
      NBRCH(SS(4)) = NBRCH(SS(4)) + 0


      IBRCH(5)     = NBRCH(SS(5))
      NBRCH(SS(5)) = NBRCH(SS(5)) + 0


      IBRCH(6)     = NBRCH(SS(6))
      NBRCH(SS(6)) = NBRCH(SS(6)) + 3


      IBRCH(7)     = NBRCH(SS(7))
      NBRCH(SS(7)) = NBRCH(SS(7)) + 0


      IBRCH(8)     = NBRCH(SS(8))
      NBRCH(SS(8)) = NBRCH(SS(8)) + 0

!---------------------------------------
! Transfers from storage arrays 
!---------------------------------------

      RT_1     = STOF(ISTOF + 22)
      RT_9     = STOF(ISTOF + 32)
      RT_11    = STOF(ISTOF + 34)
      RT_12    = STOF(ISTOF + 36)
      RT_13    = STOF(ISTOF + 37)
      RT_14    = STOF(ISTOF + 38)
      Vab_PPC  = STOF(ISTOF + 42)
      Vbc_PPC  = STOF(ISTOF + 43)
      Vca_PPC  = STOF(ISTOF + 44)
      No_PCU1  = STOI(ISTOI + 2)
      PCU1_P_LV = STOF(ISTOF + 184)
      PCU1_Q_LV = STOF(ISTOF + 185)
      PCU1_Q_MV = STOF(ISTOF + 190)
      PCU1_P_MV = STOF(ISTOF + 191)
      RT_16    = STOF(ISTOF + 195)
      RT_17    = STOF(ISTOF + 196)
      RT_18    = STOF(ISTOF + 197)
      RT_19    = STOF(ISTOF + 198)
      RT_20    = STOF(ISTOF + 199)
      RT_21    = STOF(ISTOF + 200)
      PCU2_P_MV = STOF(ISTOF + 205)
      PCU2_Q_MV = STOF(ISTOF + 206)
      PCU2_Q_LV = STOF(ISTOF + 207)
      PCU2_P_LV = STOF(ISTOF + 208)
      PCU2_BRK = STOI(ISTOI + 3)
      POI_BRK  = STOI(ISTOI + 4)
      PCU1_Arms_LV = STOF(ISTOF + 209)
      PCU2_Arms_LV = STOF(ISTOF + 210)
      PCU2_Phs = STOF(ISTOF + 211)
      PCU1_Phs = STOF(ISTOF + 212)
      PLANT_Phs = STOF(ISTOF + 213)
      MVBRK    = STOI(ISTOI + 7)
      RT_22    = STOF(ISTOF + 214)
      IT_3     = STOI(ISTOI + 8)
      MV_Bus_Vol = STOF(ISTOF + 215)
      Fsys     = STOF(ISTOF + 217)
      No_PCU2  = STOI(ISTOI + 9)
      IT_6     = STOI(ISTOI + 13)
      PCU1_P_MV_AGGR = STOF(ISTOF + 252)
      PCU1_Q_MV_AGGR = STOF(ISTOF + 253)
      PCU2_P_MV_AGGR = STOF(ISTOF + 254)
      PCU2_Q_MV_AGGR = STOF(ISTOF + 255)
      PCU1_V_LV = STOF(ISTOF + 260)
      LV_Vol_base1 = STOF(ISTOF + 261)
      PCU1_V_MV = STOF(ISTOF + 263)
      PCU2_V_MV = STOF(ISTOF + 265)
      MV_Vol_base = STOF(ISTOF + 266)
      RT_25    = STOF(ISTOF + 268)
      P_Base_PV = STOF(ISTOF + 276)
      P_Base_BESS = STOF(ISTOF + 281)
      PCU2_V_LV = STOF(ISTOF + 285)
      HV_Vol_base = STOF(ISTOF + 289)
      Q_Base_PV = STOF(ISTOF + 293)
      Q_Base_BESS = STOF(ISTOF + 294)
      RT_34    = STOF(ISTOF + 305)
      RT_38    = STOF(ISTOF + 309)
      Ia_PoC   = STOF(ISTOF + 310)
      Ib_PoC   = STOF(ISTOF + 311)
      Ic_PoC   = STOF(ISTOF + 312)
      PLANT_P_HV = STOF(ISTOF + 314)
      PLANT_Q_HV = STOF(ISTOF + 315)
      GcbStt   = STOF(ISTOF + 319)
      RT_39    = STOF(ISTOF + 323)
      RT_40    = STOF(ISTOF + 324)
      PLANT_Q_MV = STOF(ISTOF + 328)
      PLANT_P_MV = STOF(ISTOF + 329)
      PLANT_V_MV = STOF(ISTOF + 330)
      LV_Vol_base2 = STOF(ISTOF + 331)
      PLANT_V_HV = STOF(ISTOF + 805)
      PLANT_I_MV = STOF(ISTOF + 809)

! Array (1:3) quantities...
      DO IT_0 = 1,3
         PCU1_A_LV(IT_0) = STOF(ISTOF + 185 + IT_0)
         PCU1_A_MV(IT_0) = STOF(ISTOF + 191 + IT_0)
         PCU2_A_MV(IT_0) = STOF(ISTOF + 201 + IT_0)
         PCU2_A_LV(IT_0) = STOF(ISTOF + 285 + IT_0)
         V_ph(IT_0) = STOF(ISTOF + 361 + IT_0)
         Amp_MV(IT_0) = STOF(ISTOF + 805 + IT_0)
      END DO


!---------------------------------------
! Electrical Node Lookup 
!---------------------------------------

      NT_36 = NODE(INODE + 26)
      NT_37 = NODE(INODE + 27)
      NT_38 = NODE(INODE + 25)

! Array (1:3) quantities...
      DO IT_0 = 1,3
         PCU1_LVBUS(IT_0) = NODE(INODE + 0 + IT_0)
         PLANT_HVBUS(IT_0) = NODE(INODE + 3 + IT_0)
         PCU2_MVBUS(IT_0) = NODE(INODE + 12 + IT_0)
         PCU2_LVBUS(IT_0) = NODE(INODE + 15 + IT_0)
         PCU1_MVBUS(IT_0) = NODE(INODE + 18 + IT_0)
         NT_14(IT_0) = NODE(INODE + 42 + IT_0)
         NT_21(IT_0) = NODE(INODE + 55 + IT_0)
         NT_31(IT_0) = NODE(INODE + 85 + IT_0)
         NT_33(IT_0) = NODE(INODE + 91 + IT_0)
      END DO

!---------------------------------------
! Configuration of Models 
!---------------------------------------

      IF ( TIMEZERO ) THEN
         FILENAME = 'Main.dta'
         CALL EMTDC_OPENFILE
         SECTION = 'DATADSO:'
         CALL EMTDC_GOTOSECTION
      ENDIF
!---------------------------------------
! Generated code from module definition 
!---------------------------------------


! 10:[const] Real Constant 'HV Vol base'

      HV_Vol_base = 220.0

! 20:[const] Real Constant 'MV Vol base'

      MV_Vol_base = 33.0

! 30:[const] Real Constant 'Freq base'

      Fsys = 50.0

! 40:[const] Real Constant 'LV Vol base'

      LV_Vol_base1 = 0.63

! 50:[const] Real Constant 'P_Base_PV'

      P_Base_PV = 4200.0

! 60:[const] Real Constant 'LV Vol base'

      LV_Vol_base2 = 0.66

! 70:[const] Real Constant 'P_Base_BESS'

      P_Base_BESS = 4400.0

! 80:[const] Real Constant 

      RT_16 = 127947.2

! 90:[const] Real Constant 'Q_Base_PV'

      Q_Base_PV = 2520.0

! 100:[const] Real Constant 

      RT_18 = 119000.0

! 110:[const] Real Constant 'Q_Base_BESS'

      Q_Base_BESS = 2640.0

! 120:[const] Real Constant 

      RT_19 = -100000.0

! 130:[consti] Integer Constant 'HV_BRK'

      POI_BRK = 0

! 140:[const] Real Constant 

      RT_20 = 47005.0

! 150:[const] Real Constant 

      RT_21 = -47005.0

! 170:[const] Real Constant 

      RT_39 = 119000.0

! 180:[const] Real Constant 'Gcb'

      GcbStt = 0.0

! 190:[const] Real Constant 

      RT_40 = 1785.0

! 200:[const] Real Constant 

      RT_17 = 50.0

! 210:[InvFbDummy]  
      CALL InvFbDummyOut()


! 220:[const] Real Constant 

      RT_38 = 127.947

! 240:[const] Real Constant 

      RT_34 = 127.947

! 310:[consti] Integer Constant 'PCU1_BRK'

      IT_6 = 0

! 330:[const] Real Constant 

      RT_9 = 0.0

! 350:[consti] Integer Constant 'PCU2_BRK'

      PCU2_BRK = 0

! 360:[const] Real Constant 

      RT_11 = 0.0

! 370:[consti] Integer Constant 'MVBRK'

      MVBRK = 0

! 400:[const] Real Constant 'inf_BRK_time'

      RT_25 = 1000.0

! 410:[consti] Integer Constant 

      No_PCU1 = 36

! 420:[const] Real Constant 

      RT_22 = 25.0

! 430:[multimeter] Multimeter 
      IVD1_1 = NRTCF
      NRTCF  = NRTCF + 5
      PCU1_A_LV(1) = ( CBR((IBRCH(1)+1), SS(1)))
      PCU1_A_LV(2) = ( CBR((IBRCH(1)+2), SS(1)))
      PCU1_A_LV(3) = ( CBR((IBRCH(1)+3), SS(1)))
      RVD1_1 = RTCF(IVD1_1) * P3PH3(SS(1), (IBRCH(1)+1), (IBRCH(1)+2), (&
     &IBRCH(1)+3),RTCF(IVD1_1+2),0)
      IF (UPDATE_AG) CALL PSCAD_AGR2(ICALL_NO,1675394643,RVD1_1,"Pd")
      PCU1_P_LV = RVD1_1
      RVD1_1 = RTCF(IVD1_1) * Q3PH3(SS(1), (IBRCH(1)+1), (IBRCH(1)+2), (&
     &IBRCH(1)+3),RTCF(IVD1_1+2),0)
      IF (UPDATE_AG) CALL PSCAD_AGR2(ICALL_NO,1675394643,RVD1_1,"Qd")
      PCU1_Q_LV = RVD1_1
      CALL DGTL_RMS3(256,SS(1),PCU1_LVBUS(1),PCU1_LVBUS(2),PCU1_LVBUS(3)&
     &,RTCF(IVD1_1+3),1.0,0.0,RVD1_1)
      RVD1_1 = RTCF(IVD1_1+1)*RVD1_1
      IF (UPDATE_AG) CALL PSCAD_AGR2(ICALL_NO,1675394643,RVD1_1,"Vd")
      PCU1_V_LV = RVD1_1
      CALL DGTL_RMS3A(256,( CBR((IBRCH(1)+1), SS(1))),( CBR((IBRCH(1)+2)&
     &, SS(1))),( CBR((IBRCH(1)+3), SS(1))),RTCF(IVD1_1+3),RTCF(IVD1_1+4&
     &),0.0,RVD1_1)
      PCU1_Arms_LV = RVD1_1
      RVD1_2 = EMTDC_VVDC(SS(1), PCU1_LVBUS(1), 0)
      RVD1_3 = EMTDC_VVDC(SS(1), PCU1_LVBUS(2), 0)
      RVD1_4 = EMTDC_VVDC(SS(1), PCU1_LVBUS(3), 0)
      CALL MPHASE3PS(1, 1, RVD1_2, RVD1_3, RVD1_4, RTCF(IVD1_1+2), RTCF(&
     &IVD1_1+3) , RVD1_1)
      PCU1_Phs = RVD1_1
      IF (FIRSTSTEP) THEN
        CALL PSCAD_AGI2(ICALL_NO,1675394643,1,"hide1")
        CALL PSCAD_AGI2(ICALL_NO,1675394643,1,"hide2")
      ENDIF

! 450:[multimeter] Multimeter 
      IVD1_1 = NRTCF
      NRTCF  = NRTCF + 5
      RVD1_1 = RTCF(IVD1_1) * P3PH3(SS(1), (IBRCH(1)+95), (IBRCH(1)+96),&
     & (IBRCH(1)+97),RTCF(IVD1_1+2),0)
      IF (UPDATE_AG) CALL PSCAD_AGR2(ICALL_NO,1251734031,RVD1_1,"Pd")
      PCU1_P_MV_AGGR = RVD1_1
      RVD1_1 = RTCF(IVD1_1) * Q3PH3(SS(1), (IBRCH(1)+95), (IBRCH(1)+96),&
     & (IBRCH(1)+97),RTCF(IVD1_1+2),0)
      IF (UPDATE_AG) CALL PSCAD_AGR2(ICALL_NO,1251734031,RVD1_1,"Qd")
      PCU1_Q_MV_AGGR = RVD1_1
      CALL DGTL_RMS3(256,SS(1),PCU1_MVBUS(1),PCU1_MVBUS(2),PCU1_MVBUS(3)&
     &,RTCF(IVD1_1+3),1.0,0.0,RVD1_1)
      RVD1_1 = RTCF(IVD1_1+1)*RVD1_1
      IF (UPDATE_AG) CALL PSCAD_AGR2(ICALL_NO,1251734031,RVD1_1,"Vd")
      IF (FIRSTSTEP) THEN
        CALL PSCAD_AGI2(ICALL_NO,1251734031,1,"hide1")
        CALL PSCAD_AGI2(ICALL_NO,1251734031,1,"hide2")
      ENDIF

! 460:[multimeter] Multimeter 
      IVD1_1 = NRTCF
      NRTCF  = NRTCF + 5
      PCU1_A_MV(1) = ( CBR((IBRCH(1)+10), SS(1)))
      PCU1_A_MV(2) = ( CBR((IBRCH(1)+11), SS(1)))
      PCU1_A_MV(3) = ( CBR((IBRCH(1)+12), SS(1)))
      RVD1_1 = RTCF(IVD1_1) * P3PH3(SS(1), (IBRCH(1)+10), (IBRCH(1)+11),&
     & (IBRCH(1)+12),RTCF(IVD1_1+2),0)
      IF (UPDATE_AG) CALL PSCAD_AGR2(ICALL_NO,954405753,RVD1_1,"Pd")
      PCU1_P_MV = RVD1_1
      RVD1_1 = RTCF(IVD1_1) * Q3PH3(SS(1), (IBRCH(1)+10), (IBRCH(1)+11),&
     & (IBRCH(1)+12),RTCF(IVD1_1+2),0)
      IF (UPDATE_AG) CALL PSCAD_AGR2(ICALL_NO,954405753,RVD1_1,"Qd")
      PCU1_Q_MV = RVD1_1
      CALL DGTL_RMS3(256,SS(1),NT_31(1),NT_31(2),NT_31(3),RTCF(IVD1_1+3)&
     &,1.0,0.0,RVD1_1)
      RVD1_1 = RTCF(IVD1_1+1)*RVD1_1
      IF (UPDATE_AG) CALL PSCAD_AGR2(ICALL_NO,954405753,RVD1_1,"Vd")
      PCU1_V_MV = RVD1_1
      IF (FIRSTSTEP) THEN
        CALL PSCAD_AGI2(ICALL_NO,954405753,1,"hide1")
        CALL PSCAD_AGI2(ICALL_NO,954405753,1,"hide2")
      ENDIF

! 470:[const] Real Constant 

      RT_1 = 1.03

! 480:[DPS_Dummy]  
      CALL DPS_DummyOut()


! 490:[breaker3] 3 Phase Breaker 'MVBRK'
! Three Phase Breaker Currents
      CALL BRK_POWER(SS(1), (IBRCH(1)+56), (IBRCH(1)+57), (IBRCH(1)+58),&
     &0,0,0,IVD1_1,0.02,RVD1_1,RVD1_2)

! 500:[multimeter] Multimeter 
      IVD1_1 = NRTCF
      NRTCF  = NRTCF + 5
      Amp_MV(1) = ( CBR((IBRCH(1)+53), SS(1)))
      Amp_MV(2) = ( CBR((IBRCH(1)+54), SS(1)))
      Amp_MV(3) = ( CBR((IBRCH(1)+55), SS(1)))
      RVD1_1 = RTCF(IVD1_1) * P3PH3(SS(1), (IBRCH(1)+53), (IBRCH(1)+54),&
     & (IBRCH(1)+55),RTCF(IVD1_1+2),0)
      IF (UPDATE_AG) CALL PSCAD_AGR2(ICALL_NO,122835826,RVD1_1,"Pd")
      PLANT_P_MV = RVD1_1
      RVD1_1 = RTCF(IVD1_1) * Q3PH3(SS(1), (IBRCH(1)+53), (IBRCH(1)+54),&
     & (IBRCH(1)+55),RTCF(IVD1_1+2),0)
      IF (UPDATE_AG) CALL PSCAD_AGR2(ICALL_NO,122835826,RVD1_1,"Qd")
      PLANT_Q_MV = RVD1_1
      CALL DGTL_RMS3(256,SS(1),NT_21(1),NT_21(2),NT_21(3),RTCF(IVD1_1+3)&
     &,1.0,0.0,RVD1_1)
      RVD1_1 = RTCF(IVD1_1+1)*RVD1_1
      IF (UPDATE_AG) CALL PSCAD_AGR2(ICALL_NO,122835826,RVD1_1,"Vd")
      PLANT_V_MV = RVD1_1
      CALL DGTL_RMS3A(256,( CBR((IBRCH(1)+53), SS(1))),( CBR((IBRCH(1)+5&
     &4), SS(1))),( CBR((IBRCH(1)+55), SS(1))),RTCF(IVD1_1+3),RTCF(IVD1_&
     &1+4),0.0,RVD1_1)
      PLANT_I_MV = RVD1_1
      IF (FIRSTSTEP) THEN
        CALL PSCAD_AGI2(ICALL_NO,122835826,1,"hide1")
        CALL PSCAD_AGI2(ICALL_NO,122835826,1,"hide2")
      ENDIF

! 510:[ammeter] Current Meter 'Ia_Poc'
      Ia_PoC = ( CBR((IBRCH(1)+116), SS(1)))

! 520:[breaker3] 3 Phase Breaker 'POI_BRK'
! Three Phase Breaker Currents
      CALL BRK_POWER(SS(1), (IBRCH(1)+25), (IBRCH(1)+26), (IBRCH(1)+27),&
     &0,0,0,IVD1_1,0.02,RVD1_1,RVD1_2)

! 530:[multimeter] Multimeter 
      IVD1_1 = NRTCF
      NRTCF  = NRTCF + 5
      V_ph(1) = EMTDC_VVDC(SS(1), NT_14(1), 0)
      V_ph(2) = EMTDC_VVDC(SS(1), NT_14(2), 0)
      V_ph(3) = EMTDC_VVDC(SS(1), NT_14(3), 0)
      RVD1_1 = RTCF(IVD1_1) * P3PH3(SS(1), (IBRCH(1)+4), (IBRCH(1)+5), (&
     &IBRCH(1)+6),RTCF(IVD1_1+2),0)
      IF (UPDATE_AG) CALL PSCAD_AGR2(ICALL_NO,1543620566,RVD1_1,"Pd")
      PLANT_P_HV = RVD1_1
      RVD1_1 = RTCF(IVD1_1) * Q3PH3(SS(1), (IBRCH(1)+4), (IBRCH(1)+5), (&
     &IBRCH(1)+6),RTCF(IVD1_1+2),0)
      IF (UPDATE_AG) CALL PSCAD_AGR2(ICALL_NO,1543620566,RVD1_1,"Qd")
      PLANT_Q_HV = RVD1_1
      CALL DGTL_RMS3(256,SS(1),NT_14(1),NT_14(2),NT_14(3),RTCF(IVD1_1+3)&
     &,1.0,0.0,RVD1_1)
      RVD1_1 = RTCF(IVD1_1+1)*RVD1_1
      IF (UPDATE_AG) CALL PSCAD_AGR2(ICALL_NO,1543620566,RVD1_1,"Vd")
      PLANT_V_HV = RVD1_1
      CALL DGTL_RMS3A(256,( CBR((IBRCH(1)+4), SS(1))),( CBR((IBRCH(1)+5)&
     &, SS(1))),( CBR((IBRCH(1)+6), SS(1))),RTCF(IVD1_1+3),RTCF(IVD1_1+4&
     &),0.0,RVD1_1)
      RVD1_2 = EMTDC_VVDC(SS(1), NT_14(1), 0)
      RVD1_3 = EMTDC_VVDC(SS(1), NT_14(2), 0)
      RVD1_4 = EMTDC_VVDC(SS(1), NT_14(3), 0)
      CALL MPHASE3PS(1, 1, RVD1_2, RVD1_3, RVD1_4, RTCF(IVD1_1+2), RTCF(&
     &IVD1_1+3) , RVD1_1)
      PLANT_Phs = RVD1_1
      IF (FIRSTSTEP) THEN
        CALL PSCAD_AGI2(ICALL_NO,1543620566,1,"hide1")
        CALL PSCAD_AGI2(ICALL_NO,1543620566,1,"hide2")
      ENDIF

! 540:[consti] Integer Constant 

      No_PCU2 = 40

! 550:[ammeter] Current Meter 'Ib_PoC'
      Ib_PoC = ( CBR((IBRCH(1)+117), SS(1)))

! 560:[multimeter] Multimeter 
      IVD1_1 = NRTCF
      NRTCF  = NRTCF + 5
      PCU2_A_LV(1) = ( CBR((IBRCH(1)+22), SS(1)))
      PCU2_A_LV(2) = ( CBR((IBRCH(1)+23), SS(1)))
      PCU2_A_LV(3) = ( CBR((IBRCH(1)+24), SS(1)))
      RVD1_1 = RTCF(IVD1_1) * P3PH3(SS(1), (IBRCH(1)+22), (IBRCH(1)+23),&
     & (IBRCH(1)+24),RTCF(IVD1_1+2),0)
      IF (UPDATE_AG) CALL PSCAD_AGR2(ICALL_NO,469044665,RVD1_1,"Pd")
      PCU2_P_LV = RVD1_1
      RVD1_1 = RTCF(IVD1_1) * Q3PH3(SS(1), (IBRCH(1)+22), (IBRCH(1)+23),&
     & (IBRCH(1)+24),RTCF(IVD1_1+2),0)
      IF (UPDATE_AG) CALL PSCAD_AGR2(ICALL_NO,469044665,RVD1_1,"Qd")
      PCU2_Q_LV = RVD1_1
      CALL DGTL_RMS3(256,SS(1),PCU2_LVBUS(1),PCU2_LVBUS(2),PCU2_LVBUS(3)&
     &,RTCF(IVD1_1+3),1.0,0.0,RVD1_1)
      RVD1_1 = RTCF(IVD1_1+1)*RVD1_1
      IF (UPDATE_AG) CALL PSCAD_AGR2(ICALL_NO,469044665,RVD1_1,"Vd")
      PCU2_V_LV = RVD1_1
      CALL DGTL_RMS3A(256,( CBR((IBRCH(1)+22), SS(1))),( CBR((IBRCH(1)+2&
     &3), SS(1))),( CBR((IBRCH(1)+24), SS(1))),RTCF(IVD1_1+3),RTCF(IVD1_&
     &1+4),0.0,RVD1_1)
      PCU2_Arms_LV = RVD1_1
      RVD1_2 = EMTDC_VVDC(SS(1), PCU2_LVBUS(1), 0)
      RVD1_3 = EMTDC_VVDC(SS(1), PCU2_LVBUS(2), 0)
      RVD1_4 = EMTDC_VVDC(SS(1), PCU2_LVBUS(3), 0)
      CALL MPHASE3PS(1, 1, RVD1_2, RVD1_3, RVD1_4, RTCF(IVD1_1+2), RTCF(&
     &IVD1_1+3) , RVD1_1)
      PCU2_Phs = RVD1_1
      IF (FIRSTSTEP) THEN
        CALL PSCAD_AGI2(ICALL_NO,469044665,1,"hide1")
        CALL PSCAD_AGI2(ICALL_NO,469044665,1,"hide2")
      ENDIF

! 570:[GridSource]  'GridSource_1'
      CALL GridSourceOut()


! 590:[ammeter] Current Meter 'Ic_PoC'
      Ic_PoC = ( CBR((IBRCH(1)+43), SS(1)))

! 600:[multimeter] Multimeter 
      IVD1_1 = NRTCF
      NRTCF  = NRTCF + 5
      RVD1_1 = RTCF(IVD1_1) * P3PH3(SS(1), (IBRCH(1)+98), (IBRCH(1)+99),&
     & (IBRCH(1)+100),RTCF(IVD1_1+2),0)
      IF (UPDATE_AG) CALL PSCAD_AGR2(ICALL_NO,306794587,RVD1_1,"Pd")
      PCU2_P_MV_AGGR = RVD1_1
      RVD1_1 = RTCF(IVD1_1) * Q3PH3(SS(1), (IBRCH(1)+98), (IBRCH(1)+99),&
     & (IBRCH(1)+100),RTCF(IVD1_1+2),0)
      IF (UPDATE_AG) CALL PSCAD_AGR2(ICALL_NO,306794587,RVD1_1,"Qd")
      PCU2_Q_MV_AGGR = RVD1_1
      CALL DGTL_RMS3(256,SS(1),PCU2_MVBUS(1),PCU2_MVBUS(2),PCU2_MVBUS(3)&
     &,RTCF(IVD1_1+3),1.0,0.0,RVD1_1)
      RVD1_1 = RTCF(IVD1_1+1)*RVD1_1
      IF (UPDATE_AG) CALL PSCAD_AGR2(ICALL_NO,306794587,RVD1_1,"Vd")
      IF (FIRSTSTEP) THEN
        CALL PSCAD_AGI2(ICALL_NO,306794587,1,"hide1")
        CALL PSCAD_AGI2(ICALL_NO,306794587,1,"hide2")
      ENDIF

! 610:[multimeter] Multimeter 
      IVD1_1 = NRTCF
      NRTCF  = NRTCF + 5
      PCU2_A_MV(1) = ( CBR((IBRCH(1)+13), SS(1)))
      PCU2_A_MV(2) = ( CBR((IBRCH(1)+14), SS(1)))
      PCU2_A_MV(3) = ( CBR((IBRCH(1)+15), SS(1)))
      RVD1_1 = RTCF(IVD1_1) * P3PH3(SS(1), (IBRCH(1)+13), (IBRCH(1)+14),&
     & (IBRCH(1)+15),RTCF(IVD1_1+2),0)
      IF (UPDATE_AG) CALL PSCAD_AGR2(ICALL_NO,71743599,RVD1_1,"Pd")
      PCU2_P_MV = RVD1_1
      RVD1_1 = RTCF(IVD1_1) * Q3PH3(SS(1), (IBRCH(1)+13), (IBRCH(1)+14),&
     & (IBRCH(1)+15),RTCF(IVD1_1+2),0)
      IF (UPDATE_AG) CALL PSCAD_AGR2(ICALL_NO,71743599,RVD1_1,"Qd")
      PCU2_Q_MV = RVD1_1
      CALL DGTL_RMS3(256,SS(1),NT_33(1),NT_33(2),NT_33(3),RTCF(IVD1_1+3)&
     &,1.0,0.0,RVD1_1)
      RVD1_1 = RTCF(IVD1_1+1)*RVD1_1
      IF (UPDATE_AG) CALL PSCAD_AGR2(ICALL_NO,71743599,RVD1_1,"Vd")
      PCU2_V_MV = RVD1_1
      IF (FIRSTSTEP) THEN
        CALL PSCAD_AGI2(ICALL_NO,71743599,1,"hide1")
        CALL PSCAD_AGI2(ICALL_NO,71743599,1,"hide2")
      ENDIF

! 620:[breaker3] 3 Phase Breaker 'PCU2_BRK'
! Three Phase Breaker Currents
      CALL BRK_POWER(SS(1), (IBRCH(1)+16), (IBRCH(1)+17), (IBRCH(1)+18),&
     &0,0,0,IVD1_1,0.02,RVD1_1,RVD1_2)

! 640:[DPS_Dummy]  
      CALL DPS_DummyOut()


! 650:[voltmeter] Voltmeter (Line - Line) 'Vab_PPC'
      Vab_PPC = EMTDC_VVDC(SS(1), NT_38, NT_36)

! 660:[FaultBlock]  'FaultBlock_1'
      CALL FaultBlockOut()


! 670:[breaker3] 3 Phase Breaker 'PCU2_BRK'
! Three Phase Breaker Currents
      CALL BRK_POWER(SS(1), (IBRCH(1)+28), (IBRCH(1)+29), (IBRCH(1)+30),&
     &0,0,0,IVD1_1,0.02,RVD1_1,RVD1_2)

! 680:[voltmeter] Voltmeter (Line - Line) 'Vbc_PPC'
      Vbc_PPC = EMTDC_VVDC(SS(1), NT_36, NT_37)

! 690:[voltmeter] Voltmeter (Line - Line) 'Vca_PPC'
      Vca_PPC = EMTDC_VVDC(SS(1), NT_37, NT_38)

! 740:[datatap] Scalar/Array Tap 
      RT_14 = V_ph(1)

! 750:[datatap] Scalar/Array Tap 
      RT_13 = V_ph(2)

! 760:[datatap] Scalar/Array Tap 
      RT_12 = V_ph(3)

! 770:[SymmetricalComponentsCalc_1_1]  'SymmetricalComponentsCalc_1_1'
      CALL SymmetricalComponentsCalc_1_1Out()


! 780:[SymmetricalComponentsCalc]  'SymmetricalComponentsCalc_1'
      CALL SymmetricalComponentsCalcOut()


! 810:[SymmetricalComponentsCalc]  'SymmetricalComponentsCalc_1'
      CALL SymmetricalComponentsCalcOut()


! 820:[setpointProfiles]  'setpointProfiles_1'
      CALL setpointProfilesOut()


! 880:[TapCtrl_1]  
      CALL TapCtrl_1Out()


! 910:[Aggr_Fb_Scaled]  
      CALL Aggr_Fb_ScaledOut()


! 930:[DDSRF_PLL_1]  
      CALL DDSRF_PLL_1Out()


! 1000:[HyCtl]  'HyCon1'
      CALL HyCtlOut()


! 1010:[SCxxxx] SMA  SC xxxx 
      CALL SCxxxxOut()


! 1020:[Aggr_Fb_Scaled]  
      CALL Aggr_Fb_ScaledOut()


! 1030:[SCxxxx] SMA  SC xxxx 
      CALL SCxxxxOut()


! 1280:[breaker3] 3 Phase Breaker 'PCU1_BRK'
! Three Phase Breaker Currents
      CALL BRK_POWER(SS(1), (IBRCH(1)+19), (IBRCH(1)+20), (IBRCH(1)+21),&
     &0,0,0,IVD1_1,0.02,RVD1_1,RVD1_2)

! 1290:[rms3ph] Three Phase RMS Meter 
      RVD1_1 = RTCF(NRTCF) ! Inverse of rated voltage
      RVD1_2 = RTCF(NRTCF+1) ! Frequency
      RVD1_3 = RTCF(NRTCF+2) ! Initial value
      NRTCF = NRTCF + 3
      CALL DGTL_RMS3(64,SS(1),PLANT_HVBUS(1),PLANT_HVBUS(2),PLANT_HVBUS(&
     &3),RVD1_2,RVD1_1,RVD1_3,MV_Bus_Vol)
!

! 1300:[breaker3] 3 Phase Breaker 'inf_BRK'
! Three Phase Breaker Currents
      CALL BRK_POWER(SS(1), (IBRCH(1)+113), (IBRCH(1)+114), (IBRCH(1)+11&
     &5),0,0,0,IVD1_1,0.02,RVD1_1,RVD1_2)

! 1330:[breaker3] 3 Phase Breaker 'PCU1_BRK'
! Three Phase Breaker Currents
      CALL BRK_POWER(SS(1), (IBRCH(1)+7), (IBRCH(1)+8), (IBRCH(1)+9),0,0&
     &,0,IVD1_1,0.02,RVD1_1,RVD1_2)

! 1350:[photovoltaic_source] photovoltaic source 'PVarray1'
      NRTCF = NRTCF + 1

! 1360:[pgb] Output Channel 'Ic_PoC'

      PGB(IPGB+3) = Ic_PoC

! 1370:[pgb] Output Channel 'Ib_PoC'

      PGB(IPGB+4) = Ib_PoC

! 1400:[pgb] Output Channel 'Ia_PoC'

      PGB(IPGB+6) = Ia_PoC

! 1530:[pgb] Output Channel 'PLANT_Q_MV'

      PGB(IPGB+12) = PLANT_Q_MV

! 1550:[pgb] Output Channel 'PLANT_P_MV'

      PGB(IPGB+14) = PLANT_P_MV

! 1580:[pgb] Output Channel 'PLANT_V_MV'

      PGB(IPGB+17) = PLANT_V_MV

! 1630:[pgb] Output Channel 'PCU2_Phs'

      PGB(IPGB+22) = PCU2_Phs

! 1650:[pgb] Output Channel 'PCU1_Phs'

      PGB(IPGB+24) = PCU1_Phs

! 1680:[pgb] Output Channel 'PCU2_Arms_LV'

      PGB(IPGB+27) = PCU2_Arms_LV

! 1690:[pgb] Output Channel 'PCU1_Arms_LV'

      PGB(IPGB+28) = PCU1_Arms_LV

! 1700:[DEBUG_HyCon_Scope]  
      CALL DEBUG_HyCon_ScopeOut()


! 1730:[pgb] Output Channel 'PCU2_Q_MV'

      PGB(IPGB+31) = PCU2_Q_MV

! 1760:[pgb] Output Channel 'PCU1_Q_MV'

      PGB(IPGB+34) = PCU1_Q_MV

! 1780:[pgb] Output Channel 'PCU2_P_MV'

      PGB(IPGB+36) = PCU2_P_MV

! 1800:[pgb] Output Channel 'PCU1_P_MV'

      PGB(IPGB+38) = PCU1_P_MV

! 1840:[pgb] Output Channel 'PCU2_A_MV'

      DO IVD1_1 = 1, 3
         PGB(IPGB+42+IVD1_1-1) = 1000.0 * PCU2_A_MV(IVD1_1)
      ENDDO

! 1850:[pgb] Output Channel 'PCU1_A_MV'

      DO IVD1_1 = 1, 3
         PGB(IPGB+45+IVD1_1-1) = 1000.0 * PCU1_A_MV(IVD1_1)
      ENDDO

! 1910:[pgb] Output Channel 'PLANT_Phs'

      PGB(IPGB+53) = PLANT_Phs

! 1930:[SC_Scope] Scopes for monitoring 
      CALL SC_ScopeOut()


! 1940:[pgb] Output Channel 'PCU2_Q_LV'

      PGB(IPGB+55) = PCU2_Q_LV

! 1950:[pgb] Output Channel 'PLANT_Q_HV'

      PGB(IPGB+56) = PLANT_Q_HV

! 1970:[pgb] Output Channel 'PCU1_Q_LV'

      PGB(IPGB+58) = PCU1_Q_LV

! 1980:[pgb] Output Channel 'PCU2_P_LV'

      PGB(IPGB+59) = PCU2_P_LV

! 1990:[pgb] Output Channel 'PLANT_P_HV'

      PGB(IPGB+60) = PLANT_P_HV

! 2000:[pgb] Output Channel 'PCU1_P_LV'

      PGB(IPGB+61) = PCU1_P_LV

! 2010:[pgb] Output Channel 'PCU2_A_LV'

      DO IVD1_1 = 1, 3
         PGB(IPGB+62+IVD1_1-1) = PCU2_A_LV(IVD1_1)
      ENDDO

! 2030:[pgb] Output Channel 'PCU1_A_LV'

      DO IVD1_1 = 1, 3
         PGB(IPGB+66+IVD1_1-1) = PCU1_A_LV(IVD1_1)
      ENDDO

! 2040:[SC_Scope] Scopes for monitoring 
      CALL SC_ScopeOut()


!---------------------------------------
! Feedbacks and transfers to storage 
!---------------------------------------

      STOF(ISTOF + 22) = RT_1
      STOF(ISTOF + 32) = RT_9
      STOF(ISTOF + 34) = RT_11
      STOF(ISTOF + 36) = RT_12
      STOF(ISTOF + 37) = RT_13
      STOF(ISTOF + 38) = RT_14
      STOF(ISTOF + 42) = Vab_PPC
      STOF(ISTOF + 43) = Vbc_PPC
      STOF(ISTOF + 44) = Vca_PPC
      STOI(ISTOI + 2) = No_PCU1
      STOF(ISTOF + 184) = PCU1_P_LV
      STOF(ISTOF + 185) = PCU1_Q_LV
      STOF(ISTOF + 190) = PCU1_Q_MV
      STOF(ISTOF + 191) = PCU1_P_MV
      STOF(ISTOF + 195) = RT_16
      STOF(ISTOF + 196) = RT_17
      STOF(ISTOF + 197) = RT_18
      STOF(ISTOF + 198) = RT_19
      STOF(ISTOF + 199) = RT_20
      STOF(ISTOF + 200) = RT_21
      STOF(ISTOF + 205) = PCU2_P_MV
      STOF(ISTOF + 206) = PCU2_Q_MV
      STOF(ISTOF + 207) = PCU2_Q_LV
      STOF(ISTOF + 208) = PCU2_P_LV
      STOI(ISTOI + 3) = PCU2_BRK
      STOI(ISTOI + 4) = POI_BRK
      STOF(ISTOF + 209) = PCU1_Arms_LV
      STOF(ISTOF + 210) = PCU2_Arms_LV
      STOF(ISTOF + 211) = PCU2_Phs
      STOF(ISTOF + 212) = PCU1_Phs
      STOF(ISTOF + 213) = PLANT_Phs
      STOI(ISTOI + 7) = MVBRK
      STOF(ISTOF + 214) = RT_22
      STOI(ISTOI + 8) = IT_3
      STOF(ISTOF + 215) = MV_Bus_Vol
      STOF(ISTOF + 217) = Fsys
      STOI(ISTOI + 9) = No_PCU2
      STOI(ISTOI + 13) = IT_6
      STOF(ISTOF + 252) = PCU1_P_MV_AGGR
      STOF(ISTOF + 253) = PCU1_Q_MV_AGGR
      STOF(ISTOF + 254) = PCU2_P_MV_AGGR
      STOF(ISTOF + 255) = PCU2_Q_MV_AGGR
      STOF(ISTOF + 260) = PCU1_V_LV
      STOF(ISTOF + 261) = LV_Vol_base1
      STOF(ISTOF + 263) = PCU1_V_MV
      STOF(ISTOF + 265) = PCU2_V_MV
      STOF(ISTOF + 266) = MV_Vol_base
      STOF(ISTOF + 268) = RT_25
      STOF(ISTOF + 276) = P_Base_PV
      STOF(ISTOF + 281) = P_Base_BESS
      STOF(ISTOF + 285) = PCU2_V_LV
      STOF(ISTOF + 289) = HV_Vol_base
      STOF(ISTOF + 293) = Q_Base_PV
      STOF(ISTOF + 294) = Q_Base_BESS
      STOF(ISTOF + 305) = RT_34
      STOF(ISTOF + 309) = RT_38
      STOF(ISTOF + 310) = Ia_PoC
      STOF(ISTOF + 311) = Ib_PoC
      STOF(ISTOF + 312) = Ic_PoC
      STOF(ISTOF + 314) = PLANT_P_HV
      STOF(ISTOF + 315) = PLANT_Q_HV
      STOF(ISTOF + 319) = GcbStt
      STOF(ISTOF + 323) = RT_39
      STOF(ISTOF + 324) = RT_40
      STOF(ISTOF + 328) = PLANT_Q_MV
      STOF(ISTOF + 329) = PLANT_P_MV
      STOF(ISTOF + 330) = PLANT_V_MV
      STOF(ISTOF + 331) = LV_Vol_base2
      STOF(ISTOF + 805) = PLANT_V_HV
      STOF(ISTOF + 809) = PLANT_I_MV

! Array (1:3) quantities...
      DO IT_0 = 1,3
         STOF(ISTOF + 185 + IT_0) = PCU1_A_LV(IT_0)
         STOF(ISTOF + 191 + IT_0) = PCU1_A_MV(IT_0)
         STOF(ISTOF + 201 + IT_0) = PCU2_A_MV(IT_0)
         STOF(ISTOF + 285 + IT_0) = PCU2_A_LV(IT_0)
         STOF(ISTOF + 361 + IT_0) = V_ph(IT_0)
         STOF(ISTOF + 805 + IT_0) = Amp_MV(IT_0)
      END DO


!---------------------------------------
! Close Model Data read 
!---------------------------------------

      IF ( TIMEZERO ) CALL EMTDC_CLOSEFILE
      RETURN
      END

!=======================================================================

      SUBROUTINE MainDyn_Begin()

!---------------------------------------
! Standard includes 
!---------------------------------------

      INCLUDE 'nd.h'
      INCLUDE 'emtconst.h'
      INCLUDE 's0.h'
      INCLUDE 's1.h'
      INCLUDE 's4.h'
      INCLUDE 'branches.h'
      INCLUDE 'pscadv3.h'
      INCLUDE 'radiolinks.h'
      INCLUDE 'rtconfig.h'

!---------------------------------------
! Function/Subroutine Declarations 
!---------------------------------------

!     SUBR    InvFbDummyDyn_Begin  ! 
!     SUBR    DPS_DummyDyn_Begin  ! 
!     SUBR    GridSourceDyn_Begin  ! 
!     SUBR    FaultBlockDyn_Begin  ! 
!     SUBR    SymmetricalComponentsCalc_1_1Dyn_Begin  ! 
!     SUBR    SymmetricalComponentsCalcDyn_Begin  ! 
!     SUBR    setpointProfilesDyn_Begin  ! 
!     SUBR    TapCtrl_1Dyn_Begin  ! 
!     SUBR    Aggr_Fb_ScaledDyn_Begin  ! 
!     SUBR    DDSRF_PLL_1Dyn_Begin  ! 
!     SUBR    HyCtlDyn_Begin  ! 
!     SUBR    SCxxxxDyn_Begin  ! SMA  SC xxxx
!     SUBR    DEBUG_HyCon_ScopeDyn_Begin  ! 
!     SUBR    SC_ScopeDyn_Begin  ! Scopes for monitoring

!---------------------------------------
! Variable Declarations 
!---------------------------------------


! Subroutine Arguments

! Electrical Node Indices

! Control Signals
      INTEGER  No_PCU1, PCU2_BRK, POI_BRK, MVBRK
      INTEGER  No_PCU2, IT_6
      REAL     RT_1, RT_9, RT_11, RT_16, RT_17
      REAL     RT_18, RT_19, RT_20, RT_21, RT_22
      REAL     Fsys, LV_Vol_base1, MV_Vol_base
      REAL     RT_25, P_Base_PV, P_Base_BESS
      REAL     HV_Vol_base, Q_Base_PV
      REAL     Q_Base_BESS, RT_34, RT_38, GcbStt
      REAL     RT_39, RT_40, LV_Vol_base2

! Internal Variables
      INTEGER  IVD1_1, IVD1_2, IVD1_3, IVD1_4
      REAL     RVD1_1, RVD1_2, RVD1_3, RVD1_4
      REAL     RVD1_5, RVD1_6

! Indexing variables
      INTEGER ICALL_NO                            ! Module call num
      INTEGER IT_0                                ! Storage Indices
      INTEGER ICX                                 ! Control/Monitoring
      INTEGER ISUBS, SS(8), IBRCH(8), INODE       ! SS/Node/Branch/Xfmr
      INTEGER IXFMR


!---------------------------------------
! Local Indices 
!---------------------------------------


! Increment and assign runtime configuration call indices

      ICALL_NO  = NCALL_NO
      NCALL_NO  = NCALL_NO + 1

! Increment global storage indices

      ICX       = NCX
      NCX       = NCX + 7
      INODE     = NNODE + 2
      NNODE     = NNODE + 102
      IXFMR     = NXFMR
      NXFMR     = NXFMR + 12
      NCSCS     = NCSCS + 0
      NCSCR     = NCSCR + 0

! Initialize Subsystem Mapping

      ISUBS = NSUBS + 0
      NSUBS = NSUBS + 8

      DO IT_0 = 1,8
         SS(IT_0) = SUBS(ISUBS + IT_0)
      END DO

! Initialize Branch Mapping.

      IBRCH(1)     = NBRCH(SS(1))
      NBRCH(SS(1)) = NBRCH(SS(1)) + 119


      IBRCH(2)     = NBRCH(SS(2))
      NBRCH(SS(2)) = NBRCH(SS(2)) + 3


      IBRCH(3)     = NBRCH(SS(3))
      NBRCH(SS(3)) = NBRCH(SS(3)) + 1


      IBRCH(4)     = NBRCH(SS(4))
      NBRCH(SS(4)) = NBRCH(SS(4)) + 0


      IBRCH(5)     = NBRCH(SS(5))
      NBRCH(SS(5)) = NBRCH(SS(5)) + 0


      IBRCH(6)     = NBRCH(SS(6))
      NBRCH(SS(6)) = NBRCH(SS(6)) + 3


      IBRCH(7)     = NBRCH(SS(7))
      NBRCH(SS(7)) = NBRCH(SS(7)) + 0


      IBRCH(8)     = NBRCH(SS(8))
      NBRCH(SS(8)) = NBRCH(SS(8)) + 0

!---------------------------------------
! Electrical Node Lookup 
!---------------------------------------


!---------------------------------------
! Generated code from module definition 
!---------------------------------------


! 10:[const] Real Constant 'HV Vol base'
      HV_Vol_base = 220.0

! 20:[const] Real Constant 'MV Vol base'
      MV_Vol_base = 33.0

! 30:[const] Real Constant 'Freq base'
      Fsys = 50.0

! 40:[const] Real Constant 'LV Vol base'
      LV_Vol_base1 = 0.63

! 50:[const] Real Constant 'P_Base_PV'
      P_Base_PV = 4200.0

! 60:[const] Real Constant 'LV Vol base'
      LV_Vol_base2 = 0.66

! 70:[const] Real Constant 'P_Base_BESS'
      P_Base_BESS = 4400.0

! 80:[const] Real Constant 
      RT_16 = 127947.2

! 90:[const] Real Constant 'Q_Base_PV'
      Q_Base_PV = 2520.0

! 100:[const] Real Constant 
      RT_18 = 119000.0

! 110:[const] Real Constant 'Q_Base_BESS'
      Q_Base_BESS = 2640.0

! 120:[const] Real Constant 
      RT_19 = -100000.0

! 130:[consti] Integer Constant 'HV_BRK'
      POI_BRK = 0

! 140:[const] Real Constant 
      RT_20 = 47005.0

! 150:[const] Real Constant 
      RT_21 = -47005.0

! 160:[unity] Type/Shape conversion block 

! 170:[const] Real Constant 
      RT_39 = 119000.0

! 180:[const] Real Constant 'Gcb'
      GcbStt = 0.0

! 190:[const] Real Constant 
      RT_40 = 1785.0

! 200:[const] Real Constant 
      RT_17 = 50.0

! 210:[InvFbDummy]  
      CALL InvFbDummyDyn_Begin()


! 220:[const] Real Constant 
      RT_38 = 127.947

! 230:[var] Variable Input Slider 'Vstp_manual'

! 240:[const] Real Constant 
      RT_34 = 127.947

! 250:[var] Variable Input Slider 'Qstp_manual'

! 260:[var_switch] Two State Switch 'PV'

! 270:[unity] Type/Shape conversion block 

! 280:[var] Variable Input Slider 'Pstp_manual'

! 290:[unity] Type/Shape conversion block 

! 300:[var] Variable Input Slider 'PFstp_manual'

! 310:[consti] Integer Constant 'PCU1_BRK'
      IT_6 = 0

! 320:[inv] Interpolated Logic Inverter 

! 330:[const] Real Constant 
      RT_9 = 0.0

! 340:[var] Variable Input Slider 'P1stp_manual'

! 350:[consti] Integer Constant 'PCU2_BRK'
      PCU2_BRK = 0

! 360:[const] Real Constant 
      RT_11 = 0.0

! 370:[consti] Integer Constant 'MVBRK'
      MVBRK = 0

! 380:[var] Variable Input Slider 'Irradiance'

! 390:[time-sig] Output of Simulation Time 

! 400:[const] Real Constant 'inf_BRK_time'
      RT_25 = 1000.0

! 410:[consti] Integer Constant 
      No_PCU1 = 36

! 420:[const] Real Constant 
      RT_22 = 25.0

! 440:[xfmr_2w_scaled] 3 Phase 2 Winding Transformer - With Scaling! 'T1_2'

! 470:[const] Real Constant 
      RT_1 = 1.03

! 480:[DPS_Dummy]  
      CALL DPS_DummyDyn_Begin()


! 490:[breaker3] 3 Phase Breaker 'MVBRK'
      CALL COMPONENT_ID(ICALL_NO,943764813)
      RTCF(NRTCF) = ABS(0.0)
      NRTCF = NRTCF + 1

! 520:[breaker3] 3 Phase Breaker 'POI_BRK'
      CALL COMPONENT_ID(ICALL_NO,715073575)
      RTCF(NRTCF) = ABS(0.0)
      NRTCF = NRTCF + 1

! 540:[consti] Integer Constant 
      No_PCU2 = 40

! 570:[GridSource]  'GridSource_1'
      CALL GridSourceDyn_Begin(0, 0.0, 0.0, 0.0, 0.0, 0.999776463133, 0,&
     & 0.0, 0.0, 50.0, 50.0, 51.0, 51.0, 51.5, 51.5, 50.0, 50.0, 0.0, 5.&
     &0, 5.5, 1, 10.0, 10.5, 15.0, 15.5, 25.0, 0.0, 0.0, 0.0, 0, 0, 8, 1&
     &.02, 1, 1.02, 0.918, 0.918, 1.02, 1.02, 0.0, 0.0, 0.0, 0.0, 0.0, 5&
     &.0, 5.001, 10.0, 10.001, 15.0, 0.0, 0.0, 0.0, 0.0, 1, 0, 6, 0.1, 1&
     &0.0, 0, 0.0, 5.0, 0.0, 1, 0.0, 90.0, 90.0, 0.0, 0.0, 0.0, 0.0, 0.0&
     &, 0.0, 0.0, 5.0, 5.01, 10.0, 10.01, 15.0, 15.01, 0.0, 0.0, 0.0, 6)


! 580:[xfmr_2w_scaled] 3 Phase 2 Winding Transformer - With Scaling! 'T1_2'

! 620:[breaker3] 3 Phase Breaker 'PCU2_BRK'
      CALL COMPONENT_ID(ICALL_NO,1701648050)
      RTCF(NRTCF) = ABS(0.0)
      NRTCF = NRTCF + 1

! 640:[DPS_Dummy]  
      CALL DPS_DummyDyn_Begin()


! 660:[FaultBlock]  'FaultBlock_1'
      CALL FaultBlockDyn_Begin(0.0, 0.0, 0, 0.0, 0.0, 0.0, 0, 0.0, 0.0, &
     &0.0, 0, 0.0, 0.0, 0.0, 0, 0.0, 0.0, 0.0, 0, 0.0, 0.0, 0.0, 0, 0.0,&
     & 0.0, 0.0, 0, 0.0, 0.0, 0.0, 0, 0.0, 0.0, 0.0, 0, 0.0, 0.0, 0.0, 0&
     &, 0.0, 0.0, 0.0, 0, 0.0, 0.0, 0.0, 0, 0.0, 0.0, 0.0, 0, 0.0, 30.0,&
     & 0.43, 0, 18.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, &
     &0.0, 0.0, 0.0, 3.0, 1, 1, 5.0, 0.43, 0, 18.0, 3.0, 50.0, 0.0, 0.0,&
     & 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0)


! 670:[breaker3] 3 Phase Breaker 'PCU2_BRK'
      CALL COMPONENT_ID(ICALL_NO,151804995)
      RTCF(NRTCF) = ABS(0.0)
      NRTCF = NRTCF + 1

! 700:[inv] Interpolated Logic Inverter 

! 710:[bin_delay] Timed ON/OFF Logic Transition 

! 720:[unity] Type/Shape conversion block 

! 730:[sumjct] Summing/Differencing Junctions 

! 770:[SymmetricalComponentsCalc_1_1]  'SymmetricalComponentsCalc_1_1'
      CALL SymmetricalComponentsCalc_1_1Dyn_Begin(50.0)


! 780:[SymmetricalComponentsCalc]  'SymmetricalComponentsCalc_1'
      CALL SymmetricalComponentsCalcDyn_Begin(50.0)


! 790:[div] Divider 

! 800:[div] Divider 

! 810:[SymmetricalComponentsCalc]  'SymmetricalComponentsCalc_1'
      CALL SymmetricalComponentsCalcDyn_Begin(50.0)


! 820:[setpointProfiles]  'setpointProfiles_1'
      CALL setpointProfilesDyn_Begin(0.0, 1.02, 1.02, 1.0, 1.05, 1.05, 1&
     &.02, 1.02, 0.0, 0.0, 0.0, 4.0, 4.001, 2, 10.0, 10.001, 100.0, 0.0,&
     & 0.0, 0.0, 0.0, 0.0, 6, 1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.&
     &0, 0.0, 0.0, 0.0, 0.0, 0.0, 2, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, &
     &0.0, 10, 1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.&
     &0, 0.0, 0.0, 2, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 10, 1.0, 0&
     &.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 2,&
     & 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 10, 1.0, 0.0, 0.0, 0.0, 1&
     &.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 2, 0.0, 0.0, 0.0,&
     & 0.0, 0.0, 0.0, 0.0, 0.0, 10, 1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0&
     &.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 2, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,&
     & 0.0, 0.0, 10, 1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0&
     &.0, 0.0, 0.0, 0.0, 2, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 10, &
     &1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0&
     &.0, 2, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0, 1000.0)


! 830:[gain] Gain Block 

! 840:[gain] Gain Block 

! 860:[gain] Gain Block 

! 870:[compar] Two Input Comparator 

! 880:[TapCtrl_1]  
      CALL TapCtrl_1Dyn_Begin(1, 220.0, 0.0125, 0.64, 8, 8, 3.0, 3.0, 1)


! 890:[gain] Gain Block 

! 900:[datamerge] Merges data signals into an array 

! 910:[Aggr_Fb_Scaled]  
      CALL Aggr_Fb_ScaledDyn_Begin()


! 920:[select] Two Input Selector 
      RTCI(NRTCI) = 1
      NRTCI = NRTCI + 1

! 930:[DDSRF_PLL_1]  
      CALL DDSRF_PLL_1Dyn_Begin(220.0, 50.0)


! 940:[datatap] Scalar/Array Tap 

! 950:[datatap] Scalar/Array Tap 

! 960:[datatap] Scalar/Array Tap 

! 970:[datamerge] Merges data signals into an array 

! 980:[datamerge] Merges data signals into an array 

! 990:[datamerge] Merges data signals into an array 

! 1000:[HyCtl]  'HyCon1'
      CALL HyCtlDyn_Begin(1, 0, 50.0, 3000.0, 21521, 0.04, 1.2, 0.0, 0.0&
     &, 0.0, 0.0)


! 1010:[SCxxxx] SMA  SC xxxx 
      CALL SCxxxxDyn_Begin(51, 16641, 9, 0, 3000)


! 1020:[Aggr_Fb_Scaled]  
      CALL Aggr_Fb_ScaledDyn_Begin()


! 1030:[SCxxxx] SMA  SC xxxx 
      CALL SCxxxxDyn_Begin(57, 82433, 9, 0, 3000)


! 1040:[div] Divider 

! 1050:[hardlimit] Hard Limiter 

! 1060:[div] Divider 

! 1070:[square] Square 

! 1080:[hardlimit] Hard Limiter 

! 1090:[div] Divider 

! 1100:[square] Square 

! 1110:[sumjct] Summing/Differencing Junctions 

! 1120:[datatap] Scalar/Array Tap 

! 1130:[sqrt] Square Root 

! 1140:[datatap] Scalar/Array Tap 

! 1150:[datatap] Scalar/Array Tap 

! 1160:[datatap] Scalar/Array Tap 

! 1170:[datatap] Scalar/Array Tap 

! 1180:[datatap] Scalar/Array Tap 

! 1190:[datatap] Scalar/Array Tap 

! 1200:[gain] Gain Block 

! 1210:[gain] Gain Block 

! 1220:[gain] Gain Block 

! 1230:[div] Divider 

! 1240:[datatap] Scalar/Array Tap 

! 1250:[datatap] Scalar/Array Tap 

! 1260:[datatap] Scalar/Array Tap 

! 1270:[datatap] Scalar/Array Tap 

! 1280:[breaker3] 3 Phase Breaker 'PCU1_BRK'
      CALL COMPONENT_ID(ICALL_NO,1365129883)
      RTCF(NRTCF) = ABS(0.0)
      NRTCF = NRTCF + 1

! 1300:[breaker3] 3 Phase Breaker 'inf_BRK'
      CALL COMPONENT_ID(ICALL_NO,371043801)
      RTCF(NRTCF) = ABS(0.0)
      NRTCF = NRTCF + 1

! 1310:[xfmr-3p2w] 3 Phase 2 Winding Transformer 'T2'
      CALL COMPONENT_ID(ICALL_NO,581045017)
      RVD1_1 = ONE_3RD*170.0
      RVD1_2 = 220.0*SQRT_1BY3
      RVD1_3 = 33.0
      CALL E_TF2W_CFG((IXFMR + 7),1,RVD1_1,50.0,0.168,0.003529,RVD1_2,RV&
     &D1_3,1.0)
      CALL E_TF2W_CFG((IXFMR + 8),1,RVD1_1,50.0,0.168,0.003529,RVD1_2,RV&
     &D1_3,1.0)
      CALL E_TF2W_CFG((IXFMR + 9),1,RVD1_1,50.0,0.168,0.003529,RVD1_2,RV&
     &D1_3,1.0)
      IF (0.0 .LT. 1.0E-6) THEN
        RVD1_5 = 0.0
        RVD1_6 = 0.0
        IVD1_1 = 0
      ELSE
        RVD1_6 = 0.0
        RVD1_4 = 6.0/(170.0*RVD1_6)
        RVD1_5 = RVD1_4*RVD1_2*RVD1_2
        RVD1_6 = RVD1_4*RVD1_3*RVD1_3
        IVD1_1 = 1
      ENDIF
      CALL E_BRANCH_CFG( (IBRCH(1)+44),SS(1),IVD1_1,0,0,RVD1_5,0.0,0.0)
      CALL E_BRANCH_CFG( (IBRCH(1)+45),SS(1),IVD1_1,0,0,RVD1_5,0.0,0.0)
      CALL E_BRANCH_CFG( (IBRCH(1)+46),SS(1),IVD1_1,0,0,RVD1_5,0.0,0.0)
      CALL E_BRANCH_CFG( (IBRCH(1)+47),SS(1),IVD1_1,0,0,RVD1_6,0.0,0.0)
      CALL E_BRANCH_CFG( (IBRCH(1)+48),SS(1),IVD1_1,0,0,RVD1_6,0.0,0.0)
      CALL E_BRANCH_CFG( (IBRCH(1)+49),SS(1),IVD1_1,0,0,RVD1_6,0.0,0.0)
      CALL TSAT1_CFG( (IBRCH(1)+50), (IBRCH(1)+51), (IBRCH(1)+52),SS(1),&
     &RVD1_1,RVD1_2,0.2,1.25,50.0,1.0,1.0,0.1)

! 1320:[pgb] Output Channel 'Tap_position'

! 1330:[breaker3] 3 Phase Breaker 'PCU1_BRK'
      CALL COMPONENT_ID(ICALL_NO,2042303879)
      RTCF(NRTCF) = ABS(0.0)
      NRTCF = NRTCF + 1

! 1340:[pgb] Output Channel 'maintap'

! 1350:[photovoltaic_source] photovoltaic source 'PVarray1'
      CALL COMPONENT_ID(ICALL_NO,1473112425)
      CALL PHOTOVOLT1_CFG(24,2000,72,1,0.02,1000.0,0.01,1.5,1.103,1.0e-1&
     &2,0.0025,0.001,1000.0,25.0)

! 1380:[pgb] Output Channel 'Itot_PoC'

! 1390:[div] Divider 

! 1410:[div] Divider 

! 1420:[div] Divider 

! 1430:[pgb] Output Channel 'Ineg_PoC'

! 1440:[div] Divider 

! 1450:[div] Divider 

! 1460:[div] Divider 

! 1470:[pgb] Output Channel 'Ipos_PoC'

! 1480:[pgb] Output Channel 'Iq_PoC'

! 1490:[pgb] Output Channel 'Izero_PoC'

! 1500:[div] Divider 

! 1510:[div] Divider 

! 1520:[pgb] Output Channel 'FRT_flag_POC'

! 1540:[pgb] Output Channel 'FRT_flag_BESS'

! 1560:[pgb] Output Channel 'FRT_flag_PV'

! 1570:[pgb] Output Channel 'Vneg_PoC'

! 1590:[pgb] Output Channel 'Id_PoC'

! 1600:[pgb] Output Channel 'Vpos_PoC'

! 1610:[pgb] Output Channel 'Qout_INV_BESS'

! 1620:[pgb] Output Channel 'BESSspt_MW'

! 1640:[pgb] Output Channel 'Vzero_PoC'

! 1660:[pgb] Output Channel 'Pout_INV_BESS'

! 1670:[pgb] Output Channel 'Qspt_MVAr'

! 1700:[DEBUG_HyCon_Scope]  
      CALL DEBUG_HyCon_ScopeDyn_Begin()


! 1710:[pgb] Output Channel 'Qout_INV_PV'

! 1720:[pgb] Output Channel 'Pspt_MW'

! 1740:[pgb] Output Channel 'Pout_INV_PV'

! 1750:[pgb] Output Channel 'PoiPfSpt'

! 1770:[pgb] Output Channel 'Iqneg_PoC'

! 1790:[pgb] Output Channel 'PoiVolSpt_pu'

! 1810:[pgb] Output Channel 'Qcmd_PPC_to_INV_BESS'

! 1820:[pgb] Output Channel 'Iqpos_PoC'

! 1830:[pgb] Output Channel 'Iq_neg_pos_ratio'

! 1860:[pgb] Output Channel 'Hz_POI'

! 1870:[pgb] Output Channel 'Pcmd_PPC_to_INV_BESS'

! 1880:[pgb] Output Channel 'Iqzero_PoC'

! 1890:[pgb] Output Channel 'PCU2_V_MV_pu'

! 1900:[pgb] Output Channel 'PCU1_V_MV_pu'

! 1920:[pgb] Output Channel 'Qcmd_PPC_to_INV_PV'

! 1930:[SC_Scope] Scopes for monitoring 
      CALL SC_ScopeDyn_Begin()


! 1960:[pgb] Output Channel 'Pcmd_PPC_to_INV_PV'

! 2020:[pgb] Output Channel 'PLANT_V_HV_pu'

! 2040:[SC_Scope] Scopes for monitoring 
      CALL SC_ScopeDyn_Begin()


! 2050:[pgb] Output Channel 'PCU2_V_LV_pu'

! 2060:[pgb] Output Channel 'PCU1_V_LV_pu'

! 1:[newpi] Coupled Pi Section Transmission Line 'Line1'
      CALL COMPONENT_ID(ICALL_NO,1154644512)
      CALL PI3_SECTION_CFG(3,1,0, 33.0,100.0,50.0,1.0,0.001732,0.002928,&
     &0.012514,0.007515,0.001222,0.012514,RVD1_1,RVD1_2,RVD1_3,RVD1_4,RV&
     &D1_5,RVD1_6,IVD1_1,IVD1_2,IVD1_3,IVD1_4)
      CALL E_BRANCH_CFG( (IBRCH(1)+71),SS(1),0,0,IVD1_3,0.0,0.0,RVD1_6)
      CALL E_BRANCH_CFG( (IBRCH(1)+72),SS(1),0,0,IVD1_3,0.0,0.0,RVD1_6)
      CALL E_BRANCH_CFG( (IBRCH(1)+73),SS(1),0,0,IVD1_3,0.0,0.0,RVD1_6)
      CALL E_BRANCH_CFG( (IBRCH(1)+74),SS(1),0,0,IVD1_3,0.0,0.0,RVD1_6)
      CALL E_BRANCH_CFG( (IBRCH(1)+75),SS(1),0,0,IVD1_3,0.0,0.0,RVD1_6)
      CALL E_BRANCH_CFG( (IBRCH(1)+76),SS(1),0,0,IVD1_3,0.0,0.0,RVD1_6)
      CALL E_BRANCH_CFG( (IBRCH(1)+77),SS(1),0,0,IVD1_4,0.0,0.0,RVD1_3)
      CALL E_BRANCH_CFG( (IBRCH(1)+78),SS(1),0,0,IVD1_4,0.0,0.0,RVD1_3)
      CALL E_BRANCH_CFG( (IBRCH(1)+79),SS(1),0,0,IVD1_4,0.0,0.0,RVD1_3)
      CALL E_BRANCH_CFG( (IBRCH(1)+80),SS(1),0,0,IVD1_4,0.0,0.0,RVD1_3)
      CALL E_BRANCH_CFG( (IBRCH(1)+81),SS(1),0,0,IVD1_4,0.0,0.0,RVD1_3)
      CALL E_BRANCH_CFG( (IBRCH(1)+82),SS(1),0,0,IVD1_4,0.0,0.0,RVD1_3)
      CALL COUPLED_PI3_TF_CFG((IXFMR + 10),2,RVD1_1,RVD1_2,RVD1_4,RVD1_5&
     &)

! 1:[newpi] Coupled Pi Section Transmission Line 'Line132'
      CALL COMPONENT_ID(ICALL_NO,56359452)
      CALL PI3_SECTION_CFG(3,1,0, 220.0,100.0,50.0,1.0,0.000156,0.000524&
     &,0.006823,0.000113,0.000524,0.006823,RVD1_1,RVD1_2,RVD1_3,RVD1_4,R&
     &VD1_5,RVD1_6,IVD1_1,IVD1_2,IVD1_3,IVD1_4)
      CALL E_BRANCH_CFG( (IBRCH(1)+101),SS(1),0,0,IVD1_3,0.0,0.0,RVD1_6)
      CALL E_BRANCH_CFG( (IBRCH(1)+102),SS(1),0,0,IVD1_3,0.0,0.0,RVD1_6)
      CALL E_BRANCH_CFG( (IBRCH(1)+103),SS(1),0,0,IVD1_3,0.0,0.0,RVD1_6)
      CALL E_BRANCH_CFG( (IBRCH(1)+104),SS(1),0,0,IVD1_3,0.0,0.0,RVD1_6)
      CALL E_BRANCH_CFG( (IBRCH(1)+105),SS(1),0,0,IVD1_3,0.0,0.0,RVD1_6)
      CALL E_BRANCH_CFG( (IBRCH(1)+106),SS(1),0,0,IVD1_3,0.0,0.0,RVD1_6)
      CALL E_BRANCH_CFG( (IBRCH(1)+107),SS(1),0,0,IVD1_4,0.0,0.0,RVD1_3)
      CALL E_BRANCH_CFG( (IBRCH(1)+108),SS(1),0,0,IVD1_4,0.0,0.0,RVD1_3)
      CALL E_BRANCH_CFG( (IBRCH(1)+109),SS(1),0,0,IVD1_4,0.0,0.0,RVD1_3)
      CALL E_BRANCH_CFG( (IBRCH(1)+110),SS(1),0,0,IVD1_4,0.0,0.0,RVD1_3)
      CALL E_BRANCH_CFG( (IBRCH(1)+111),SS(1),0,0,IVD1_4,0.0,0.0,RVD1_3)
      CALL E_BRANCH_CFG( (IBRCH(1)+112),SS(1),0,0,IVD1_4,0.0,0.0,RVD1_3)
      CALL COUPLED_PI3_TF_CFG((IXFMR + 11),2,RVD1_1,RVD1_2,RVD1_4,RVD1_5&
     &)

! 1:[source1] Single Phase Voltage Source Model 1 'Battery'
      CALL COMPONENT_ID(ICALL_NO,1439784191)
      CALL ESYS651_CFG(2,1,1,0,0,SS(6), (IBRCH(6)+1),0,0,0,0,0,50.0,0.0,&
     &PI_BY2,1.3,0.0,0.0,1.0,1.3,1.3,0.01,80.0,2.0,1.0,1.0,0.1,0.0,0.0,0&
     &.0,0.0)

! 1:[newpi] Coupled Pi Section Transmission Line 'Line1'
      CALL COMPONENT_ID(ICALL_NO,662294091)
      CALL PI3_SECTION_CFG(3,1,0, 33.0,100.0,50.0,1.0,0.000176,0.00012,0&
     &.000127,0.000377,5.7e-05,0.000127,RVD1_1,RVD1_2,RVD1_3,RVD1_4,RVD1&
     &_5,RVD1_6,IVD1_1,IVD1_2,IVD1_3,IVD1_4)
      CALL E_BRANCH_CFG( (IBRCH(1)+83),SS(1),0,0,IVD1_3,0.0,0.0,RVD1_6)
      CALL E_BRANCH_CFG( (IBRCH(1)+84),SS(1),0,0,IVD1_3,0.0,0.0,RVD1_6)
      CALL E_BRANCH_CFG( (IBRCH(1)+85),SS(1),0,0,IVD1_3,0.0,0.0,RVD1_6)
      CALL E_BRANCH_CFG( (IBRCH(1)+86),SS(1),0,0,IVD1_3,0.0,0.0,RVD1_6)
      CALL E_BRANCH_CFG( (IBRCH(1)+87),SS(1),0,0,IVD1_3,0.0,0.0,RVD1_6)
      CALL E_BRANCH_CFG( (IBRCH(1)+88),SS(1),0,0,IVD1_3,0.0,0.0,RVD1_6)
      CALL E_BRANCH_CFG( (IBRCH(1)+89),SS(1),0,0,IVD1_4,0.0,0.0,RVD1_3)
      CALL E_BRANCH_CFG( (IBRCH(1)+90),SS(1),0,0,IVD1_4,0.0,0.0,RVD1_3)
      CALL E_BRANCH_CFG( (IBRCH(1)+91),SS(1),0,0,IVD1_4,0.0,0.0,RVD1_3)
      CALL E_BRANCH_CFG( (IBRCH(1)+92),SS(1),0,0,IVD1_4,0.0,0.0,RVD1_3)
      CALL E_BRANCH_CFG( (IBRCH(1)+93),SS(1),0,0,IVD1_4,0.0,0.0,RVD1_3)
      CALL E_BRANCH_CFG( (IBRCH(1)+94),SS(1),0,0,IVD1_4,0.0,0.0,RVD1_3)
      CALL COUPLED_PI3_TF_CFG((IXFMR + 12),2,RVD1_1,RVD1_2,RVD1_4,RVD1_5&
     &)

! 1:[capacitive_load] Three phase capacitive load 
      CALL COMPONENT_ID(ICALL_NO,1696299870)
      CALL CAPLOAD_CFG(SS(1), (IBRCH(1)+31), (IBRCH(1)+32), (IBRCH(1)+33&
     &),0,1.0,33.0,50.0)

! 1:[capacitive_load] Three phase capacitive load 
      CALL COMPONENT_ID(ICALL_NO,1283867777)
      CALL CAPLOAD_CFG(SS(1), (IBRCH(1)+34), (IBRCH(1)+35), (IBRCH(1)+36&
     &),0,3.0,33.0,50.0)

! 1:[capacitive_load] Three phase capacitive load 
      CALL COMPONENT_ID(ICALL_NO,1645242931)
      CALL CAPLOAD_CFG(SS(1), (IBRCH(1)+37), (IBRCH(1)+38), (IBRCH(1)+39&
     &),0,6.0,33.0,50.0)

! 1:[capacitive_load] Three phase capacitive load 
      CALL COMPONENT_ID(ICALL_NO,985103063)
      CALL CAPLOAD_CFG(SS(1), (IBRCH(1)+40), (IBRCH(1)+41), (IBRCH(1)+42&
     &),0,2.0,33.0,50.0)

      RETURN
      END

!=======================================================================

      SUBROUTINE MainOut_Begin()

!---------------------------------------
! Standard includes 
!---------------------------------------

      INCLUDE 'nd.h'
      INCLUDE 'emtconst.h'
      INCLUDE 's0.h'
      INCLUDE 's1.h'
      INCLUDE 's4.h'
      INCLUDE 'branches.h'
      INCLUDE 'pscadv3.h'
      INCLUDE 'radiolinks.h'
      INCLUDE 'rtconfig.h'

!---------------------------------------
! Function/Subroutine Declarations 
!---------------------------------------

!     SUBR    InvFbDummyOut_Begin  ! 
!     SUBR    DPS_DummyOut_Begin  ! 
!     SUBR    GridSourceOut_Begin  ! 
!     SUBR    FaultBlockOut_Begin  ! 
!     SUBR    SymmetricalComponentsCalc_1_1Out_Begin  ! 
!     SUBR    SymmetricalComponentsCalcOut_Begin  ! 
!     SUBR    setpointProfilesOut_Begin  ! 
!     SUBR    TapCtrl_1Out_Begin  ! 
!     SUBR    Aggr_Fb_ScaledOut_Begin  ! 
!     SUBR    DDSRF_PLL_1Out_Begin  ! 
!     SUBR    HyCtlOut_Begin  ! 
!     SUBR    SCxxxxOut_Begin  ! SMA  SC xxxx
!     SUBR    DEBUG_HyCon_ScopeOut_Begin  ! 
!     SUBR    SC_ScopeOut_Begin  ! Scopes for monitoring

!---------------------------------------
! Variable Declarations 
!---------------------------------------


! Subroutine Arguments

! Electrical Node Indices
      INTEGER  PCU1_LVBUS(3), PCU2_LVBUS(3)
      INTEGER  NT_14(3), NT_36, NT_37, NT_38

! Control Signals
      INTEGER  No_PCU1, PCU2_BRK, POI_BRK, MVBRK
      INTEGER  No_PCU2, IT_6
      REAL     RT_1, RT_9, RT_11, RT_16, RT_17
      REAL     RT_18, RT_19, RT_20, RT_21, RT_22
      REAL     Fsys, LV_Vol_base1, MV_Vol_base
      REAL     RT_25, P_Base_PV, P_Base_BESS
      REAL     HV_Vol_base, Q_Base_PV
      REAL     Q_Base_BESS, RT_34, RT_38, GcbStt
      REAL     RT_39, RT_40, LV_Vol_base2

! Internal Variables
      INTEGER  IVD1_1

! Indexing variables
      INTEGER ICALL_NO                            ! Module call num
      INTEGER IT_0                                ! Storage Indices
      INTEGER ISUBS, SS(8), IBRCH(8), INODE       ! SS/Node/Branch/Xfmr
      INTEGER IXFMR


!---------------------------------------
! Local Indices 
!---------------------------------------


! Increment and assign runtime configuration call indices

      ICALL_NO  = NCALL_NO
      NCALL_NO  = NCALL_NO + 1

! Increment global storage indices

      NCX       = NCX + 0
      INODE     = NNODE + 2
      NNODE     = NNODE + 102
      IXFMR     = NXFMR
      NXFMR     = NXFMR + 12
      NCSCS     = NCSCS + 0
      NCSCR     = NCSCR + 0

! Initialize Subsystem Mapping

      ISUBS = NSUBS + 0
      NSUBS = NSUBS + 8

      DO IT_0 = 1,8
         SS(IT_0) = SUBS(ISUBS + IT_0)
      END DO

! Initialize Branch Mapping.

      IBRCH(1)     = NBRCH(SS(1))
      NBRCH(SS(1)) = NBRCH(SS(1)) + 119


      IBRCH(2)     = NBRCH(SS(2))
      NBRCH(SS(2)) = NBRCH(SS(2)) + 3


      IBRCH(3)     = NBRCH(SS(3))
      NBRCH(SS(3)) = NBRCH(SS(3)) + 1


      IBRCH(4)     = NBRCH(SS(4))
      NBRCH(SS(4)) = NBRCH(SS(4)) + 0


      IBRCH(5)     = NBRCH(SS(5))
      NBRCH(SS(5)) = NBRCH(SS(5)) + 0


      IBRCH(6)     = NBRCH(SS(6))
      NBRCH(SS(6)) = NBRCH(SS(6)) + 3


      IBRCH(7)     = NBRCH(SS(7))
      NBRCH(SS(7)) = NBRCH(SS(7)) + 0


      IBRCH(8)     = NBRCH(SS(8))
      NBRCH(SS(8)) = NBRCH(SS(8)) + 0

!---------------------------------------
! Electrical Node Lookup 
!---------------------------------------

      NT_36 = NODE(INODE + 26)
      NT_37 = NODE(INODE + 27)
      NT_38 = NODE(INODE + 25)

! Array (1:3) quantities...
      DO IT_0 = 1,3
         PCU1_LVBUS(IT_0) = NODE(INODE + 0 + IT_0)
         PCU2_LVBUS(IT_0) = NODE(INODE + 15 + IT_0)
         NT_14(IT_0) = NODE(INODE + 42 + IT_0)
      END DO

!---------------------------------------
! Generated code from module definition 
!---------------------------------------


! 10:[const] Real Constant 'HV Vol base'
      HV_Vol_base = 220.0

! 20:[const] Real Constant 'MV Vol base'
      MV_Vol_base = 33.0

! 30:[const] Real Constant 'Freq base'
      Fsys = 50.0

! 40:[const] Real Constant 'LV Vol base'
      LV_Vol_base1 = 0.63

! 50:[const] Real Constant 'P_Base_PV'
      P_Base_PV = 4200.0

! 60:[const] Real Constant 'LV Vol base'
      LV_Vol_base2 = 0.66

! 70:[const] Real Constant 'P_Base_BESS'
      P_Base_BESS = 4400.0

! 80:[const] Real Constant 
      RT_16 = 127947.2

! 90:[const] Real Constant 'Q_Base_PV'
      Q_Base_PV = 2520.0

! 100:[const] Real Constant 
      RT_18 = 119000.0

! 110:[const] Real Constant 'Q_Base_BESS'
      Q_Base_BESS = 2640.0

! 120:[const] Real Constant 
      RT_19 = -100000.0

! 130:[consti] Integer Constant 'HV_BRK'
      POI_BRK = 0

! 140:[const] Real Constant 
      RT_20 = 47005.0

! 150:[const] Real Constant 
      RT_21 = -47005.0

! 170:[const] Real Constant 
      RT_39 = 119000.0

! 180:[const] Real Constant 'Gcb'
      GcbStt = 0.0

! 190:[const] Real Constant 
      RT_40 = 1785.0

! 200:[const] Real Constant 
      RT_17 = 50.0

! 210:[InvFbDummy]  
      CALL InvFbDummyOut_Begin()


! 220:[const] Real Constant 
      RT_38 = 127.947

! 240:[const] Real Constant 
      RT_34 = 127.947

! 310:[consti] Integer Constant 'PCU1_BRK'
      IT_6 = 0

! 330:[const] Real Constant 
      RT_9 = 0.0

! 350:[consti] Integer Constant 'PCU2_BRK'
      PCU2_BRK = 0

! 360:[const] Real Constant 
      RT_11 = 0.0

! 370:[consti] Integer Constant 'MVBRK'
      MVBRK = 0

! 400:[const] Real Constant 'inf_BRK_time'
      RT_25 = 1000.0

! 410:[consti] Integer Constant 
      No_PCU1 = 36

! 420:[const] Real Constant 
      RT_22 = 25.0

! 430:[multimeter] Multimeter 
      IVD1_1 = NRTCF
      NRTCF  = NRTCF + 5
      IF (ABS(1.0) .GT. 1.0E-20) THEN
        RTCF(IVD1_1) = 1.0/ABS(1.0)
      ELSE
        RTCF(IVD1_1) = 1.0
      ENDIF
      IF (ABS(1.0) .GT. 1.0E-20) THEN
        RTCF(IVD1_1+1) = 1.0/ABS(1.0)
      ELSE
        RTCF(IVD1_1+1) = 1.0
      ENDIF
      RTCF(IVD1_1+2) = 0.02
      RTCF(IVD1_1+3) = Fsys
      IF (ABS(1.0) .GT. 1.0E-20) THEN
        RTCF(IVD1_1+4) = 1.0/ABS(1.0)
      ELSE
        RTCF(IVD1_1+4) = 1.0
      ENDIF

! 450:[multimeter] Multimeter 
      IVD1_1 = NRTCF
      NRTCF  = NRTCF + 5
      IF (ABS(1.0) .GT. 1.0E-20) THEN
        RTCF(IVD1_1) = 1.0/ABS(1.0)
      ELSE
        RTCF(IVD1_1) = 1.0
      ENDIF
      IF (ABS(1.0) .GT. 1.0E-20) THEN
        RTCF(IVD1_1+1) = 1.0/ABS(1.0)
      ELSE
        RTCF(IVD1_1+1) = 1.0
      ENDIF
      RTCF(IVD1_1+2) = 0.05
      RTCF(IVD1_1+3) = Fsys

! 460:[multimeter] Multimeter 
      IVD1_1 = NRTCF
      NRTCF  = NRTCF + 5
      IF (ABS(1.0) .GT. 1.0E-20) THEN
        RTCF(IVD1_1) = 1.0/ABS(1.0)
      ELSE
        RTCF(IVD1_1) = 1.0
      ENDIF
      IF (ABS(1.0) .GT. 1.0E-20) THEN
        RTCF(IVD1_1+1) = 1.0/ABS(1.0)
      ELSE
        RTCF(IVD1_1+1) = 1.0
      ENDIF
      RTCF(IVD1_1+2) = 0.02
      RTCF(IVD1_1+3) = 50.0

! 470:[const] Real Constant 
      RT_1 = 1.03

! 480:[DPS_Dummy]  
      CALL DPS_DummyOut_Begin()


! 500:[multimeter] Multimeter 
      IVD1_1 = NRTCF
      NRTCF  = NRTCF + 5
      IF (ABS(1.0) .GT. 1.0E-20) THEN
        RTCF(IVD1_1) = 1.0/ABS(1.0)
      ELSE
        RTCF(IVD1_1) = 1.0
      ENDIF
      IF (ABS(33.0) .GT. 1.0E-20) THEN
        RTCF(IVD1_1+1) = 1.0/ABS(33.0)
      ELSE
        RTCF(IVD1_1+1) = 1.0
      ENDIF
      RTCF(IVD1_1+2) = 0.02
      RTCF(IVD1_1+3) = 50.0
      IF (ABS(1.0) .GT. 1.0E-20) THEN
        RTCF(IVD1_1+4) = 1.0/ABS(1.0)
      ELSE
        RTCF(IVD1_1+4) = 1.0
      ENDIF

! 530:[multimeter] Multimeter 
      IVD1_1 = NRTCF
      NRTCF  = NRTCF + 5
      IF (ABS(1.0) .GT. 1.0E-20) THEN
        RTCF(IVD1_1) = 1.0/ABS(1.0)
      ELSE
        RTCF(IVD1_1) = 1.0
      ENDIF
      IF (ABS(220.0) .GT. 1.0E-20) THEN
        RTCF(IVD1_1+1) = 1.0/ABS(220.0)
      ELSE
        RTCF(IVD1_1+1) = 1.0
      ENDIF
      RTCF(IVD1_1+2) = 0.02
      RTCF(IVD1_1+3) = Fsys
      IF (ABS(1.0) .GT. 1.0E-20) THEN
        RTCF(IVD1_1+4) = 1.0/ABS(1.0)
      ELSE
        RTCF(IVD1_1+4) = 1.0
      ENDIF

! 540:[consti] Integer Constant 
      No_PCU2 = 40

! 560:[multimeter] Multimeter 
      IVD1_1 = NRTCF
      NRTCF  = NRTCF + 5
      IF (ABS(1.0) .GT. 1.0E-20) THEN
        RTCF(IVD1_1) = 1.0/ABS(1.0)
      ELSE
        RTCF(IVD1_1) = 1.0
      ENDIF
      IF (ABS(1.0) .GT. 1.0E-20) THEN
        RTCF(IVD1_1+1) = 1.0/ABS(1.0)
      ELSE
        RTCF(IVD1_1+1) = 1.0
      ENDIF
      RTCF(IVD1_1+2) = 0.02
      RTCF(IVD1_1+3) = Fsys
      IF (ABS(1.0) .GT. 1.0E-20) THEN
        RTCF(IVD1_1+4) = 1.0/ABS(1.0)
      ELSE
        RTCF(IVD1_1+4) = 1.0
      ENDIF

! 570:[GridSource]  'GridSource_1'
      CALL GridSourceOut_Begin(0, 0.0, 0.0, 0.0, 0.0, 0.999776463133, 0,&
     & 0.0, 0.0, 50.0, 50.0, 51.0, 51.0, 51.5, 51.5, 50.0, 50.0, 0.0, 5.&
     &0, 5.5, 1, 10.0, 10.5, 15.0, 15.5, 25.0, 0.0, 0.0, 0.0, 0, 0, 8, 1&
     &.02, 1, 1.02, 0.918, 0.918, 1.02, 1.02, 0.0, 0.0, 0.0, 0.0, 0.0, 5&
     &.0, 5.001, 10.0, 10.001, 15.0, 0.0, 0.0, 0.0, 0.0, 1, 0, 6, 0.1, 1&
     &0.0, 0, 0.0, 5.0, 0.0, 1, 0.0, 90.0, 90.0, 0.0, 0.0, 0.0, 0.0, 0.0&
     &, 0.0, 0.0, 5.0, 5.01, 10.0, 10.01, 15.0, 15.01, 0.0, 0.0, 0.0, 6)


! 600:[multimeter] Multimeter 
      IVD1_1 = NRTCF
      NRTCF  = NRTCF + 5
      IF (ABS(1.0) .GT. 1.0E-20) THEN
        RTCF(IVD1_1) = 1.0/ABS(1.0)
      ELSE
        RTCF(IVD1_1) = 1.0
      ENDIF
      IF (ABS(1.0) .GT. 1.0E-20) THEN
        RTCF(IVD1_1+1) = 1.0/ABS(1.0)
      ELSE
        RTCF(IVD1_1+1) = 1.0
      ENDIF
      RTCF(IVD1_1+2) = 0.02
      RTCF(IVD1_1+3) = Fsys

! 610:[multimeter] Multimeter 
      IVD1_1 = NRTCF
      NRTCF  = NRTCF + 5
      IF (ABS(1.0) .GT. 1.0E-20) THEN
        RTCF(IVD1_1) = 1.0/ABS(1.0)
      ELSE
        RTCF(IVD1_1) = 1.0
      ENDIF
      IF (ABS(1.0) .GT. 1.0E-20) THEN
        RTCF(IVD1_1+1) = 1.0/ABS(1.0)
      ELSE
        RTCF(IVD1_1+1) = 1.0
      ENDIF
      RTCF(IVD1_1+2) = 0.02
      RTCF(IVD1_1+3) = 50.0

! 640:[DPS_Dummy]  
      CALL DPS_DummyOut_Begin()


! 660:[FaultBlock]  'FaultBlock_1'
      CALL FaultBlockOut_Begin(0.0, 0.0, 0, 0.0, 0.0, 0.0, 0, 0.0, 0.0, &
     &0.0, 0, 0.0, 0.0, 0.0, 0, 0.0, 0.0, 0.0, 0, 0.0, 0.0, 0.0, 0, 0.0,&
     & 0.0, 0.0, 0, 0.0, 0.0, 0.0, 0, 0.0, 0.0, 0.0, 0, 0.0, 0.0, 0.0, 0&
     &, 0.0, 0.0, 0.0, 0, 0.0, 0.0, 0.0, 0, 0.0, 0.0, 0.0, 0, 0.0, 30.0,&
     & 0.43, 0, 18.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, &
     &0.0, 0.0, 0.0, 3.0, 1, 1, 5.0, 0.43, 0, 18.0, 3.0, 50.0, 0.0, 0.0,&
     & 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0)


! 740:[datatap] Scalar/Array Tap 

! 750:[datatap] Scalar/Array Tap 

! 760:[datatap] Scalar/Array Tap 

! 770:[SymmetricalComponentsCalc_1_1]  'SymmetricalComponentsCalc_1_1'
      CALL SymmetricalComponentsCalc_1_1Out_Begin(50.0)


! 780:[SymmetricalComponentsCalc]  'SymmetricalComponentsCalc_1'
      CALL SymmetricalComponentsCalcOut_Begin(50.0)


! 810:[SymmetricalComponentsCalc]  'SymmetricalComponentsCalc_1'
      CALL SymmetricalComponentsCalcOut_Begin(50.0)


! 820:[setpointProfiles]  'setpointProfiles_1'
      CALL setpointProfilesOut_Begin(0.0, 1.02, 1.02, 1.0, 1.05, 1.05, 1&
     &.02, 1.02, 0.0, 0.0, 0.0, 4.0, 4.001, 2, 10.0, 10.001, 100.0, 0.0,&
     & 0.0, 0.0, 0.0, 0.0, 6, 1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.&
     &0, 0.0, 0.0, 0.0, 0.0, 0.0, 2, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, &
     &0.0, 10, 1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.&
     &0, 0.0, 0.0, 2, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 10, 1.0, 0&
     &.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 2,&
     & 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 10, 1.0, 0.0, 0.0, 0.0, 1&
     &.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 2, 0.0, 0.0, 0.0,&
     & 0.0, 0.0, 0.0, 0.0, 0.0, 10, 1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0&
     &.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 2, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,&
     & 0.0, 0.0, 10, 1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0&
     &.0, 0.0, 0.0, 0.0, 2, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 10, &
     &1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0&
     &.0, 2, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0, 1000.0)


! 880:[TapCtrl_1]  
      CALL TapCtrl_1Out_Begin(1, 220.0, 0.0125, 0.64, 8, 8, 3.0, 3.0, 1)


! 910:[Aggr_Fb_Scaled]  
      CALL Aggr_Fb_ScaledOut_Begin()


! 930:[DDSRF_PLL_1]  
      CALL DDSRF_PLL_1Out_Begin(220.0, 50.0)


! 1000:[HyCtl]  'HyCon1'
      CALL HyCtlOut_Begin(1, 0, 50.0, 3000.0, 21521, 0.04, 1.2, 0.0, 0.0&
     &, 0.0, 0.0)


! 1010:[SCxxxx] SMA  SC xxxx 
      CALL SCxxxxOut_Begin(51, 16641, 9, 0, 3000)


! 1020:[Aggr_Fb_Scaled]  
      CALL Aggr_Fb_ScaledOut_Begin()


! 1030:[SCxxxx] SMA  SC xxxx 
      CALL SCxxxxOut_Begin(57, 82433, 9, 0, 3000)


! 1290:[rms3ph] Three Phase RMS Meter 
      RTCF(NRTCF) = 1.0
      IF (1.0 .GT. 1.0E-20) RTCF(NRTCF) = 1.0/1.0
      RTCF(NRTCF+1) = Fsys
      RTCF(NRTCF+2) = 0.0
      NRTCF = NRTCF + 3

! 1350:[photovoltaic_source] photovoltaic source 'PVarray1'
      RTCF(NRTCF) = 1.0/REAL(24*2000)
      NRTCF = NRTCF + 1

! 1360:[pgb] Output Channel 'Ic_PoC'

! 1370:[pgb] Output Channel 'Ib_PoC'

! 1400:[pgb] Output Channel 'Ia_PoC'

! 1530:[pgb] Output Channel 'PLANT_Q_MV'

! 1550:[pgb] Output Channel 'PLANT_P_MV'

! 1580:[pgb] Output Channel 'PLANT_V_MV'

! 1630:[pgb] Output Channel 'PCU2_Phs'

! 1650:[pgb] Output Channel 'PCU1_Phs'

! 1680:[pgb] Output Channel 'PCU2_Arms_LV'

! 1690:[pgb] Output Channel 'PCU1_Arms_LV'

! 1700:[DEBUG_HyCon_Scope]  
      CALL DEBUG_HyCon_ScopeOut_Begin()


! 1730:[pgb] Output Channel 'PCU2_Q_MV'

! 1760:[pgb] Output Channel 'PCU1_Q_MV'

! 1780:[pgb] Output Channel 'PCU2_P_MV'

! 1800:[pgb] Output Channel 'PCU1_P_MV'

! 1840:[pgb] Output Channel 'PCU2_A_MV'

! 1850:[pgb] Output Channel 'PCU1_A_MV'

! 1910:[pgb] Output Channel 'PLANT_Phs'

! 1930:[SC_Scope] Scopes for monitoring 
      CALL SC_ScopeOut_Begin()


! 1940:[pgb] Output Channel 'PCU2_Q_LV'

! 1950:[pgb] Output Channel 'PLANT_Q_HV'

! 1970:[pgb] Output Channel 'PCU1_Q_LV'

! 1980:[pgb] Output Channel 'PCU2_P_LV'

! 1990:[pgb] Output Channel 'PLANT_P_HV'

! 2000:[pgb] Output Channel 'PCU1_P_LV'

! 2010:[pgb] Output Channel 'PCU2_A_LV'

! 2030:[pgb] Output Channel 'PCU1_A_LV'

! 2040:[SC_Scope] Scopes for monitoring 
      CALL SC_ScopeOut_Begin()


      RETURN
      END

